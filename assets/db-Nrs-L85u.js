function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{B as To,F as ne,_ as Te,a as e,Q as ko,p as X,u as Ue,a0 as Lo,r as wo,N as Ao,h as $o,a1 as Io,w as ct,g as $,a2 as So,a3 as rt,a4 as Po,a5 as Ro,q as re,a6 as Do,A as Yt,a7 as Co,a8 as xo,f as Q,a9 as Mo,S as Oo,aa as Vo,ab as Uo,o as Un,ac as No,x as Jt,ad as In,m as Ho,V as zo,z as Bo,b as lt,P as Nn,M as Ze,J as Hn,C as Fo,ae as jo,af as qo,ag as Ko,ah as Wo,ai as Go,aj as Yo,ak as Xo,al as Zo,am as Qo,an as Jo,ao as ea,ap as ta}from"./vendor-YNBWu-Mz.js";import{_ as u,s as P,q as De,c as Lt,p as en,L as zn,a as Sn,d as Le,b as ke,h as Bn,r as na,v as oa,i as aa}from"./useTitle-6bgur48O.js";window._showToast=se;function se(t){typeof t=="string"&&(t={text:t});const{onClick:n,delay:o,...r}=t,s=To({className:`${n||t.destination?"shiny-pill":""}`,gravity:"bottom",position:"center",...r,onClick:()=>{n==null||n(s)}});return o?setTimeout(()=>{s.showToast()},o):s.showToast(),s}function _r(t,n,o,r){const s=ne(t);Te(()=>{s.current=t},[t,o]),Te(()=>{!r||n===null||n===!1||s.current()},[r]),Te(()=>{if(n===null||n===!1)return;const c=setInterval(()=>s.current(),n);return()=>clearInterval(c)},[n])}function ra(t){const n=new URL("/compose/",window.location),{width:o,height:r}=window.screen,s=Math.max(0,(o-600)/2),i=Math.max(0,(r-450)/2),c=Math.min(o,600),l=Math.min(r,450),h=(t==null?void 0:t.uid)||Math.random(),f=window.open(n,"compose"+h,`width=${c},height=${l},left=${s},top=${i}`);return f?f.__COMPOSE__=t:alert("Looks like your browser is blocking popups."),f}const Fn={x:()=>u(()=>import("./icons/close-line-YTE7hIJE.js"),__vite__mapDeps([]),import.meta.url),heart:()=>u(()=>import("./icons/heart-line-VwvWYh8h.js"),__vite__mapDeps([]),import.meta.url),bookmark:()=>u(()=>import("./icons/bookmark-line-D6jQ7QFs.js"),__vite__mapDeps([]),import.meta.url),"check-circle":()=>u(()=>import("./icons/check-circle-line-sE41WGxF.js"),__vite__mapDeps([]),import.meta.url),"x-circle":()=>u(()=>import("./icons/close-circle-line-qd3g541O.js"),__vite__mapDeps([]),import.meta.url),transfer:()=>u(()=>import("./icons/transfer-4-line-Q9QJoxz3.js"),__vite__mapDeps([]),import.meta.url),rocket:()=>u(()=>import("./icons/rocket-line-rZbVYYCZ.js"),__vite__mapDeps([]),import.meta.url),"arrow-left":()=>u(()=>import("./icons/arrow-left-line-_YC6-XGG.js"),__vite__mapDeps([]),import.meta.url),"arrow-right":()=>u(()=>import("./icons/arrow-right-line-PypiEqpu.js"),__vite__mapDeps([]),import.meta.url),"arrow-up":()=>u(()=>import("./icons/arrow-up-line-fcuKqhVE.js"),__vite__mapDeps([]),import.meta.url),"arrow-down":()=>u(()=>import("./icons/arrow-down-line-0TRJUP_K.js"),__vite__mapDeps([]),import.meta.url),earth:()=>u(()=>import("./icons/earth-line-t1Um8wpQ.js"),__vite__mapDeps([]),import.meta.url),lock:()=>u(()=>import("./icons/lock-line-0jNHqZpm.js"),__vite__mapDeps([]),import.meta.url),unlock:()=>u(()=>import("./icons/unlock-line-w3piJMVb.js"),__vite__mapDeps([]),import.meta.url),"eye-close":()=>u(()=>import("./icons/eye-close-line-lBiePPv9.js"),__vite__mapDeps([]),import.meta.url),"eye-open":()=>u(()=>import("./icons/eye-2-line-vz_Kw-rK.js"),__vite__mapDeps([]),import.meta.url),message:()=>u(()=>import("./icons/mail-line-5XLS6FEo.js"),__vite__mapDeps([]),import.meta.url),comment:()=>u(()=>import("./icons/chat-3-line-F0xcdpXY.js"),__vite__mapDeps([]),import.meta.url),comment2:()=>u(()=>import("./icons/comment-2-line-xEXuT-Ip.js"),__vite__mapDeps([]),import.meta.url),home:()=>u(()=>import("./icons/home-3-line-qJiZhXUH.js"),__vite__mapDeps([]),import.meta.url),notification:()=>u(()=>import("./icons/notification-line-olNPLtgS.js"),__vite__mapDeps([]),import.meta.url),follow:()=>u(()=>import("./icons/user-follow-line-k_GCWTtp.js"),__vite__mapDeps([]),import.meta.url),"follow-add":()=>u(()=>import("./icons/user-add-line-zzW9OULB.js"),__vite__mapDeps([]),import.meta.url),poll:[()=>u(()=>import("./icons/chart-bar-line-5r_DfN2w.js"),__vite__mapDeps([]),import.meta.url),"90deg"],pencil:()=>u(()=>import("./icons/pencil-line-bKXqElLR.js"),__vite__mapDeps([]),import.meta.url),quill:()=>u(()=>import("./icons/quill-pen-line-h_5-FsGz.js"),__vite__mapDeps([]),import.meta.url),at:()=>u(()=>import("./icons/at-line-9vJS_Hnl.js"),__vite__mapDeps([]),import.meta.url),attachment:()=>u(()=>import("./icons/attachment-line-C2PUa1Ke.js"),__vite__mapDeps([]),import.meta.url),upload:()=>u(()=>import("./icons/upload-3-line-Qsjvubiw.js"),__vite__mapDeps([]),import.meta.url),gear:()=>u(()=>import("./icons/settings-3-line-kt4MSpRv.js"),__vite__mapDeps([]),import.meta.url),more:()=>u(()=>import("./icons/more-3-line-wUD-Yhmj.js"),__vite__mapDeps([]),import.meta.url),more2:()=>u(()=>import("./icons/more-1-fill-je1-slyh.js"),__vite__mapDeps([]),import.meta.url),external:()=>u(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popout:()=>u(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popin:[()=>u(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),"180deg"],plus:()=>u(()=>import("./icons/add-circle-line--O-MfyNy.js"),__vite__mapDeps([]),import.meta.url),"chevron-left":()=>u(()=>import("./icons/left-line-Jck0yVmC.js"),__vite__mapDeps([]),import.meta.url),"chevron-right":()=>u(()=>import("./icons/right-line-7VBoqLdz.js"),__vite__mapDeps([]),import.meta.url),"chevron-down":()=>u(()=>import("./icons/down-line-9PeS5YhF.js"),__vite__mapDeps([]),import.meta.url),reply:[()=>u(()=>import("./icons/share-forward-line-4jL-2Q4u.js"),__vite__mapDeps([]),import.meta.url),"180deg","horizontal"],thread:()=>u(()=>import("./icons/route-line-2YYy3958.js"),__vite__mapDeps([]),import.meta.url),group:()=>u(()=>import("./icons/group-line-JvhJklhQ.js"),__vite__mapDeps([]),import.meta.url),bot:()=>u(()=>import("./icons/android-2-line-uPwvVubH.js"),__vite__mapDeps([]),import.meta.url),menu:()=>u(()=>import("./icons/rows-4-line-SxGPYpTa.js"),__vite__mapDeps([]),import.meta.url),list:()=>u(()=>import("./icons/list-check-line-qNqx9Mm4.js"),__vite__mapDeps([]),import.meta.url),search:()=>u(()=>import("./icons/search-2-line-G39AynEw.js"),__vite__mapDeps([]),import.meta.url),hashtag:()=>u(()=>import("./icons/hashtag-line-SS3QMu1R.js"),__vite__mapDeps([]),import.meta.url),info:()=>u(()=>import("./icons/information-line-8SOch6cR.js"),__vite__mapDeps([]),import.meta.url),shortcut:()=>u(()=>import("./icons/lightning-line-JMYUlCZM.js"),__vite__mapDeps([]),import.meta.url),user:()=>u(()=>import("./icons/user-4-line-zT_bpOrS.js"),__vite__mapDeps([]),import.meta.url),following:()=>u(()=>import("./icons/walk-line-CF7a5s4t.js"),__vite__mapDeps([]),import.meta.url),pin:()=>u(()=>import("./icons/pin-line-ULyRQyWZ.js"),__vite__mapDeps([]),import.meta.url),unpin:[()=>u(()=>import("./icons/pin-line-ULyRQyWZ.js"),__vite__mapDeps([]),import.meta.url),"180deg"],bus:()=>u(()=>import("./icons/bus-2-line-XuQdDZ_w.js"),__vite__mapDeps([]),import.meta.url),link:()=>u(()=>import("./icons/link-2-line-BUqp1EwN.js"),__vite__mapDeps([]),import.meta.url),history:()=>u(()=>import("./icons/history-line-yoG7K8wL.js"),__vite__mapDeps([]),import.meta.url),share:()=>u(()=>import("./icons/share-2-line-PYo-zN94.js"),__vite__mapDeps([]),import.meta.url),sparkles:()=>u(()=>import("./icons/sparkles-line-wjZWGZ1a.js"),__vite__mapDeps([]),import.meta.url),sparkles2:()=>u(()=>import("./icons/sparkles-2-line-g2FqdZ0R.js"),__vite__mapDeps([]),import.meta.url),exit:()=>u(()=>import("./icons/exit-line-l-1uUgI7.js"),__vite__mapDeps([]),import.meta.url),translate:()=>u(()=>import("./icons/translate-line-HpDtlqS2.js"),__vite__mapDeps([]),import.meta.url),play:()=>u(()=>import("./icons/play-fill-Ey-zv2eL.js"),__vite__mapDeps([]),import.meta.url),trash:()=>u(()=>import("./icons/delete-2-line-pjUduCFs.js"),__vite__mapDeps([]),import.meta.url),mute:()=>u(()=>import("./icons/volume-mute-line-WthBoXru.js"),__vite__mapDeps([]),import.meta.url),unmute:()=>u(()=>import("./icons/volume-line-PZujbN8h.js"),__vite__mapDeps([]),import.meta.url),block:()=>u(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),unblock:[()=>u(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),"180deg"],flag:()=>u(()=>import("./icons/flag-1-line-xvcg7G7Q.js"),__vite__mapDeps([]),import.meta.url),time:()=>u(()=>import("./icons/time-line-ThP0kTRr.js"),__vite__mapDeps([]),import.meta.url),refresh:()=>u(()=>import("./icons/refresh-2-line-t42qqclb.js"),__vite__mapDeps([]),import.meta.url),emoji2:()=>u(()=>import("./icons/emoji-2-line--uNVc2IC.js"),__vite__mapDeps([]),import.meta.url),filter:()=>u(()=>import("./icons/filter-2-line-KyjbFYlO.js"),__vite__mapDeps([]),import.meta.url),filters:()=>u(()=>import("./icons/filter-line-1KEfnWDm.js"),__vite__mapDeps([]),import.meta.url),chart:()=>u(()=>import("./icons/chart-line-line-pHaLt6yC.js"),__vite__mapDeps([]),import.meta.url),react:()=>u(()=>import("./icons/react-line-YfZPqZem.js"),__vite__mapDeps([]),import.meta.url),layout4:()=>u(()=>import("./icons/layout-4-line-FOdnyEcZ.js"),__vite__mapDeps([]),import.meta.url),layout5:()=>u(()=>import("./icons/layout-5-line-9Kks7dle.js"),__vite__mapDeps([]),import.meta.url),announce:()=>u(()=>import("./icons/announcement-line-MSlAmDH1.js"),__vite__mapDeps([]),import.meta.url),alert:()=>u(()=>import("./icons/alert-line-zyc6hy8V.js"),__vite__mapDeps([]),import.meta.url),round:()=>u(()=>import("./icons/round-fill-a0rplSmV.js"),__vite__mapDeps([]),import.meta.url),"arrow-up-circle":()=>u(()=>import("./icons/arrow-up-circle-line-e3kZqEZN.js"),__vite__mapDeps([]),import.meta.url),"arrow-down-circle":()=>u(()=>import("./icons/arrow-down-circle-line-mpqFtRtO.js"),__vite__mapDeps([]),import.meta.url),clipboard:()=>u(()=>import("./icons/clipboard-line-9F_Yeo71.js"),__vite__mapDeps([]),import.meta.url),"account-edit":()=>u(()=>import("./icons/user-edit-line-9VnWCh0X.js"),__vite__mapDeps([]),import.meta.url),"account-warning":()=>u(()=>import("./icons/user-warning-line-gL3RGb1N.js"),__vite__mapDeps([]),import.meta.url),keyboard:()=>u(()=>import("./icons/keyboard-line-10AZQcVH.js"),__vite__mapDeps([]),import.meta.url),cloud:()=>u(()=>import("./icons/cloud-line-abe0HgFS.js"),__vite__mapDeps([]),import.meta.url),month:()=>u(()=>import("./icons/calendar-month-line-VoXZVWAe.js"),__vite__mapDeps([]),import.meta.url),media:()=>u(()=>import("./icons/photo-album-line--GdJqjfq.js"),__vite__mapDeps([]),import.meta.url),speak:()=>u(()=>import("./icons/radar-line-ndI8IhOG.js"),__vite__mapDeps([]),import.meta.url),building:()=>u(()=>import("./icons/building-5-line-ew7lu83B.js"),__vite__mapDeps([]),import.meta.url),history2:()=>u(()=>import("./icons/history-2-line-3yIVzoWo.js"),__vite__mapDeps([]),import.meta.url),document:()=>u(()=>import("./icons/document-line--D6ooZg1.js"),__vite__mapDeps([]),import.meta.url),"arrows-right":()=>u(()=>import("./icons/arrows-right-line-HF4HILdT.js"),__vite__mapDeps([]),import.meta.url),code:()=>u(()=>import("./icons/code-line-h4RWLaak.js"),__vite__mapDeps([]),import.meta.url),copy:()=>u(()=>import("./icons/copy-2-line-mPSDKieb.js"),__vite__mapDeps([]),import.meta.url),quote:()=>u(()=>import("./icons/quote-left-line-NQzeELMO.js"),__vite__mapDeps([]),import.meta.url),settings:()=>u(()=>import("./icons/settings-6-line-ZgCBilgF.js"),__vite__mapDeps([]),import.meta.url),"heart-break":()=>u(()=>import("./icons/heart-crack-line-P3DoKfTT.js"),__vite__mapDeps([]),import.meta.url)},ia={s:12,m:16,l:20,xl:24,xxl:32},Pn={},sa=ko(function({width:t,height:n,body:o,rotate:r,flip:s}){return e("svg",{viewBox:`0 0 ${t} ${n}`,dangerouslySetInnerHTML:{__html:o},style:{transform:`${r?`rotate(${r})`:""} ${s?"scaleX(-1)":""}`}})},{isShallowEqual:!0,maxSize:Object.keys(Fn).length,matchesArg:(t,n)=>t.icon===n.icon&&t.body===n.body});function y({icon:t,size:n="m",alt:o,title:r,class:s="",style:i={}}){if(!t)return null;const c=ia[n];let l=Fn[t];if(!l)return null;let h,f;Array.isArray(l)&&([l,h,f]=l);const[p,d]=X(Pn[t]),_=ne(t);return Te(()=>{p&&_.current===t||((async()=>{const g=await l();d(g.default),Pn[t]=g.default})(),_.current=t)},[t]),e("span",{class:`icon ${s}`,title:r||o,style:{width:`${c}px`,height:`${c}px`,...i},children:p&&e(sa,{icon:t,width:p.width,height:p.height,body:p.body,rotate:h,flip:f})})}function ca(t,n=[]){!t||typeof t!="function"||Te(()=>{const o=new CloseWatcher;return o.addEventListener("close",t),()=>{o.destroy()}},n)}const la=window.CloseWatcher?ca:()=>{},da=document.getElementById("modal-container");function Xt({children:t,onClose:n,onClick:o,class:r}){if(!t)return null;const s=ne();Te(()=>{let h=setTimeout(()=>{var p;const f=(p=s.current)==null?void 0:p.querySelector('[tabindex="-1"]');f&&f.focus()},100);return()=>clearTimeout(h)},[]);const i=window.CloseWatcher,c=Ue("esc",()=>{setTimeout(()=>{n==null||n()},0)},{enabled:!i&&!!n,keydown:!1,keyup:!0},[n]);la(n,[n]);const l=e("div",{ref:h=>{var f;s.current=h,c.current=((f=h==null?void 0:h.querySelector)==null?void 0:f.call(h,'[tabindex="-1"]'))||h},className:r,onClick:h=>{o==null||o(h),h.target===h.currentTarget&&(n==null||n(h))},tabIndex:"-1",onFocus:h=>{var f,p;try{if(h.target===h.currentTarget){const d=(f=s.current)==null?void 0:f.querySelector('[tabindex="-1"]'),_=!!d&&((p=getComputedStyle(d))==null?void 0:p.pointerEvents)!=="none";d&&_&&d.focus()}}catch{}},children:t});return Lo(l,da)}const Ne=Ao((t,n)=>{let o;try{o=wo()}catch{}let r=(location.hash||"").replace(/^#/,"").trim();r===""&&(r="/");const{to:s,...i}=t;if(r&&r!=="/"&&r.includes("?"))try{const l=new URL(r,location.origin);if(l.searchParams.size){const h=Array.from(l.searchParams.entries()).map(([f,p])=>`${f}=${encodeURIComponent(p)}`).join("&");r=l.pathname+"?"+h}}catch{}const c=r===s||decodeURIComponent(r)===s;return e("a",{ref:n,href:`#${s}`,...i,class:`${t.class||""} ${c?"is-active":""}`,onClick:l=>{var h,f,p;(f=(h=l.currentTarget)==null?void 0:h.parentNode)!=null&&f.closest("a")&&l.stopPropagation(),o&&(P.prevLocation=o),(p=t.onClick)==null||p.call(t,l)}})}),{locale:ua}=Intl.NumberFormat().resolvedOptions(),Se=Intl.NumberFormat(ua,{notation:"compact"}).format;function wt({className:t="truncated"}={}){const n=ne(),o=$o(({height:r})=>{if(n.current){const{scrollHeight:s}=n.current;let i=s>r;if(i){const{height:c,maxHeight:l}=getComputedStyle(n.current),h=parseInt(l||c,10);i=s>h}n.current.classList.toggle(t,i)}},300);return Io({ref:n,box:"border-box",onResize:o}),n}const Rn={s:16,m:20,l:24,xl:32,xxl:50,xxxl:64},Qe={},et=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas"),At=et.getContext("2d",{willReadFrequently:!0});At.imageSmoothingEnabled=!1;function ma({url:t,size:n,alt:o="",squircle:r,...s}){n=Rn[n]||n||Rn.m;const i=ne(),c=/missing\.png$/.test(t);return e("span",{ref:i,class:`avatar ${r?"squircle":""} ${Qe[t]?"has-alpha":""}`,style:{width:n,height:n},title:o,...s,children:!!t&&e("img",{src:t,width:n,height:n,alt:o,loading:"lazy",decoding:"async",crossOrigin:Qe[t]===void 0&&!c?"anonymous":void 0,onError:l=>{l.target.crossOrigin&&(l.target.crossOrigin=null,l.target.src=t)},onLoad:l=>{i.current&&(i.current.dataset.loaded=!0),Qe[t]===void 0&&(c||queueMicrotask(()=>{try{const{width:h,height:f}=l.target;et.width!==h&&(et.width=h),et.height!==f&&(et.height=f),At.drawImage(l.target,0,0);const p=At.getImageData(0,0,h,f),d=p.data.filter((_,g)=>g%4===3&&_<=128).length/(p.data.length/4)>.1;d&&i.current.classList.add("has-alpha"),Qe[t]=d,At.clearRect(0,0,h,f)}catch{Qe[t]=!1}}))}})})}const Ae=De(ma);function jn({staticUrl:t,alt:n,url:o}){return e("picture",{children:[e("source",{srcset:t,media:"(prefers-reduced-motion: reduce)"}),e("img",{src:o,alt:n,class:"shortcode-emoji emoji",width:"16",height:"16",loading:"lazy",decoding:"async"},n)]})}function ha({text:t,emojis:n}){if(!t)return"";if(!(n!=null&&n.length)||t.indexOf(":")===-1)return t;const o=new RegExp(`:(${n.map(s=>s.shortcode).join("|")}):`,"g");return t.split(o).map(s=>{const i=n.find(c=>c.shortcode===s);if(i){const{url:c,staticUrl:l}=i;return e(jn,{staticUrl:l,alt:s,url:c})}return s})}const it=ct(ha,(t,n)=>{var o,r;return t.text===n.text&&((o=t.emojis)==null?void 0:o.length)===((r=n.emojis)==null?void 0:r.length)}),pa=new Intl.Collator("en",{sensitivity:"base"});function fa({account:t,instance:n,showAvatar:o,showAcct:r,short:s,external:i,onClick:c}){const{acct:l,avatar:h,avatarStatic:f,id:p,url:d,displayName:_,emojis:g,bot:b}=t;let{username:E}=t;const[w,R,k]=l.match(/([^@]+)(@.+)/i)||[,l],v=E.toLowerCase().trim(),m=(_||"").toLowerCase().trim(),D=m.replace(/(\:(\w|\+|\-)+\:)(?=|[\!\.\?]|$)/g,"").replace(/\s+/g,""),U=D.replace(/[^a-z0-9]/gi,"");return!s&&(v===m||v===D||v===U||pa.compare(v,D)===0)&&(E=null),e("a",{class:`name-text ${r?"show-acct":""} ${s?"short":""}`,href:d,target:i?"_blank":null,title:_?`${_} (${k?"":"@"}${l})`:`${k?"":"@"}${l}`,onClick:A=>{if(!i){if(A.preventDefault(),A.stopPropagation(),c)return c(A);P.showAccount={account:t,instance:n}}},children:[o&&e($,{children:[e(Ae,{url:f||h,squircle:b})," "]}),_&&!s?e($,{children:[e("b",{children:e(it,{text:_,emojis:g})}),!r&&E&&e($,{children:[" ",e("i",{children:["@",E]})]})]}):s?e("i",{children:E}):e("b",{children:E}),r&&e($,{children:[e("br",{}),e("i",{children:[k?"":"@",R,!!k&&e("span",{class:"ib",children:k})]})]})]})}const tt=ct(fa,(t,n)=>{const{account:o}=t,{account:r}=n;return(o==null?void 0:o.acct)===(r==null?void 0:r.acct)});rt.extend(So);rt.extend(Po);rt.extend(Ro);const ga=new Intl.DateTimeFormat;function Pe({datetime:t,format:n}){if(!t)return null;const o=re(()=>rt(t),[t]),r=re(()=>{if(n==="micro"){const c=rt();return c.diff(o,"day")<=1||c.year()===o.year()?o.twitter():ga.format(o.toDate())}return o.fromNow()},[o,n]),s=re(()=>o.toISOString(),[o]),i=re(()=>o.format("LLLL"),[o]);return e("time",{datetime:s,title:i,children:r})}function _a({children:t}){const n=ne(),[o,r]=X(!1),[s,i]=X(!1),{ref:c}=Do({root:null,trackVisibility:!0,delay:1e3,onChange:l=>{l&&r(!0)},triggerOnce:!0,skip:s||o});return Yt(()=>{if(!n.current)return;n.current.getBoundingClientRect().bottom>0&&i(!0)},[]),s?t:e("div",{ref:n,class:"shazam-container no-animation",hidden:!o,children:e("div",{ref:c,class:"shazam-container-inner",children:t})})}const va=document.documentElement,kt=getComputedStyle(va),ba=8;let qn=[0,0,0,0];function Kn(){const t=kt.getPropertyValue("--sai-top"),n=kt.getPropertyValue("--sai-right"),o=kt.getPropertyValue("--sai-bottom"),r=kt.getPropertyValue("--sai-left");qn=[Math.max(0,parseInt(t,10)),Math.max(0,parseInt(n,10)),Math.max(0,parseInt(o,10)),Math.max(0,parseInt(r,10))]}requestAnimationFrame(Kn);function Wn(t=[]){return qn.map((o,r)=>(o||ba)+(t[r]||0)).join(" ")}CSS.supports("top: env(safe-area-inset-top)")&&window.addEventListener("resize",Kn,{passive:!0});function Gn(t){const{containerProps:n,instanceRef:o}=t,r=Co(),s=o!=null&&o.current?o:ne();return e(xo,{boundingBoxPadding:Wn(),repositionFlag:`${r.width}x${r.height}`,unmountOnClose:!0,...t,instanceRef:s,containerProps:{onClick:i=>{var c,l,h;i.target===i.currentTarget&&((l=(c=s.current)==null?void 0:c.closeMenu)==null||l.call(c)),(h=n==null?void 0:n.onClick)==null||h.call(n,i)},...n}})}function Nt({subMenu:t=!1,confirm:n=!0,confirmLabel:o,menuItemClassName:r,menuFooter:s,menuExtras:i,...c}){const{children:l,onClick:h,...f}=c;if(!n)return t?e(Q,{...c}):h?Mo(l,{onClick:h}):l;const p=t?Oo:Gn,d=ne();return e(p,{instanceRef:d,openTrigger:"clickOnly",direction:"bottom",overflow:"auto",gap:-8,shift:8,menuClassName:"menu-emphasized",...f,menuButton:t?void 0:l,label:t?l:void 0,itemProps:{onPointerMove:_=>{var g,b;_.pointerType==="touch"&&((b=(g=d.current)==null?void 0:g.openMenu)==null||b.call(g))},onPointerLeave:_=>{var g,b;_.pointerType==="touch"&&((b=(g=d.current)==null?void 0:g.openMenu)==null||b.call(g))}},children:[e(Q,{className:r,onClick:h,children:o}),i,s]})}function ya({poll:t,lang:n,readOnly:o,refresh:r=()=>{},votePoll:s=()=>{}}){const[i,c]=X("default"),{expired:l,expiresAt:h,id:f,multiple:p,options:d,ownVotes:_,voted:g,votersCount:b,votesCount:E,emojis:w}=t,R=!!h&&new Date(h),k=b||E;let v=0;k<=1e3?v=0:k<=1e4?v=1:k<=1e5&&(v=2);const[m,D]=X(!1),U=d.every(A=>A.votesCount!==null);return e("div",{lang:n,dir:"auto",class:`poll ${o?"read-only":""} ${i==="loading"?"loading":""}`,children:[m&&U||g||l?e($,{children:[e("div",{class:"poll-options",children:d.map((A,L)=>{const{title:S,votesCount:C}=A,q=k?(C/k*100).toFixed(v):0,M=C>0&&C===Math.max(...d.map(O=>O.votesCount));return e("div",{class:`poll-option poll-result ${M?"poll-option-leading":""}`,style:{"--percentage":`${q}%`},children:[e("div",{class:"poll-option-title",children:[e("span",{children:e(it,{text:S,emojis:w})}),g&&_.includes(L)&&e($,{children:[" ",e(y,{icon:"check-circle"})]})]}),e("div",{class:"poll-option-votes",title:`${C} vote${C===1?"":"s"}`,children:[q,"%"]})]},`${L}-${S}-${C}`)})}),!l&&!g&&e("button",{class:"poll-vote-button plain2",disabled:i==="loading",onClick:A=>{A.preventDefault(),D(!1)},children:[e(y,{icon:"arrow-left",size:"s"})," Hide results"]})]}):e("form",{onSubmit:async A=>{A.preventDefault();const L=A.target,S=new FormData(L),C=[];S.forEach((q,M)=>{M==="poll"&&C.push(q)}),C.length&&(c("loading"),await s(C),c("default"))},children:[e("div",{class:"poll-options",children:d.map((A,L)=>{const{title:S}=A;return e("div",{class:"poll-option",children:e("label",{class:"poll-label",children:[e("input",{type:p?"checkbox":"radio",name:"poll",value:L,disabled:i==="loading",readOnly:o}),e("span",{class:"poll-option-title",children:e(it,{text:S,emojis:w})})]})})})}),!o&&e("button",{class:"poll-vote-button",type:"submit",disabled:i==="loading",children:"Vote"})]}),e("p",{class:"poll-meta",children:[!l&&!o&&e("button",{type:"button",class:"plain small",disabled:i==="loading",style:{marginLeft:-8},onClick:A=>{A.preventDefault(),c("loading"),(async()=>(await r(),c("default")))()},title:"Refresh",children:e(y,{icon:"refresh",alt:"Refresh"})}),!g&&!l&&!o&&U&&e("button",{type:"button",class:"plain small",disabled:i==="loading",onClick:A=>{A.preventDefault(),D(!m)},title:m?"Hide results":"Show results",children:[e(y,{icon:m?"eye-open":"eye-close",alt:m?"Hide results":"Show results"})," "]}),!l&&!o&&" ",e("span",{title:E,children:Se(E)})," vote",E===1?"":"s",!!b&&b!==E&&e($,{children:[" ","• ",e("span",{title:b,children:Se(b)})," ","voter",b===1?"":"s"]})," ","• ",l?"Ended":"Ending"," ",!!R&&e(Pe,{datetime:R})]})," "]})}function $t(t,n=[]){return t?(!n.length||t.indexOf(":")===-1||n.forEach(o=>{const{shortcode:r,staticUrl:s,url:i}=o;t=t.replace(new RegExp(`:${r}:`,"g"),`<picture><source srcset="${s}" media="(prefers-reduced-motion: reduce)"></source><img class="shortcode-emoji emoji" src="${i}" alt=":${r}:" width="16" height="16" loading="lazy" decoding="async" /></picture>`)}),t):""}const Oe=document.createElement("div"),Ea=["u-url","mention","hashtag"];function Ta(t,n={}){const{emojis:o,postEnhanceDOM:r=()=>{}}=n;let s=t;const i=document.createElement("div");i.innerHTML=s;const c=/<a/i.test(s),l=s.includes("```");if(c&&(i.querySelectorAll('a:not([target="_blank"])').forEach(d=>{d.setAttribute("target","_blank")}),i.querySelectorAll("a[class]").forEach(d=>{d.classList.forEach(_=>{Ea.includes(_)||d.classList.remove(_)})})),c&&i.querySelectorAll("a[href]").forEach(p=>{/^https?:\/\//i.test(p.textContent.trim())&&(p.classList.add("has-url-text"),Aa(p))}),c){const f=i.querySelectorAll("a[href]"),p=[];f.forEach(d=>{const _=d.innerText.trim(),g=d.querySelector("*");if(/^@[^@]+(@[^@]+)?$/g.test(_)){const[b,E,w]=_.split("@");g||(!p.some(([R])=>R===E)||p.some(([R,k])=>R===E&&k===w)?(d.innerHTML=`@<span>${E}</span>`,p.push([E,w])):d.innerHTML=`@<span>${E}@${w}</span>`),d.classList.add("mention")}/^#[^#]+$/g.test(_)&&(g||(d.innerHTML=`#<span>${_.slice(1)}</span>`),d.classList.add("mention","hashtag"))})}let h;if(s.includes(":")&&(h=zt(i),h.forEach(f=>{let p=f.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");o&&(p=$t(p,o)),Oe.innerHTML=p,f.replaceWith(...Oe.childNodes)})),l&&[...i.querySelectorAll("p")].filter(p=>/^```[^]+```$/g.test(p.innerText.trim())).forEach(p=>{const d=document.createElement("pre");p.querySelectorAll("br").forEach(_=>_.replaceWith(`
`)),d.innerHTML=`<code>${p.innerHTML.trim()}</code>`,p.replaceWith(d)}),l&&[...i.querySelectorAll("p")].filter(d=>/^```/g.test(d.innerText)).forEach(d=>{const _=[d];let g=!1,b=d;for(;b.nextElementSibling;){const E=b.nextElementSibling;if(E&&E.tagName==="P")if(/```$/g.test(E.innerText)){_.push(E),g=!0;break}else _.push(E);else break;b=E}if(g){const E=document.createElement("pre");_.forEach(R=>{R.querySelectorAll("br").forEach(k=>k.replaceWith(`
`))});const w=_.map(R=>R.innerHTML).join(`

`);E.innerHTML=`<code tabindex="0">${w}</code>`,d.replaceWith(E),_.forEach(R=>R.remove())}}),s.includes("`")&&(h=zt(i),h.forEach(f=>{let p=f.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/`[^`]+`/g.test(p)&&(p=p.replaceAll(/(`[^]+?`)/g,"<code>$1</code>")),Oe.innerHTML=p,f.replaceWith(...Oe.childNodes)})),/twitter\.com/i.test(s)&&(h=zt(i,{rejectFilter:["A"]}),h.forEach(f=>{let p=f.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/@[a-zA-Z0-9_]+@twitter\.com/g.test(p)&&(p=p.replaceAll(/(@([a-zA-Z0-9_]+)@twitter\.com)/g,'<a href="https://twitter.com/$2" rel="nofollow noopener noreferrer" target="_blank">$1</a>')),Oe.innerHTML=p,f.replaceWith(...Oe.childNodes)})),s.includes("#")){let f=null;const p=[...i.querySelectorAll("p")].filter((d,_)=>{let g=0;for(let b=0;b<d.childNodes.length;b++){const E=d.childNodes[b];if(E.nodeType===Node.TEXT_NODE){if(E.textContent.trim()!=="")return!1}else if(E.tagName!=="BR")if(E.tagName==="A"){const w=E.textContent.trim();if(!w||!w.startsWith("#"))return!1;g++}else return!1}if(g>3||g>1&&f&&_===f+1)return f=_,!0});p!=null&&p.length&&p.forEach(d=>{d.classList.add("hashtag-stuffing"),d.title=d.innerText})}return r&&queueMicrotask(()=>r(i)),s=i.innerHTML,s}const Yn=De(Ta),ka=["STYLE","IMG","VIDEO","AUDIO","AREA","MAP","TRACK","EMBED","IFRAME","OBJECT","PICTURE","PORTAL","SOURCE","SVG","MATH","CANVAS","NOSCRIPT","SCRIPT","INPUT","OPTION","TEXTAREA","SLOT","TEMPLATE"],La=Object.fromEntries(ka.map(t=>[t,!0])),wa=/^(https?:\/\/(www\.)?|xmpp:)/,Ht=30;function Aa(t){var n;if(!(!t||(n=t.querySelector)!=null&&n.call(t,"*")))try{const o=t.innerText.trim(),r=(o.match(wa)||[])[0]||"";if(!r)return;const s=o.slice(r.length,r.length+Ht),i=o.slice(r.length+Ht),c=o.slice(r.length).length>Ht;t.innerHTML=`<span class="invisible">${r}</span><span class=${c?"ellipsis":""}>${s}</span><span class="invisible">${i}</span>`}catch{}}function zt(t,n={}){var c;const o=[],r=Object.assign({},La,(c=n.rejectFilter)==null?void 0:c.reduce((l,h)=>(l[h]=!0,l),{})),s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(l){return r[l.parentNode.nodeName]?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);let i;for(;i=s.nextNode();)o.push(i);return o}const Xn=Vo();function $a(t,n){if(!(t!=null&&t.length))return!1;const o=t.filter(i=>{const{filter:c}=i,l=c.context.includes(n);return l?c.expiresAt?new Date(c.expiresAt)>new Date:l:!1});if(!o.length)return!1;if(o.some(i=>i.filter.filterAction==="hide"))return{action:"hide"};if(o.some(i=>i.filter.filterAction==="warn")){const i=o.map(c=>c.filter.title);return{action:"warn",titles:i,titlesStr:i.join(" • ")}}return!1}const tn=De($a);function Ia(t,n,o){var c;const{filtered:r}=t;if(!(r!=null&&r.length)||o&&((c=t.account)==null?void 0:c.id)===o)return!0;const i=tn(r,n);return i?i.action!=="hide":!0}function vr(t,n){if(!(t!=null&&t.length))return[];if(!n)return t;const o=Lt.session.get("currentAccount");return t.filter(r=>Ia(r,n,o))}const Sa=[{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"zh_HANT",name:"Chinese (Traditional)"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];function Pa(...t){try{return Uo(...t)}catch{return t[2]||!1}}const Zt=De(Pa),Ra=[new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],Da=Zt(Ra,Sa.map(t=>t.code.replace("_","-")),"en");function Zn(t=!1){if(t){const{contentTranslationTargetLanguage:n}=P.settings;if(n)return n}return Da}const Je=document.createElement("div");function Ca(t){return t?(Je.innerHTML=t.replace(/<\/p>/g,`</p>

`).replace(/<\/li>/g,`</li>
`),Je.querySelectorAll("br").forEach(n=>{n.replaceWith(`
`)}),Je.querySelectorAll(".invisible").forEach(n=>{n.remove()}),Je.querySelectorAll(".ellipsis").forEach(n=>{n.append("...")}),Je.innerText.replace(/[\r\n]{3,}/g,`

`).trim()):""}const nn=De(Ca);function xa(t){const{mentions:n=[],instance:o,previewMode:r,statusURL:s}=t||{};return i=>{var p,d;let{target:c}=i;if(c=c.closest("a"),!c||i.metaKey||i.ctrlKey||i.shiftKey||i.altKey||i.which===2)return;const l=(p=c.previousSibling)==null?void 0:p.textContent,h=l==null?void 0:l.endsWith("@"),f=c.innerText.startsWith("@");if((c.classList.contains("u-url")||c.classList.contains("mention"))&&f||h&&!f){const _=(c.querySelector("span")||c).innerText.trim(),g=_.replace(/^@/,""),b=c.getAttribute("href"),E=n.find(w=>w.url===b)||n.find(w=>w.acct===g||w.username===g);if(E)i.preventDefault(),i.stopPropagation(),P.showAccount={account:E.acct,instance:o};else if(!/^http/i.test(_)){i.preventDefault(),i.stopPropagation();const w=c.getAttribute("href");P.showAccount={account:w,instance:o}}}else if(!r){const _=l==null?void 0:l.endsWith("#");if(c.classList.contains("hashtag")||_){i.preventDefault(),i.stopPropagation();const g=c.innerText.replace(/^#/,"").trim(),b=o?`#/${o}/t/${g}`:`#/t/${g}`;location.hash=b}else(d=P.unfurledLinks[c.href])!=null&&d.url&&s!==c.href&&(i.preventDefault(),i.stopPropagation(),P.prevLocation={pathname:location.hash.replace(/^#/,"")},location.hash=`#${P.unfurledLinks[c.href].url}`)}}}const Bt=document.createElement("div");function Ft(t){return t?(Bt.innerHTML=t,Bt.querySelectorAll(".invisible").forEach(n=>{n.remove()}),Bt.innerText.length):0}const{locale:Ma}=new Intl.DateTimeFormat().resolvedOptions(),Oa=t=>{const{dateYear:n,hideTime:o,formatOpts:r}=t||{},s=new Date().getFullYear();return Intl.DateTimeFormat(Ma,{year:n===s?void 0:"numeric",month:"short",day:"numeric",hour:o?void 0:"numeric",minute:o?void 0:"numeric",...r})},Va=De(Oa);function st(t,n){return t instanceof Date||(t=new Date(t)),Va({dateYear:t.getFullYear(),...n}).format(t)}const nt="speechSynthesis"in window;function Dn(t,n){if(nt)try{speechSynthesis.speaking&&speechSynthesis.cancel();const o=new SpeechSynthesisUtterance(t);n&&(o.lang=n),speechSynthesis.speak(o)}catch(o){alert(o)}}function Qn(t){var c;const{spoilerText:n,content:o,poll:r,mediaAttachments:s}=t;let i="";return n!=null&&n.trim()?i+=n:i+=nn(o),i=i.trim(),(c=r==null?void 0:r.options)!=null&&c.length&&(i+=`

📊:
${r.options.map(l=>`${r.multiple?"▪️":"•"} ${l.title}`).join(`
`)}`),s!=null&&s.length&&(i+=" "+s.map(l=>({image:"🖼️",gifv:"🎞️",video:"📹",audio:"🎵",unknown:""})[l.type]||"").join("")),i}const Qt={public:"earth",unlisted:"group",private:"lock",direct:"message"},Ua=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Na="ALT",jt=t=>{const{alt:n,lang:o,index:r,...s}=t;return!n||!n.trim()?null:e("button",{type:"button",class:"alt-badge clickable",...s,onClick:i=>{i.stopPropagation(),i.preventDefault(),P.showMediaAlt={alt:n,lang:o}},title:"Media description",children:[Na,!!r&&e("sup",{children:r})]})},Ha=140,za=280,Jn=De(t=>t!=null&&t.length?t.length>Ha||/[\n\r].*[\n\r]/.test(t.trim()):!1);function Ba({class:t="",media:n,to:o,lang:r,showOriginal:s,autoAnimate:i,showCaption:c,allowLongerCaption:l,altIndex:h,onClick:f=()=>{}}){const{blurhash:p,description:d,meta:_,previewRemoteUrl:g,previewUrl:b,remoteUrl:E,url:w,type:R}=n,{original:k={},small:v,focus:m}=_||{},D=s?k==null?void 0:k.width:v==null?void 0:v.width,U=s?k==null?void 0:k.height:v==null?void 0:v.height,A=s?w:b||w,L=s?E:g||E,S=D>=U?"landscape":"portrait",C=p?Un(p):null,q=ne();let M;if(m){const V=(m.x+1)/2*100,K=(1-m.y)/2*100;M=`${V.toFixed(0)}% ${K.toFixed(0)}%`}const O=ne(),te=Jt(({x:V,y:K,scale:z})=>{const{current:le}=O;if(le){const ee=No({x:V,y:K,scale:z});z===1?le.style.removeProperty("transform"):le.style.setProperty("transform",ee),le.closest(".media-zoom").style.touchAction=z<=1.01?"pan-x":""}},[]),[ie,Z]=X(!1),me={enabled:ie,draggableUnZoomed:!1,inertiaFriction:.9,doubleTapZoomOutOnMaxScale:!0,containerProps:{className:"media-zoom",style:{overflow:"visible"}},onUpdate:te},he=re(()=>o?V=>e(Ne,{to:o,...V}):"div",[o]),B=L?new URL(L):null,I=R==="unknown"&&B&&/\.(mp4|m4r|m4v|mov|webm)$/i.test(B.pathname),H=R==="unknown"&&B&&/\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(B.pathname),W=R==="image"||R==="unknown"&&b&&!I&&!H,fe=ne(),[J,ge]=X(!1);Yt(()=>{if(!W||!s||!fe.current)return;const{offsetWidth:V,offsetHeight:K}=fe.current,z=D<V&&U<K;z&&ge(z)},[D,U]);const _e=window.innerHeight*(S==="portrait"?.45:.33),oe=S==="portrait"?0:160,ve={"--average-color":C&&`rgb(${C.join(",")})`},ce=D&&U?{"--width":`${D}px`,"--height":`${U}px`,"--aspectWidth":`${D/U*Math.max(oe,_e)}px`,aspectRatio:`${D} / ${U}`,...ve}:{...ve},ae=Jn(d);let N=!!c&&!s&&!!d&&!ae;l&&!N&&(d==null?void 0:d.length)<=za&&(N=!0);const G=N?V=>{const{children:K,...z}=V;return e("figure",{...z,children:[K,e("figcaption",{class:"media-caption",lang:r,dir:"auto",onClick:le=>{le.preventDefault(),le.stopPropagation(),P.showMediaAlt={alt:d,lang:r}},children:d})]})}:$;if(W)return me.containerProps.style.display="inherit",Yt(()=>{Ua&&s&&(async()=>{try{await fetch(A,{mode:"no-cors"}),O.current.src=A}catch{}})()},[A]),e(G,{children:e(he,{ref:fe,class:`media media-image ${t}`,onClick:f,"data-orientation":S,"data-has-alt":!N,style:s?{backgroundImage:`url(${b})`,backgroundSize:J?`${D}px ${U}px`:void 0,...ve}:ce,children:s?e(In,{...me,children:e("img",{ref:O,src:A,alt:d,width:D,height:U,"data-orientation":S,loading:"eager",decoding:"sync",onLoad:V=>{V.target.closest(".media-image").style.backgroundImage="",V.target.closest(".media-zoom").style.display="",Z(!0)},onError:V=>{const{src:K}=V.target;K===A&&A!==L&&(V.target.src=L)}})}):e($,{children:[e("img",{src:A,alt:N?"":d,width:D,height:U,"data-orientation":S,loading:"lazy",style:{objectPosition:M||"center","--anim-duration":`${Math.min(Math.max(Math.max(D,U)/100,5),120)}s`},onLoad:V=>{V.target.dataset.loaded=!0},onError:V=>{const{src:K}=V.target;K===A&&A!==L&&(V.target.src=L)}}),!N&&e(jt,{alt:d,lang:r,index:h})]})})});if(R==="gifv"||R==="video"||I){const V=k.duration<31,K=R==="gifv"&&V,z=k.duration<61,le=On(k.duration),ee=!s&&!i&&K,de=!s&&i&&K,ue=k.duration>5,Ee=`
    <video
      src="${w}"
      poster="${b}"
      width="${D}"
      height="${U}"
      data-orientation="${S}"
      preload="auto"
      autoplay
      muted="${K}"
      ${K?"":"controls"}
      playsinline
      loop="${z}"
      ${K?'ondblclick="this.paused ? this.play() : this.pause()"':""}
      ${K&&ue?"ontimeupdate=\"this.closest('.media-gif') && this.closest('.media-gif').style.setProperty('--progress', `${~~((this.currentTime / this.duration) * 100)}%`)\"":""}
    ></video>
  `;return e(G,{children:e(he,{class:`media ${t} media-${K?"gif":"video"} ${de?"media-contain":""} ${ee?"media-hover-animate":""}`,"data-orientation":S,"data-formatted-duration":s?void 0:le,"data-label":K&&!s&&!de?"GIF":"","data-has-alt":!N,style:!s&&ce,onClick:F=>{if(ee)try{q.current.pause()}catch{}f(F)},onMouseEnter:()=>{if(ee)try{q.current.play()}catch{}},onMouseLeave:()=>{if(ee)try{q.current.pause()}catch{}},onFocus:()=>{if(ee)try{q.current.play()}catch{}},onBlur:()=>{if(ee)try{q.current.pause()}catch{}},children:[s||de?K&&s?e(In,{...me,enabled:!0,children:e("div",{ref:O,dangerouslySetInnerHTML:{__html:Ee}})}):e("div",{class:"video-container",dangerouslySetInnerHTML:{__html:Ee}}):K?e("video",{ref:q,src:w,poster:b,width:D,height:U,"data-orientation":S,preload:"auto",playsinline:!0,loop:!0,muted:!0,onTimeUpdate:ue?F=>{const{target:pe}=F,It=pe==null?void 0:pe.closest(".media-gif");if(It){const be=pe.currentTime/pe.duration*100;It.style.setProperty("--progress",`${be}%`)}}:void 0}):e($,{children:[e("img",{src:b,alt:N?"":d,width:D,height:U,"data-orientation":S,loading:"lazy"}),e("div",{class:"media-play",children:e(y,{icon:"play",size:"xl"})})]}),!s&&!N&&e(jt,{alt:d,lang:r,index:h})]})})}else if(R==="audio"||H){const V=On(k.duration);return e(G,{children:e(he,{class:`media media-audio ${t}`,"data-formatted-duration":s?void 0:V,"data-has-alt":!N,onClick:f,style:!s&&ce,children:[s?e("audio",{src:E||w,preload:"none",controls:!0,autoplay:!0}):b?e("img",{src:b,alt:N?"":d,width:D,height:U,"data-orientation":S,loading:"lazy",onError:K=>{var z,le;try{(le=(z=K.target)==null?void 0:z.remove)==null||le.call(z)}catch{}}}):null,!s&&e($,{children:[e("div",{class:"media-play",children:e(y,{icon:"play",size:"xl"})}),!N&&e(jt,{alt:d,lang:r,index:h})]})]})})}}function Cn(t){const{className:n,disabled:o,...r}=t;return e(Ho,{className:n,disabled:o,children:({ref:s,closeMenu:i})=>e(Ne,{...r,ref:s,onClick:({detail:c})=>i(c===0?"Enter":void 0)})})}const Fa=[{code:"auto",name:"Detect"},{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];function qt(t){try{return new Intl.DisplayNames(navigator.languages,{type:"language"}).of(t)}catch{return null}}var ja={PHANPY_CLIENT_NAME:"Phanpy",PHANPY_WEBSITE:"https://phanpy.social",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://github.com/cheeaun/phanpy/blob/main/PRIVACY.MD",VITE_APP_ENV:"production",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{PHANPY_LINGVA_INSTANCES:xn}=ja,at=xn?xn.split(/\s+/):[],qa=zo({limit:1,interval:2e3});let Kt=0;function Ka(t,n,o){return Bo(()=>{let s=at[Kt];return fetch(`https://${s}/api/v1/${n}/${o}/${encodeURIComponent(t)}`).then(i=>{if(!i.ok)throw new Error(i.statusText);return i.json()}).then(i=>{var c;return{provider:"lingva",content:i.translation,detectedSourceLanguage:(c=i.info)==null?void 0:c.detectedSource,info:i.info}})},{retries:3,onFailedAttempt:s=>{Kt=(Kt+1)%at.length}})}const eo=1e3*60*60,to=en(Ka,{maxAge:eo}),Wa=en(qa(to),{maxAge:eo});function Ga({forceTranslate:t,sourceLanguage:n,onTranslate:o,text:r="",mini:s}){const i=Zn(!0),[c,l]=X("default"),[h,f]=X(null),[p,d]=X(null),[_,g]=X(null),b=ne(),E=n?qt(n):null,w=qt(i),R=ne("auto");o||(o=s?Wa:to);const k=async()=>{var v,m;l("loading");try{const{content:D,detectedSourceLanguage:U,provider:A,error:L,...S}=await o(r,R.current,i);if(D){if(U){const C=qt(U);g(C)}if(A==="lingva"){const C=(m=(v=S==null?void 0:S.info)==null?void 0:v.pronunciation)==null?void 0:m.query;C&&f(C)}d(D),l("default"),!s&&D.trim()!==r.trim()&&(b.current.open=!0,b.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}else l("error")}catch{l("error")}};return Te(()=>{t&&k()},[t]),s?p&&p.trim()!==r.trim()&&_!==w?e("div",{class:"shazam-container",children:e("div",{class:"shazam-container-inner",children:e("div",{class:"status-translation-block-mini",children:[e(y,{icon:"translate",alt:`Auto-translated from ${E}`}),e("output",{lang:i,dir:"auto",title:h||"",children:p})]})})}):null:e("div",{class:"status-translation-block",onClick:v=>{v.preventDefault()},children:e("details",{ref:b,children:[e("summary",{children:e("button",{type:"button",onClick:async v=>{v.preventDefault(),v.stopPropagation(),b.current.open=!b.current.open,c!=="loading"&&(p||k())},children:[e(y,{icon:"translate"})," ",e("span",{children:c==="loading"?"Translating…":n&&E&&!_?`Translate from ${E}`:"Translate"})]})}),e("div",{class:"translated-block",children:[e("div",{class:"translation-info insignificant",children:[e("select",{class:"translated-source-select",disabled:c==="loading",onChange:v=>{R.current=v.target.value,k()},children:Fa.map(v=>e("option",{value:v.code,children:v.code==="auto"?`Auto (${_??"…"})`:v.name}))})," ",e("span",{children:["→ ",w]}),e(zn,{abrupt:!0,hidden:c!=="loading"})]}),c==="error"?e("p",{class:"ui-state",children:"Failed to translate"}):!!p&&e($,{children:[e("output",{class:"translated-content",lang:i,dir:"auto",children:p}),!!h&&e("output",{class:"translated-pronunciation-content",tabIndex:-1,onClick:v=>{v.target.classList.toggle("expand")},children:h})]})]})]})})}const Ya=at!=null&&at.length?Ga:()=>null,Xa=280,Za=140;function Qa(t,n){return n.v1.accounts.$select(t).fetch()}const Ja=en(Qa),ot={public:"Public",unlisted:"Unlisted",private:"Followers only",direct:"Private mention"},er=window.ontouchstart!==void 0&&/iPad|iPhone|iPod/.test(navigator.userAgent),tr=new Intl.RelativeTimeFormat,Mn=80;function nr(t){var n;return(n=t==null?void 0:t.options)!=null&&n.length?`📊:
${t.options.map(o=>`- ${o.title}${o.votesCount>=0?` (${o.votesCount})`:""}`).join(`
`)}`:""}function Wt(t){const{spoilerText:n,content:o,poll:r}=t;return(n?`${n}

`:"")+nn(o)+nr(r)}const or=ct(({post:t,instance:n,previewMode:o})=>{const{content:r,emojis:s,language:i,mentions:c,url:l}=t;return e("div",{lang:i,dir:"auto",class:"inner-content",onClick:xa({mentions:c,instance:n,previewMode:o,statusURL:l}),dangerouslySetInnerHTML:{__html:Yn(r,{emojis:s,postEnhanceDOM:h=>{h.querySelectorAll('a.u-url[target="_blank"]').forEach(f=>{/http/i.test(f.innerText.trim())||f.removeAttribute("target")})}})}})},(t,n)=>{const{post:o}=t,{post:r}=n;return o.content===r.content});function Re({statusID:t,status:n,instance:o,size:r="m",contentTextWeight:s,readOnly:i,enableCommentHint:c,withinContext:l,skeleton:h,enableTranslate:f,forceTranslate:p,previewMode:d,onMediaClick:_,quoted:g,onStatusLinkClick:b=()=>{},showFollowedTags:E,allowContextMenu:w,showActionsBar:R,showReplyParent:k}){var wn,An,$n;if(h)return e("div",{class:"status skeleton",children:[e(Ae,{size:"xxl"}),e("div",{class:"container",children:[e("div",{class:"meta",children:"███ ████████"}),e("div",{class:"content-container",children:e("div",{class:"content",children:e("p",{children:"████ ████████"})})})]})]});const{masto:v,instance:m,authenticated:D}=Sn({instance:o}),{instance:U}=Sn(),A=m===U;let L=Le(t||(n==null?void 0:n.id),m);const S=lt(P);if(n||(n=S.statuses[L]||S.statuses[t],L=Le(n==null?void 0:n.id,m)),!n)return null;const{account:{acct:C,avatar:q,avatarStatic:M,id:O,url:te,displayName:ie,username:Z,emojis:me,bot:he,group:B},id:I,repliesCount:H,reblogged:W,reblogsCount:fe,favourited:J,favouritesCount:ge,bookmarked:_e,poll:oe,muted:ve,sensitive:ce,spoilerText:ae,visibility:N,language:G,editedAt:V,filtered:K,card:z,createdAt:le,inReplyToId:ee,inReplyToAccountId:de,content:ue,mentions:Ee,mediaAttachments:F,reblog:pe,uri:It,url:be,emojis:St,tags:hr,_deleted:Ce,_pinned:xe,emojiReactions:dt}=n,He=re(()=>Lt.session.get("currentAccount"),[]),$e=re(()=>He&&He===O,[O,He]),oo=Nn(Xn),ze=!$e&&!i&&!d&&tn(K,oo);if((ze==null?void 0:ze.action)==="hide")return null;const Be=a=>{a.shiftKey};if(r!=="l"&&ze)return e(dr,{status:n,filterInfo:ze,instance:m,containerProps:{onMouseEnter:Be},showFollowedTags:!0});const Ie=new Date(le),on=new Date(V);let Pt=Ee==null?void 0:Ee.find(a=>a.id===de);!Pt&&de===I&&(Pt={url:te,username:Z,displayName:ie});const[ut,an]=X(Pt);if(!l&&!ut&&de){const a=P.accounts[de];a?an(a):Ja(de,v).then(T=>{an(T),P.accounts[T.id]=T}).catch(T=>{})}const rn=de===He||(Ee==null?void 0:Ee.find(a=>a.id===He)),Fe=re(()=>!!(Lt.account.get("preferences")||{})["reading:expand:spoilers"],[]),sn=re(()=>(Lt.account.get("preferences")||{})["reading:expand:media"]||"default",[]),je=d||Fe||!!S.spoilers[I],qe=d||sn==="show_all"||!!S.spoilersMedia[I];if(pe)return B?e("div",{"data-state-post-id":L,class:"status-group",onMouseEnter:Be,children:[e("div",{class:"status-pre-meta",children:[e(y,{icon:"group",size:"l",alt:"Group"})," ",e(tt,{account:n.account,instance:m,showAvatar:!0})]}),e(Re,{status:t?null:pe,statusID:t?pe.id:null,instance:m,size:r,contentTextWeight:s,readOnly:i})]}):e("div",{"data-state-post-id":L,class:"status-reblog",onMouseEnter:Be,children:[e("div",{class:"status-pre-meta",children:[e(y,{icon:"rocket",size:"l"})," ",e(tt,{account:n.account,instance:m,showAvatar:!0})," ",e("span",{children:"boosted"})]}),e(Re,{status:t?null:pe,statusID:t?pe.id:null,instance:m,size:r,contentTextWeight:s,readOnly:i,enableCommentHint:!0})]});if(E&&((wn=S.statusFollowedTags[L])!=null&&wn.length))return e("div",{"data-state-post-id":L,class:"status-followed-tags",onMouseEnter:Be,children:[e("div",{class:"status-pre-meta",children:[e(y,{icon:"hashtag",size:"l"})," ",S.statusFollowedTags[L].slice(0,3).map(a=>e(Ne,{to:m?`/${m}/t/${a}`:`/t/${a}`,class:"status-followed-tag-item",children:a},a))]}),e(Re,{status:t?null:n,statusID:t?n.id:null,instance:m,size:r,contentTextWeight:s,readOnly:i,enableCommentHint:!0})]});const Y=r==="l",[Rt,ao]=X(p),cn=Zn(!0),ro=S.settings.contentTranslationHideLanguages||[],{contentTranslation:Dt,contentTranslationAutoInline:ln}=S.settings;Dt||(f=!1);const dn=re(()=>{if(!Dt||!ln||i||l&&!Y||d||ae||ce||oe||z||F!=null&&F.length)return!1;const a=Ft(ue);return a>0&&a<=Za},[Dt,ln,i,l,Y,d,ae,ce,oe,z,F,ue]),[Ct,mt]=X(!1),[io,xt]=X(!1),so=wt(),co=wt(),lo=wt(),un="Read more →",Me=ne(null),Ke="Sorry, your current logged-in instance can't interact with this post from another instance.",mn=Jt(()=>Math.max(Math.round((ae.length+Ft(ue))/140)||1,1),[ae,ue]),hn=st(Ie),pn=V&&st(on);let We=D&&N!=="direct"&&N!=="private";N==="private"&&$e&&(We=!0);const ht=a=>{var T;if(!A||!D)return alert(Ke);(a!=null&&a.shiftKey||(T=a==null?void 0:a.syntheticEvent)!=null&&T.shiftKey)&&ra({replyToStatus:n})||(P.showCompose={replyToStatus:n})},Mt=re(()=>F.some(a=>{var T,x;return!((x=(T=a.description)==null?void 0:T.trim)!=null&&x.call(T))}),[F]),fn=re(()=>Math.floor((new Date-Ie)/(1e3*60*60*24*30)),[Ie]),pr=async()=>{if(!A||!D)return alert(Ke),!1;try{if(!W){let a="Boost this post?";if(Mt&&(a+=`

⚠️ Some media have no descriptions.`),!confirm(a))return!1}if(P.statuses[L]={...n,reblogged:!W,reblogsCount:fe+(W?-1:1)},W){const a=await v.v1.statuses.$select(I).unreblog();return ke(a,m),!0}else{const a=await v.v1.statuses.$select(I).reblog();return ke(a,m),!0}}catch{return P.statuses[L]=n,!1}},Ot=async()=>{if(!A||!D)return alert(Ke),!1;try{if(P.statuses[L]={...n,reblogged:!W,reblogsCount:fe+(W?-1:1)},W){const a=await v.v1.statuses.$select(I).unreblog();ke(a,m)}else{const a=await v.v1.statuses.$select(I).reblog();ke(a,m)}return!0}catch{return P.statuses[L]=n,!1}},gn=async()=>{if(!A||!D)return alert(Ke),!1;try{if(P.statuses[L]={...n,favourited:!J,favouritesCount:ge+(J?-1:1)},J){const a=await v.v1.statuses.$select(I).unfavourite();ke(a,m)}else{const a=await v.v1.statuses.$select(I).favourite();ke(a,m)}return!0}catch{return P.statuses[L]=n,!1}},Vt=async()=>{try{const a=await gn();!Y&&a&&se(J?`Unliked @${Z||C}'s post`:`Liked @${Z||C}'s post`)}catch{}},_n=async()=>{if(!A||!D)return alert(Ke),!1;try{if(P.statuses[L]={...n,bookmarked:!_e},_e){const a=await v.v1.statuses.$select(I).unbookmark();ke(a,m)}else{const a=await v.v1.statuses.$select(I).bookmark();ke(a,m)}return!0}catch{return P.statuses[L]=n,!1}},vn=async()=>{try{const a=await _n();!Y&&a&&se(_e?`Unbookmarked @${Z||C}'s post`:`Bookmarked @${Z||C}'s post`)}catch{}},pt=!!G&&G!==cn&&!Zt([G],[cn])&&!ro.find(a=>G===a||Zt([G],[a])),bn=ne(),yn=ne();async function uo(a){var j,ye,we,Tt;a&&(bn.current=v.v1.statuses.$select(t).rebloggedBy.list({limit:Mn}),yn.current=v.v1.statuses.$select(t).favouritedBy.list({limit:Mn}));const[{value:T},{value:x}]=await Promise.allSettled([bn.current.next(),yn.current.next()]);if((j=T.value)!=null&&j.length||(ye=x.value)!=null&&ye.length){const Ut=[];return(we=T.value)!=null&&we.length&&Ut.push(...T.value.map(Xe=>(Xe._types=["reblog"],Xe))),(Tt=x.value)!=null&&Tt.length&&Ut.push(...x.value.map(Xe=>(Xe._types=["favourite"],Xe))),{value:Ut,done:T.done&&x.done}}return{value:[],done:!0}}const mo=ne(),En=["public","unlisted"].includes(N),ho=["public","unlisted","private"].includes(N),Tn=e($,{children:[!Y&&A&&e($,{children:e("div",{class:"menu-control-group-horizontal status-menu",children:[e(Q,{onClick:ht,children:[e(y,{icon:"comment"}),e("span",{children:H>0?Se(H):"Reply"})]}),e(Nt,{subMenu:!0,confirmLabel:e($,{children:[e(y,{icon:"rocket"}),e("span",{children:W?"Unboost":"Boost"})]}),className:`menu-reblog ${W?"checked":""}`,menuExtras:e(Q,{onClick:()=>{P.showCompose={draftStatus:{status:`
${be}`}}},children:[e(y,{icon:"quote"}),e("span",{children:"Quote"})]}),menuFooter:Mt&&!W?e("div",{class:"footer",children:[e(y,{icon:"alert"}),"Some media have no descriptions."]}):fn>=3&&e("div",{class:"footer",children:[e(y,{icon:"info"}),e("span",{children:["Old post (",e("strong",{children:tr.format(-fn,"month")}),")"]})]}),disabled:!We,onClick:async()=>{try{const a=await Ot();!Y&&a&&se(W?`Unboosted @${Z||C}'s post`:`Boosted @${Z||C}'s post`)}catch{}},children:[e(y,{icon:"rocket"}),e("span",{children:fe>0?Se(fe):W?"Unboost":"Boost…"})]}),e(Q,{onClick:Vt,className:`menu-favourite ${J?"checked":""}`,children:[e(y,{icon:"heart"}),e("span",{children:ge>0?Se(ge):J?"Unlike":"Like"})]}),e(Q,{onClick:vn,className:`menu-bookmark ${_e?"checked":""}`,children:[e(y,{icon:"bookmark"}),e("span",{children:_e?"Unbookmark":"Bookmark"})]})]})}),!Y&&A&&(Y||R)&&e(Ze,{}),(Y||R)&&e($,{children:e(Q,{onClick:()=>{P.showGenericAccounts={heading:"Boosted/Liked by…",fetchAccounts:uo,instance:m,showReactions:!0,postID:L}},children:[e(y,{icon:"react"}),e("span",{children:["Boosted/Liked by",e("span",{class:"more-insignificant",children:"…"})]})]})}),(f||!G||pt)&&e(Ze,{}),f?e("div",{class:nt?"menu-horizontal":"",children:[e(Q,{disabled:Rt,onClick:()=>{ao(!0)},children:[e(y,{icon:"translate"}),e("span",{children:"Translate"})]}),nt&&e(Q,{onClick:()=>{const a=Wt(n);a&&Dn(a,G)},children:[e(y,{icon:"speak"}),e("span",{children:"Speak"})]})]}):(!G||pt)&&e("div",{class:nt?"menu-horizontal":"",children:[e(Cn,{to:`${m?`/${m}`:""}/s/${I}?translate=1`,children:[e(y,{icon:"translate"}),e("span",{children:"Translate"})]}),nt&&e(Q,{onClick:()=>{const a=Wt(n);a&&Dn(a,G)},children:[e(y,{icon:"speak"}),e("span",{children:"Speak"})]})]}),(!Y&&A||f||!G||pt)&&e(Ze,{}),!Y&&e($,{children:e(Cn,{to:m?`/${m}/s/${I}`:`/s/${I}`,onClick:a=>{b(a,n)},children:[e(y,{icon:"arrows-right"}),e("small",{children:["View post by @",Z||C,e("br",{}),e("span",{class:"more-insignificant",children:[ot[N]," • ",hn]})]})]})}),!!V&&e($,{children:e(Q,{onClick:()=>{mt(I)},children:[e(y,{icon:"history"}),e("small",{children:["Show Edit History",e("br",{}),e("span",{class:"more-insignificant",children:["Edited: ",pn]})]})]})}),e(Q,{href:be,target:"_blank",children:[e(y,{icon:"external"}),e("small",{class:"menu-double-lines",children:cr(be)})]}),e("div",{class:"menu-horizontal",children:[e(Q,{onClick:()=>{try{navigator.clipboard.writeText(be),se("Link copied")}catch{se("Unable to copy link")}},children:[e(y,{icon:"link"}),e("span",{children:"Copy"})]}),En&&(navigator==null?void 0:navigator.share)&&((An=navigator==null?void 0:navigator.canShare)==null?void 0:An.call(navigator,{url:be}))&&e(Q,{onClick:()=>{try{navigator.share({url:be})}catch{alert("Sharing doesn't seem to work.")}},children:[e(y,{icon:"share"}),e("span",{children:"Share…"})]})]}),En&&Y&&e(Q,{onClick:()=>{xt(!0)},children:[e(y,{icon:"code"}),e("span",{children:"Embed post"})]}),($e||rn)&&e(Ze,{}),($e||rn)&&e(Q,{onClick:async()=>{try{const a=await v.v1.statuses.$select(I)[ve?"unmute":"mute"]();ke(a,m),se(ve?"Conversation unmuted":"Conversation muted")}catch{se(ve?"Unable to unmute conversation":"Unable to mute conversation")}},children:ve?e($,{children:[e(y,{icon:"unmute"}),e("span",{children:"Unmute conversation"})]}):e($,{children:[e(y,{icon:"mute"}),e("span",{children:"Mute conversation"})]})}),$e&&ho&&e(Q,{onClick:async()=>{try{const a=await v.v1.statuses.$select(I)[xe?"unpin":"pin"]();se(xe?"Post unpinned from profile":"Post pinned to profile")}catch{se(xe?"Unable to unpin post":"Unable to pin post")}},children:xe?e($,{children:[e(y,{icon:"unpin"}),e("span",{children:"Unpin from profile"})]}):e($,{children:[e(y,{icon:"pin"}),e("span",{children:"Pin to profile"})]})}),$e&&e("div",{class:"menu-horizontal",children:[e(Q,{onClick:()=>{P.showCompose={editStatus:n}},children:[e(y,{icon:"pencil"}),e("span",{children:"Edit"})]}),Y&&e(Nt,{subMenu:!0,confirmLabel:e($,{children:[e(y,{icon:"trash"}),e("span",{children:"Delete this post?"})]}),menuItemClassName:"danger",onClick:()=>{(async()=>{try{await v.v1.statuses.$select(I).remove();const a=Bn(I,m);a._deleted=!0,se("Deleted")}catch{se("Unable to delete")}})()},children:[e(y,{icon:"trash"}),e("span",{children:"Delete…"})]})]}),!$e&&Y&&e($,{children:[e(Ze,{}),e(Q,{className:"danger",onClick:()=>{P.showReportModal={account:n.account,post:n}},children:[e(y,{icon:"flag"}),e("span",{children:"Report post…"})]})]})]}),kn=ne(),[ft,Ge]=X(!1),[gt,_t]=X({}),vt=w||!Y&&!d&&!Ce&&!g,po=Hn(er&&vt?a=>{var ye;if(a.pointerType==="mouse")return;const{clientX:T,clientY:x}=((ye=a.touches)==null?void 0:ye[0])||a,j=a.target.closest("a");j&&Me.current.contains(j)&&!j.getAttribute("href").startsWith("#")||(a.preventDefault(),_t({anchorPoint:{x:T,y:x},direction:"right"}),Ge(!0))}:null,{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),bt=!i&&!d&&!g,fo=Ue("r, shift+r",ht,{enabled:bt}),go=Ue("f, l",Vt,{enabled:bt}),_o=Ue("d",vn,{enabled:bt}),vo=Ue("shift+b",()=>{(async()=>{try{const a=await Ot();!Y&&a&&se(W?`Unboosted @${Z||C}'s post`:`Boosted @${Z||C}'s post`)}catch{}})()},{enabled:bt&&We}),bo=Ue("x",a=>{const T=document.activeElement.closest(".status-link, .status-focus");if(T){const x=T.querySelector(".spoiler-button:not(.spoiling)");if(x)a.stopPropagation(),x.click();else{const j=T.querySelector(".spoiler-media-button:not(.spoiling)");j&&(a.stopPropagation(),j.click())}}}),yt=F.slice(0,Y?void 0:4),Et=F.length>1&&yt.some(a=>!!a.description&&!Jn(a.description)),yo=re(()=>{if(!Et)return null;const a=[];return yt.forEach((T,x)=>{if(!T.description)return;const j=a.findIndex(ye=>ye.media.description===T.description);j===-1?a.push({media:T,indices:[x]}):a[j].indices.push(x)}),a.map(({media:T,indices:x})=>e("div",{"data-caption-index":x.map(j=>j+1).join(" "),onClick:j=>{j.preventDefault(),j.stopPropagation(),P.showMediaAlt={alt:T.description,lang:G}},title:T.description,children:[e("sup",{children:x.map(j=>j+1).join(" ")})," ",T.description]},T.id))},[Et,yt,G]),Ye=re(()=>{var a;return!!ee&&de===((a=n.account)==null?void 0:a.id)||!!S.statusThreadNumber[L]},[ee,de,($n=n.account)==null?void 0:$n.id,S.statusThreadNumber[L]]),Eo=re(()=>c&&!Ye&&!l&&!ee&&N==="public"&&H>0,[c,Ye,l,ee,H,N]),Ln=re(()=>{if(z||oe||ce||ae||F!=null&&F.length||Ye||l||ee||H<=0||!/[??？︖❓❔⁇⁈⁉¿‽؟]/.test(ue))return!1;const x=Ft(ue);if(x>0&&x<=Xa)return!0},[z,oe,ce,ae,F,pe,Ye,l,ee,H,ue]);return e($,{children:[k&&!!(ee&&de)&&e(lr,{sKey:L}),e("article",{"data-state-post-id":L,ref:a=>{var x;Me.current=a;const T=((x=a==null?void 0:a.closest)==null?void 0:x.call(a,".timeline-item, .timeline-item-alt, .status-link, .status-focus"))||a;fo.current=T,go.current=T,_o.current=T,vo.current=T,bo.current=T},tabindex:"-1",class:`status ${!l&&ee&&ut?"status-reply-to":""} visibility-${N} ${xe?"status-pinned":""} ${{s:"small",m:"medium",l:"large"}[r]} ${Ce?"status-deleted":""} ${g?"status-card":""} ${ft?"status-menu-open":""}`,onMouseEnter:Be,onContextMenu:a=>{var j,ye;if(!vt||a.metaKey)return;const T=a.target.closest("a");if(T&&Me.current.contains(T)&&!T.getAttribute("href").startsWith("#"))return;const x=(j=window.getSelection)==null?void 0:j.call(window);if(x.toString().length>0){const{anchorNode:we}=x;if((ye=Me.current)!=null&&ye.contains(we))return}a.preventDefault(),_t({anchorPoint:{x:a.clientX,y:a.clientY},direction:"right"}),Ge(!0)},...vt?po():{},children:[vt&&e(Fo,{ref:kn,state:ft?"open":void 0,...gt,onClose:a=>{var T,x,j;Ge(!1),(a==null?void 0:a.reason)==="click"&&((j=(x=(T=Me.current)==null?void 0:T.closest("[tabindex]"))==null?void 0:x.focus)==null||j.call(x))},portal:{target:document.body},containerProps:{style:{zIndex:1001},onClick:()=>{var a,T;(T=(a=kn.current)==null?void 0:a.closeMenu)==null||T.call(a)}},overflow:"auto",boundingBoxPadding:Wn(),unmountOnClose:!0,children:Tn}),R&&r!=="l"&&!d&&!i&&!Ce&&!g&&e("div",{class:`status-actions ${ft==="actions-bar"?"open":""}`,ref:mo,children:[e(Ve,{size:"s",title:"Reply",alt:"Reply",class:"reply-button",icon:"comment",iconSize:"m",onClick:ht}),e(Ve,{size:"s",checked:J,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",iconSize:"m",count:ge,onClick:Vt}),e("button",{type:"button",title:"More",class:"plain more-button",onClick:a=>{a.preventDefault(),a.stopPropagation(),_t({anchorRef:{current:a.currentTarget},align:"start",direction:"left",gap:0,shift:-8}),Ge("actions-bar")},children:e(y,{icon:"more2",size:"m",alt:"More"})})]}),r!=="l"&&e("div",{class:"status-badge",children:[W&&e(y,{class:"reblog",icon:"rocket",size:"s"}),J&&e(y,{class:"favourite",icon:"heart",size:"s"}),_e&&e(y,{class:"bookmark",icon:"bookmark",size:"s"}),xe&&e(y,{class:"pin",icon:"pin",size:"s"})]}),r!=="s"&&e("a",{href:te,tabindex:"-1",title:`@${C}`,onClick:a=>{a.preventDefault(),a.stopPropagation(),P.showAccount={account:n.account,instance:m}},children:e(Ae,{url:M||q,size:"xxl",squircle:he})}),e("div",{class:"container",children:[e("div",{class:"meta",children:[e("span",{class:"meta-name",children:e(tt,{account:n.account,instance:m,showAvatar:r==="s",showAcct:Y})})," ",r!=="l"&&(Ce?e("span",{class:"status-deleted-tag",children:"Deleted"}):be&&!d&&!i&&!g?e(Ne,{to:m?`/${m}/s/${I}`:`/s/${I}`,onClick:a=>{a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||a.which===2||(a.preventDefault(),a.stopPropagation(),b==null||b(a,n),_t({anchorRef:{current:a.currentTarget},align:"end",direction:"bottom",gap:4}),Ge(!0))},class:`time ${ft&&(gt!=null&&gt.anchorRef)?"is-open":""}`,children:[Eo&&!Ln?e(y,{icon:"comment2",size:"s",alt:`${H} ${H===1?"reply":"replies"}`}):N!=="public"&&N!=="direct"&&e(y,{icon:Qt[N],alt:ot[N],size:"s"})," ",e(Pe,{datetime:Ie,format:"micro"}),!d&&!i&&e(y,{icon:"more2",class:"more"})]}):e("span",{class:"time",children:[N!=="public"&&N!=="direct"&&e($,{children:[e(y,{icon:Qt[N],alt:ot[N],size:"s"})," "]}),e(Pe,{datetime:Ie,format:"micro"})]}))]}),N==="direct"&&e($,{children:[e("div",{class:"status-direct-badge",children:"Private mention"})," "]}),!l&&e($,{children:Ye?e("div",{class:"status-thread-badge",children:[e(y,{icon:"thread",size:"s"}),"Thread",S.statusThreadNumber[L]?` ${S.statusThreadNumber[L]}/X`:""]}):!!ee&&!!ut&&(!!ae||!Ee.find(a=>a.id===de))&&e("div",{class:"status-reply-badge",children:[e(y,{icon:"reply"})," ",e(tt,{account:ut,instance:m,short:!0})]})}),e("div",{class:`content-container ${ae||ce?"has-spoiler":""} ${je?"show-spoiler":""} ${qe?"show-media":""}`,"data-content-text-weight":s?mn():null,style:(Y||s)&&{"--content-text-weight":mn()},children:[!!ae&&e($,{children:[e("div",{class:"content spoiler-content",lang:G,dir:"auto",ref:so,"data-read-more":un,children:e("p",{children:e(it,{text:ae,emojis:St})})}),Fe||d?e("div",{class:"spoiler-divider",children:[e(y,{icon:"eye-open"})," Content warning"]}):e("button",{class:`light spoiler-button ${je?"spoiling":""}`,type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),je?(delete P.spoilers[I],Fe||delete P.spoilersMedia[I]):(P.spoilers[I]=!0,Fe||(P.spoilersMedia[I]=!0))},children:[e(y,{icon:je?"eye-open":"eye-close"})," ",je?"Show less":"Show content"]})]}),!!ue&&e("div",{class:"content",ref:co,"data-read-more":un,children:[e(or,{post:n,instance:m,previewMode:d}),e(ur,{id:I,instance:m,level:g})]}),!!oe&&e(ya,{lang:G,poll:oe,readOnly:i||!A||!D,onUpdate:a=>{P.statuses[L].poll=a},refresh:()=>v.v1.polls.$select(oe.id).fetch().then(a=>{P.statuses[L].poll=a}).catch(a=>{}),votePoll:a=>v.v1.polls.$select(oe.id).votes.create({choices:a}).then(T=>{P.statuses[L].poll=T}).catch(T=>{})}),((f||dn)&&!!ue.trim()&&!!nn($t(ue,St))&&pt||Rt)&&e(Ya,{forceTranslate:Rt||dn,mini:!Y&&!l,sourceLanguage:G,text:Wt(n)}),!d&&ce&&!!F.length&&sn!=="show_all"&&e("button",{class:`plain spoiler-media-button ${qe?"spoiling":""}`,type:"button",hidden:!Fe&&!!ae,onClick:a=>{a.preventDefault(),a.stopPropagation(),qe?delete P.spoilersMedia[I]:P.spoilersMedia[I]=!0},children:[e(y,{icon:qe?"eye-open":"eye-close"})," ",qe?"Show less":"Show media"]}),!!F.length&&e(ar,{lang:G,enabled:Et,captionChildren:yo,children:e("div",{ref:lo,class:`media-container media-eq${F.length} ${F.length>2?"media-gt2":""} ${F.length>4?"media-gt4":""}`,children:yt.map((a,T)=>e(Ba,{media:a,autoAnimate:Y,showCaption:F.length===1,allowLongerCaption:!ue&&F.length===1,lang:G,altIndex:Et&&!!a.description&&T+1,to:`/${m}/s/${I}?${l?"media":"media-only"}=${T+1}`,onClick:_?x=>{_(x,T,a,n)}:void 0},a.id))})}),!!z&&/^https/i.test(z==null?void 0:z.url)&&!ce&&!ae&&!oe&&!F.length&&!S.statusQuotes[L]&&e(rr,{card:z,selfReferential:(z==null?void 0:z.url)===n.url||(z==null?void 0:z.url)===n.uri,instance:U})]}),!Y&&Ln&&e("div",{class:"content-comment-hint insignificant",children:[e(y,{icon:"comment2",alt:"Replies"})," ",H]}),Y&&e($,{children:[e("div",{class:"extra-meta",children:Ce?e("span",{class:"status-deleted-tag",children:"Deleted"}):e($,{children:[e("span",{children:ot[N]})," •"," ",e("a",{href:be,target:"_blank",rel:"noopener noreferrer",children:e("time",{class:"created",datetime:Ie.toISOString(),title:Ie.toLocaleString(),children:hn})}),V&&e($,{children:[" ","• ",e(y,{icon:"pencil",alt:"Edited"})," ",e("time",{tabIndex:"0",class:"edited",datetime:on.toISOString(),onClick:()=>{mt(I)},children:pn})]})]})}),!!(dt!=null&&dt.length)&&e("div",{class:"emoji-reactions",children:dt.map(a=>{const{name:T,count:x,me:j}=a;if(/^:.+?:$/.test(T)){const we=St.find(Tt=>Tt.shortcode===T.replace(/^:/,"").replace(/:$/,""));if(we)return e("span",{class:`emoji-reaction tag ${j?"":"insignificant"}`,children:[e(jn,{alt:T,url:we.url,staticUrl:we.staticUrl}),x]})}return e("span",{class:`emoji-reaction tag ${j?"":"insignificant"}`,children:[T," ",x]})})}),e("div",{class:`actions ${Ce?"disabled":""}`,children:[e("div",{class:"action has-count",children:e(Ve,{title:"Reply",alt:"Comments",class:"reply-button",icon:"comment",count:H,onClick:ht})}),e(Nt,{disabled:!We,onClick:Ot,confirmLabel:e($,{children:[e(y,{icon:"rocket"}),e("span",{children:W?"Unboost":"Boost"})]}),menuExtras:e(Q,{onClick:()=>{P.showCompose={draftStatus:{status:`
${be}`}}},children:[e(y,{icon:"quote"}),e("span",{children:"Quote"})]}),menuFooter:Mt&&!W&&e("div",{class:"footer",children:[e(y,{icon:"alert"}),"Some media have no descriptions."]}),children:e("div",{class:"action has-count",children:e(Ve,{checked:W,title:["Boost","Unboost"],alt:["Boost","Boosted"],class:"reblog-button",icon:"rocket",count:fe,disabled:!We})})}),e("div",{class:"action has-count",children:e(Ve,{checked:J,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",count:ge,onClick:gn})}),e("div",{class:"action",children:e(Ve,{checked:_e,title:["Bookmark","Unbookmark"],alt:["Bookmark","Bookmarked"],class:"bookmark-button",icon:"bookmark",onClick:_n})}),e(Gn,{portal:{target:document.querySelector(".status-deck")||document.body},align:"end",gap:4,overflow:"auto",viewScroll:"close",menuButton:e("div",{class:"action",children:e("button",{type:"button",title:"More",class:"plain more-button",children:e(y,{icon:"more",size:"l",alt:"More"})})}),children:Tn})]})]})]}),!!Ct&&e(Xt,{onClick:a=>{a.target===a.currentTarget&&mt(!1)},children:e(ir,{statusID:Ct,instance:m,fetchStatusHistory:()=>v.v1.statuses.$select(Ct).history.list(),onClose:()=>{var a;mt(!1),(a=Me.current)==null||a.focus()}})}),!!io&&e(Xt,{onClick:a=>{a.target===a.currentTarget&&xt(!1)},children:e(sr,{post:n,instance:m,onClose:()=>{xt(!1)}})})]})]})}function ar(t){const{enabled:n,children:o,lang:r,captionChildren:s}=t;return!n||!s?o:e("figure",{class:"media-figure-multiple",children:[o,e("figcaption",{lang:r,dir:"auto",children:s})]})}function rr({card:t,selfReferential:n,instance:o}){var M;const r=lt(P),{blurhash:s,title:i,description:c,html:l,providerName:h,providerUrl:f,authorName:p,authorUrl:d,width:_,height:g,image:b,imageDescription:E,url:w,type:R,embedUrl:k,language:v,publishedAt:m}=t,D=i||h||p,A=_/g>=1.2?"large":"",[L,S]=X(null);if(Te(()=>{D&&b&&!n&&na(w)&&oa(o,w).then(O=>{if(!O)return;const{id:te,url:ie}=O;S("#"+ie)})},[D,b,n]),r.unfurledLinks[w])return null;const C=/<iframe/i.test(l),q=Jt(O=>{C&&(O.preventDefault(),P.showEmbedModal={html:l,url:w||k,width:_,height:g})},[C]);if(D&&(b||R==="photo"&&s)){const O=new URL(w).hostname.replace(/^www\./,"").replace(/\/$/,"");let te;const ie=b&&s?Un(s):null;if(!b){const he=jo(s,44,44),B=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas");B.width=44,B.height=44;const I=B.getContext("2d");I.imageSmoothingEnabled=!1;const H=I.createImageData(44,44);H.data.set(he),I.putImageData(H,0,0),te=B.toDataURL()}return e("a",{href:L||w,target:L?null:"_blank",rel:"nofollow noopener noreferrer",class:`card link ${te?"":A}`,lang:v,dir:"auto",style:{"--average-color":ie&&`rgb(${ie.join(",")})`},onClick:q,children:[e("div",{class:"card-image",children:e("img",{src:b||te,width:_,height:g,loading:"lazy",alt:E||"",onError:Z=>{try{Z.target.style.display="none"}catch{}}})}),e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e("span",{class:"domain",children:O})," ",!!m&&e($,{children:"· "}),!!m&&e($,{children:e(Pe,{datetime:m,format:"micro"})})]}),e("p",{class:"title",dir:"auto",title:i,children:i}),e("p",{class:"meta",dir:"auto",title:c,children:c||!!m&&e(Pe,{datetime:m,format:"micro"})})]})]})}else{if(R==="photo")return e("a",{href:w,target:"_blank",rel:"nofollow noopener noreferrer",class:"card photo",onClick:q,children:e("img",{src:k,width:_,height:g,alt:i||c,loading:"lazy",style:{height:"auto",aspectRatio:`${_}/${g}`}})});if(R==="video"&&/youtube/i.test(h)){const O=(M=w.match(/watch\?v=([^&]+)/))==null?void 0:M[1];if(O)return e("a",{class:"card video",onClick:q,children:e("lite-youtube",{videoid:O,nocookie:!0})})}if(D&&!b){const O=new URL(w).hostname.replace(/^www\./,"");return e("a",{href:L||w,target:L?null:"_blank",rel:"nofollow noopener noreferrer",class:"card link no-image",lang:v,onClick:q,children:e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e("span",{class:"domain",children:[e(y,{icon:"link",size:"s"})," ",e("span",{children:O})]})," ",!!m&&e($,{children:"· "}),!!m&&e($,{children:e(Pe,{datetime:m,format:"micro"})})]}),e("p",{class:"title",title:i,children:i}),e("p",{class:"meta",title:c||h||p,children:c||h||p})]})})}}}function ir({statusID:t,instance:n,fetchStatusHistory:o=()=>{},onClose:r}){const[s,i]=X("default"),[c,l]=X([]);return Te(()=>{i("loading"),(async()=>{try{const h=await o();l(h),i("default")}catch{i("error")}})()},[]),e("div",{id:"edit-history",class:"sheet",children:[!!r&&e("button",{type:"button",class:"sheet-close",onClick:r,children:e(y,{icon:"x"})}),e("header",{children:[e("h2",{children:"Edit History"}),s==="error"&&e("p",{children:"Failed to load history"}),s==="loading"&&e("p",{children:[e(zn,{abrupt:!0})," Loading…"]})]}),e("main",{tabIndex:"-1",children:c.length>0&&e("ol",{children:c.map(h=>{const{createdAt:f}=h,p=new Date(f);return e("li",{class:"history-item",children:[e("h3",{children:e("time",{children:st(p,{formatOpts:{weekday:"short",second:"numeric"}})})}),e(Re,{status:h,instance:n,size:"s",withinContext:!0,readOnly:!0,previewMode:!0})]},f)})})})]})}function no(t,n,o=0){var q;const{account:{url:r,displayName:s,acct:i,username:c,emojis:l,bot:h,group:f},id:p,poll:d,spoilerText:_,language:g,editedAt:b,createdAt:E,content:w,mediaAttachments:R,url:k,emojis:v}=t,m=Le(p,n),U=(P.statusQuotes[m]||[]).filter((M,O,te)=>te.findIndex(ie=>ie.url===M.url)===O),A=U.length&&o<=2?U.map(M=>{const{id:O,instance:te}=M,ie=Le(O,te),Z=P.statuses[ie];if(Z)return no(Z,te,++o)}).join(""):"",L=new Date(E),S=$t(w,v)+`
`+A+`
`+((q=d==null?void 0:d.options)!=null&&q.length?`
        <p>📊:</p>
        <ul>
        ${d.options.map(M=>`
              <li>
                ${M.title}
                ${M.votesCount>=0?` (${M.votesCount})`:""}
              </li>
            `).join("")}
        </ul>`:"")+(R.length>0?`
`+R.map(M=>{const{description:O,meta:te,previewRemoteUrl:ie,previewUrl:Z,remoteUrl:me,url:he,type:B}=M,{original:I={},small:H}=te||{},W=(H==null?void 0:H.width)||(I==null?void 0:I.width),fe=(H==null?void 0:H.height)||(I==null?void 0:I.height),J=me||he,ge=ie||Z,_e=ge||J,oe=J?new URL(J):null,ve=B==="unknown"&&oe&&/\.(mp4|m4r|m4v|mov|webm)$/i.test(oe.pathname),ce=B==="unknown"&&oe&&/\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(oe.pathname),ae=B==="image"||B==="unknown"&&ge&&!ve&&!ce,N=B==="gifv"||B==="video"||ve,G=B==="audio"||ce;let V="";return ae?V=`<img src="${_e}" width="${W}" height="${fe}" alt="${O}" loading="lazy" />`:N?V=`
                <video src="${J}" width="${W}" height="${fe}" controls preload="auto" poster="${ge}" loading="lazy"></video>
                ${O?`<figcaption>${O}</figcaption>`:""}
              `:G?V=`
                <audio src="${J}" controls preload="auto"></audio>
                ${O?`<figcaption>${O}</figcaption>`:""}
              `:V=`
                <a href="${J}">📄 ${O||J}</a>
              `,`<figure>${V}</figure>`}).join(`
`):""),C=`
    <blockquote lang="${g}" cite="${k}">
      ${_?`
            <details>
              <summary>${_}</summary>
              ${S}
            </details>
          `:S}
      <footer>
        — ${$t(s,l)} (@${i}) <a href="${k}"><time datetime="${L.toISOString()}">${L.toLocaleString()}</time></a>
      </footer>
    </blockquote>
  `;return qo(C)}function sr({post:t,instance:n,onClose:o}){const{account:{url:r,displayName:s,username:i,emojis:c,bot:l,group:h},id:f,poll:p,spoilerText:d,language:_,editedAt:g,createdAt:b,content:E,mediaAttachments:w,url:R,emojis:k}=t,v=no(t,n);return e("div",{id:"embed-post",class:"sheet",children:[!!o&&e("button",{type:"button",class:"sheet-close",onClick:o,children:e(y,{icon:"x"})}),e("header",{children:e("h2",{children:"Embed post"})}),e("main",{tabIndex:"-1",children:[e("h3",{children:"HTML Code"}),e("textarea",{class:"embed-code",readonly:!0,onClick:m=>{m.target.select()},children:v}),e("button",{type:"button",onClick:()=>{try{navigator.clipboard.writeText(v),se("HTML code copied")}catch{se("Unable to copy HTML code")}},children:[e(y,{icon:"clipboard"})," ",e("span",{children:"Copy"})]}),!!(w!=null&&w.length)&&e("section",{children:[e("p",{children:"Media attachments:"}),e("ol",{class:"links-list",children:w.map(m=>e("li",{children:e("a",{href:m.remoteUrl||m.url,target:"_blank",download:!0,children:m.remoteUrl||m.url})},m.id))})]}),!!(c!=null&&c.length)&&e("section",{children:[e("p",{children:"Account Emojis:"}),e("ul",{children:c.map(m=>e("li",{children:[e("picture",{children:[e("source",{srcset:m.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji emoji",src:m.url,alt:`:${m.shortcode}:`,width:"16",height:"16",loading:"lazy",decoding:"async"})]})," ",e("code",{children:[":",m.shortcode,":"]})," (",e("a",{href:m.url,target:"_blank",download:!0,children:"url"}),")",m.staticUrl?e($,{children:[" ","(",e("a",{href:m.staticUrl,target:"_blank",download:!0,children:"static"}),")"]}):null]},m.shortcode))})]}),!!(k!=null&&k.length)&&e("section",{children:[e("p",{children:"Emojis:"}),e("ul",{children:k.map(m=>e("li",{children:[e("picture",{children:[e("source",{srcset:m.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji emoji",src:m.url,alt:`:${m.shortcode}:`,width:"16",height:"16",loading:"lazy",decoding:"async"})]})," ",e("code",{children:[":",m.shortcode,":"]})," (",e("a",{href:m.url,target:"_blank",download:!0,children:"url"}),")",m.staticUrl?e($,{children:[" ","(",e("a",{href:m.staticUrl,target:"_blank",download:!0,children:"static"}),")"]}):null]},m.shortcode))})]}),e("section",{children:e("small",{children:[e("p",{children:"Notes:"}),e("ul",{children:[e("li",{children:"This is static, unstyled and scriptless. You may need to apply your own styles and edit as needed."}),e("li",{children:"Polls are not interactive, becomes a list with vote counts."}),e("li",{children:"Media attachments can be images, videos, audios or any file types."}),e("li",{children:"Post could be edited or deleted later."})]})]})}),e("h3",{children:"Preview"}),e("output",{class:"embed-preview",dangerouslySetInnerHTML:{__html:v}}),e("p",{children:e("small",{children:"Note: This preview is lightly styled."})})]})]})}function Ve({checked:t,count:n,class:o,title:r,alt:s,size:i,icon:c,iconSize:l="l",onClick:h,...f}){typeof r=="string"&&(r=[r,r]),typeof s=="string"&&(s=[s,s]);const[p,d]=X(r[0]||""),[_,g]=X(s[0]||"");return Te(()=>{t?(d(r[1]||""),g(s[1]||"")):(d(r[0]||""),g(s[0]||""))},[t,r,s]),e("button",{type:"button",title:p,class:`plain ${i?"small":""} ${o} ${t?"checked":""}`,onClick:b=>{h&&(b.preventDefault(),b.stopPropagation(),h(b))},...f,children:[e(y,{icon:c,size:l,alt:_}),!!n&&e($,{children:[" ",e("small",{title:n,children:Se(n)})]})]})}function On(t){if(!t)return;let n=Math.floor(t/3600),o=Math.floor(t%3600/60),r=Math.round(t%60);return n===0?`${o}:${r.toString().padStart(2,"0")}`:`${n}:${o.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}function cr(t){if(!t)return;const n=new URL(t),{host:o,pathname:r}=n,s=r.replace(/\/$/,""),[i,c,l]=s.match(/\/(@[^\/]+)\/(.*)/)||[];return e($,{children:[o,c?e($,{children:["/",c,e("wbr",{}),e("span",{class:"more-insignificant",children:["/",l]})]}):e("span",{class:"more-insignificant",children:s})]})}function lr({sKey:t}){const o=lt(P).statusReply[t];if(!o)return null;const{id:r,instance:s}=o,i=Bn(r,s);if(!i)return null;const{sensitive:c,spoilerText:l,account:{avatar:h,avatarStatic:f,bot:p},visibility:d,content:_,language:g,filtered:b}=i;if(c||l||!_)return null;const E=Le(r,s),w=Qn(i),R=Nn(Xn),k=tn(b,R);if((k==null?void 0:k.action)==="hide")return null;const v=(k==null?void 0:k.titlesStr)||"";return e("article",{class:`status compact-reply ${d==="direct"?"visibility-direct":""}`,tabindex:"-1","data-state-post-id":E,children:[e(Ae,{url:f||h,squircle:p}),e("div",{class:"content-compact",title:w,lang:g,dir:"auto",children:k?e("b",{class:"status-filtered-badge badge-meta",title:v,children:[e("span",{children:"Filtered"}),e("span",{children:v})]}):e("span",{children:w})})]})}function dr({status:t,filterInfo:n,instance:o,containerProps:r={},showFollowedTags:s}){var q;const i=lt(P),{id:c,account:{avatar:l,avatarStatic:h,bot:f,group:p},createdAt:d,visibility:_,reblog:g}=t,b=!!g,E=(n==null?void 0:n.titlesStr)||"",w=new Date(d),R=Qn(t.reblog||t),[k,v]=X(!1),m=Hn(()=>{v(!0)},{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),D=wt(),U=Le(t.id,o),A=Le(t.id,o)+" "+(Le(g==null?void 0:g.id,o)||""),L=(g==null?void 0:g.id)||c,S=o?`/${o}/s/${L}`:`/s/${L}`,C=s&&!!((q=i.statusFollowedTags[U])!=null&&q.length);return e("div",{class:b?p?"status-group":"status-reblog":C?"status-followed-tags":"",...r,onContextMenu:M=>{M.preventDefault(),v(!0)},...m(),children:[e("article",{"data-state-post-id":A,class:"status filtered",tabindex:"-1",children:[e("b",{class:"status-filtered-badge clickable badge-meta",title:E,onClick:M=>{M.preventDefault(),v(!0)},children:[e("span",{children:"Filtered"}),e("span",{children:E})]})," ",e(Ae,{url:h||l,squircle:f}),e("span",{class:"status-filtered-info",children:[e("span",{class:"status-filtered-info-1",children:[e(tt,{account:t.account,instance:o})," ",e(y,{icon:Qt[_],alt:ot[_],size:"s"})," ",b?"boosted":C?e("span",{children:i.statusFollowedTags[U].slice(0,3).map(M=>e("span",{class:"status-followed-tag-item",children:["#",M]},M))}):e(Pe,{datetime:w,format:"micro"})]}),e("span",{class:"status-filtered-info-2",children:[b&&e($,{children:[e(Ae,{url:g.account.avatarStatic||g.account.avatar,squircle:f})," "]}),R]})]})]}),!!k&&e(Xt,{onClick:M=>{M.target===M.currentTarget&&v(!1)},children:e("div",{id:"filtered-status-peek",class:"sheet",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>v(!1),children:e(y,{icon:"x"})}),e("header",{children:[e("b",{class:"status-filtered-badge",children:"Filtered"})," ",E]}),e("main",{tabIndex:"-1",children:e(Ne,{ref:D,class:"status-link",to:S,onClick:()=>{v(!1)},"data-read-more":"Read more →",children:e(Re,{status:t,instance:o,size:"s",readOnly:!0})})})]})})]})}const ur=ct(({id:t,instance:n,level:o=0})=>{if(!t||!n)return;const r=lt(P),s=Le(t,n),i=r.statusQuotes[s],c=i==null?void 0:i.filter((l,h,f)=>f.findIndex(p=>p.url===l.url)===h);if(c!=null&&c.length&&!(o>2))return c.map(l=>e(_a,{children:e(Ne,{to:`${l.instance?`/${l.instance}`:""}/s/${l.id}`,class:"status-card-link","data-read-more":"Read more →",children:e(Re,{statusID:l.id,instance:l.instance,size:"s",quoted:o+1,enableCommentHint:!0})},l.instance+l.id)}))}),br=ct(Re,(t,n)=>{const{status:o,...r}=t,{status:s,...i}=n;return(o==null?void 0:o.id)===(s==null?void 0:s.id)&&Ko(r,i)});function yr({skeleton:t,account:n,avatarSize:o="xl",useAvatarStatic:r=!1,instance:s,external:i,internal:c,onClick:l,showActivity:h=!1,showStats:f=!1,accountInstance:p,hideDisplayName:d=!1,relationship:_={},excludeRelationshipAttrs:g=[]}){if(t)return e("div",{class:"account-block skeleton",children:[e(Ae,{size:o}),e("span",{children:[e("b",{children:"████████"}),e("br",{}),e("span",{class:"account-block-acct",children:"██████"})]})]});if(!n)return null;const{id:b,acct:E,avatar:w,avatarStatic:R,displayName:k,username:v,emojis:m,url:D,statusesCount:U,lastStatusAt:A,bot:L,fields:S,note:C,group:q,followersCount:M,createdAt:O,locked:te}=n;let[ie,Z,me]=E.match(/([^@]+)(@.+)/i)||[,E];p&&(me=`@${p}`);const he=S==null?void 0:S.find(H=>!!H.verifiedAt&&!!H.value),B={};for(const H in _)g.includes(H)||(B[H]=_[H]);const I=B.following||B.followedBy||B.requested;return e("a",{class:"account-block",href:D,target:i?"_blank":null,title:me?E:`@${E}`,onClick:H=>{if(!i){if(H.preventDefault(),l)return l(H);c?location.hash=`/${s}/a/${b}`:P.showAccount={account:n,instance:s}}},children:[e(Ae,{url:r?R:w||R,size:o,squircle:L}),e("span",{class:"account-block-content",children:[!d&&e($,{children:k?e("b",{children:e(it,{text:k,emojis:m})}):e("b",{children:v})})," ",e("span",{class:"account-block-acct",children:[me?"":"@",Z,e("wbr",{}),me,te&&e($,{children:[" ",e(y,{icon:"lock",size:"s",alt:"Locked"})]})]}),h&&e($,{children:[e("br",{}),e("small",{class:"last-status-at insignificant",children:["Posts: ",U,!!A&&e($,{children:[" ","· Last posted:"," ",st(A,{hideTime:!0})]})]})]}),f&&e("div",{class:"account-block-stats",children:[L&&e($,{children:e("span",{class:"tag collapsed",children:[e(y,{icon:"bot"})," Automated"]})}),!!q&&e($,{children:e("span",{class:"tag collapsed",children:[e(y,{icon:"group"})," Group"]})}),I&&e("div",{class:"shazam-container-horizontal",children:e("div",{class:"shazam-container-inner",children:B.following&&B.followedBy?e("span",{class:"tag minimal",children:"Mutual"}):B.requested?e("span",{class:"tag minimal",children:"Requested"}):B.following?e("span",{class:"tag minimal",children:"Following"}):B.followedBy?e("span",{class:"tag minimal",children:"Follows you"}):null})},_.id),!!M&&e("span",{class:"ib",children:[Se(M)," ",M===1?"follower":"followers"]}),!!he&&e("span",{class:"verified-field",children:[e(y,{icon:"check-circle",size:"s"})," ",e("span",{dangerouslySetInnerHTML:{__html:Yn(he.value,{emojis:m})}})]}),!L&&!q&&!I&&!M&&!he&&!!O&&e("span",{class:"created-at",children:["Joined"," ",e("time",{datetime:O,children:st(O,{hideTime:!0})})]})]})]})]})}const mr={"@mastodon/edit-media-attributes":">=4.1","@mastodon/list-exclusive":">=4.2","@mastodon/filtered-notifications":"~4.3 || >=4.3"},Gt={};function Er(t){try{const{version:n,domain:o}=aa(),r=`${o}-${t}`;if(Gt[r])return Gt[r];const s=mr[t];return s?Gt[r]=Wo(n,s,{includePrerelease:!0,loose:!0}):!1}catch{return!1}}function Vn(t,n){const o=Go(t,n);return{set:(r,s)=>Yo(r,s,o),get:r=>Xo(r,o),getMany:r=>Zo(r,o),del:r=>Qo(r,o),delMany:r=>Jo(r,o),clear:()=>ea(o),keys:()=>ta(o)}}const Tr={drafts:Vn("drafts-db","drafts-store"),catchup:Vn("catchup-db","catchup-store")};export{Ae as A,Zt as B,jn as C,nt as D,it as E,Xn as F,Dn as G,la as H,y as I,Qt as J,Ne as L,Xt as M,tt as N,Pe as R,br as S,Ya as T,Se as a,wt as b,Nt as c,Gn as d,Cn as e,Er as f,yr as g,xa as h,Yn as i,nn as j,tn as k,Ba as l,Wn as m,st as n,ra as o,vr as p,Qn as q,Tr as r,se as s,Ft as t,_r as u,Fn as v,$t as w,Zn as x,qt as y,Sa as z};
//# sourceMappingURL=db-Nrs-L85u.js.map
