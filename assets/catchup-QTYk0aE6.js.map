{"version":3,"file":"catchup-QTYk0aE6.js","sources":["../../src/assets/features/catch-up.png","../../src/pages/catchup.jsx"],"sourcesContent":["export default \"__VITE_ASSET__S_9SYp01__\"","import '../components/links-bar.css';\nimport './catchup.css';\n\nimport autoAnimate from '@formkit/auto-animate';\nimport { getBlurHashAverageColor } from 'fast-blurhash';\nimport { Fragment } from 'preact';\nimport { memo } from 'preact/compat';\nimport {\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from 'preact/hooks';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { useSearchParams } from 'react-router-dom';\nimport { uid } from 'uid/single';\n\nimport catchupUrl from '../assets/features/catch-up.png';\n\nimport Avatar from '../components/avatar';\nimport Icon from '../components/icon';\nimport Link from '../components/link';\nimport Loader from '../components/loader';\nimport Modal from '../components/modal';\nimport NameText from '../components/name-text';\nimport NavMenu from '../components/nav-menu';\nimport RelativeTime from '../components/relative-time';\nimport { api } from '../utils/api';\nimport { oklab2rgb, rgb2oklab } from '../utils/color-utils';\nimport db from '../utils/db';\nimport emojifyText from '../utils/emojify-text';\nimport { isFiltered } from '../utils/filters';\nimport htmlContentLength from '../utils/html-content-length';\nimport niceDateTime from '../utils/nice-date-time';\nimport shortenNumber from '../utils/shorten-number';\nimport showToast from '../utils/show-toast';\nimport states, { statusKey } from '../utils/states';\nimport statusPeek from '../utils/status-peek';\nimport store from '../utils/store';\nimport { getCurrentAccountNS } from '../utils/store-utils';\nimport { assignFollowedTags } from '../utils/timeline-utils';\nimport useTitle from '../utils/useTitle';\n\nconst FILTER_CONTEXT = 'home';\n\nconst RANGES = [\n  { label: 'last 1 hour', value: 1 },\n  { label: 'last 2 hours', value: 2 },\n  { label: 'last 3 hours', value: 3 },\n  { label: 'last 4 hours', value: 4 },\n  { label: 'last 5 hours', value: 5 },\n  { label: 'last 6 hours', value: 6 },\n  { label: 'last 7 hours', value: 7 },\n  { label: 'last 8 hours', value: 8 },\n  { label: 'last 9 hours', value: 9 },\n  { label: 'last 10 hours', value: 10 },\n  { label: 'last 11 hours', value: 11 },\n  { label: 'last 12 hours', value: 12 },\n  { label: 'beyond 12 hours', value: 13 },\n];\n\nconst FILTER_LABELS = [\n  'Original',\n  'Replies',\n  'Boosts',\n  'Followed tags',\n  'Groups',\n  'Filtered',\n];\nconst FILTER_SORTS = [\n  'createdAt',\n  'repliesCount',\n  'favouritesCount',\n  'reblogsCount',\n  'density',\n];\nconst FILTER_GROUPS = [null, 'account'];\nconst FILTER_VALUES = {\n  Filtered: 'filtered',\n  Groups: 'group',\n  Boosts: 'boost',\n  Replies: 'reply',\n  'Followed tags': 'followedTags',\n  Original: 'original',\n};\nconst FILTER_CATEGORY_TEXT = {\n  Filtered: 'filtered posts',\n  Groups: 'group posts',\n  Boosts: 'boosts',\n  Replies: 'replies',\n  'Followed tags': 'followed-tag posts',\n  Original: 'original posts',\n};\nconst SORT_BY_TEXT = {\n  // asc, desc\n  createdAt: ['oldest', 'latest'],\n  repliesCount: ['fewest replies', 'most replies'],\n  favouritesCount: ['fewest likes', 'most likes'],\n  reblogsCount: ['fewest boosts', 'most boosts'],\n  density: ['least dense', 'most dense'],\n};\n\nfunction Catchup() {\n  useTitle('Catch-up', '/catchup');\n  const { masto, instance } = api();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const id = searchParams.get('id');\n  const [uiState, setUIState] = useState('start');\n  const [showTopLinks, setShowTopLinks] = useState(false);\n\n  const currentAccount = useMemo(() => {\n    return store.session.get('currentAccount');\n  }, []);\n  const isSelf = (accountID) => accountID === currentAccount;\n\n  async function fetchHome({ maxCreatedAt }) {\n    const maxCreatedAtDate = maxCreatedAt ? new Date(maxCreatedAt) : null;\n    console.debug('fetchHome', maxCreatedAtDate);\n    const allResults = [];\n    const homeIterator = masto.v1.timelines.home.list({ limit: 40 });\n    mainloop: while (true) {\n      try {\n        const results = await homeIterator.next();\n        const { value } = results;\n        if (value?.length) {\n          // This ignores maxCreatedAt filter, but it's ok for now\n          await assignFollowedTags(value, instance);\n          let addedResults = false;\n          for (let i = 0; i < value.length; i++) {\n            const item = value[i];\n            const createdAtDate = new Date(item.createdAt);\n            if (!maxCreatedAtDate || createdAtDate >= maxCreatedAtDate) {\n              // Filtered\n              const selfPost = isSelf(\n                item.reblog?.account?.id || item.account.id,\n              );\n              const filterInfo =\n                !selfPost &&\n                isFiltered(\n                  item.reblog?.filtered || item.filtered,\n                  FILTER_CONTEXT,\n                );\n              if (filterInfo?.action === 'hide') continue;\n              item._filtered = filterInfo;\n\n              // Followed tags\n              const sKey = statusKey(item.id, instance);\n              item._followedTags = states.statusFollowedTags[sKey]\n                ? [...states.statusFollowedTags[sKey]]\n                : [];\n\n              allResults.push(item);\n              addedResults = true;\n            } else {\n              // Don't immediately stop, still add the other items that might still be within range\n              // break mainloop;\n            }\n            // Only stop when ALL items are outside of range\n            if (!addedResults) {\n              break mainloop;\n            }\n          }\n        } else {\n          break mainloop;\n        }\n        // Pause 1s\n        await new Promise((resolve) => setTimeout(resolve, 1000));\n      } catch (e) {\n        console.error(e);\n        break mainloop;\n      }\n    }\n\n    // Post-process all results\n    // 1. Threadify - tag 1st-post in a thread\n    allResults.forEach((status) => {\n      if (status?.inReplyToId) {\n        const replyToStatus = allResults.find(\n          (s) => s.id === status.inReplyToId,\n        );\n        if (replyToStatus && !replyToStatus.inReplyToId) {\n          replyToStatus._thread = true;\n        }\n      }\n    });\n\n    return allResults;\n  }\n\n  const [posts, setPosts] = useState([]);\n  const catchupRangeRef = useRef();\n  const NS = useMemo(() => getCurrentAccountNS(), []);\n  const handleCatchupClick = useCallback(async ({ duration } = {}) => {\n    const now = Date.now();\n    const maxCreatedAt = duration ? now - duration : null;\n    setUIState('loading');\n    const results = await fetchHome({ maxCreatedAt });\n    // Namespaced by account ID\n    // Possible conflict if ID matches between different accounts from different instances\n    const catchupID = `${NS}-${uid()}`;\n    try {\n      await db.catchup.set(catchupID, {\n        id: catchupID,\n        posts: results,\n        count: results.length,\n        startAt: maxCreatedAt,\n        endAt: now,\n      });\n      setSearchParams({ id: catchupID });\n    } catch (e) {\n      console.error(e, results);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (id) {\n      (async () => {\n        const catchup = await db.catchup.get(id);\n        if (catchup) {\n          catchup.posts.sort((a, b) => (a.createdAt > b.createdAt ? 1 : -1));\n          setPosts(catchup.posts);\n          setUIState('results');\n        }\n      })();\n    } else if (uiState === 'results') {\n      setPosts([]);\n      setUIState('start');\n    }\n  }, [id]);\n\n  const [reloadCatchupsCount, reloadCatchups] = useReducer((c) => c + 1, 0);\n  const [lastCatchupEndAt, setLastCatchupEndAt] = useState(null);\n  const [prevCatchups, setPrevCatchups] = useState([]);\n  useEffect(() => {\n    (async () => {\n      try {\n        const catchups = await db.catchup.keys();\n        if (catchups.length) {\n          const ns = getCurrentAccountNS();\n          const ownKeys = catchups.filter((key) => key.startsWith(`${ns}-`));\n          if (ownKeys.length) {\n            let ownCatchups = await db.catchup.getMany(ownKeys);\n            ownCatchups.sort((a, b) => b.endAt - a.endAt);\n\n            // Split to 1st 3 last catchups, and the rest\n            let lastCatchups = ownCatchups.slice(0, 3);\n            let restCatchups = ownCatchups.slice(3);\n\n            const trimmedCatchups = lastCatchups.map((c) => {\n              const { id, count, startAt, endAt } = c;\n              return {\n                id,\n                count,\n                startAt,\n                endAt,\n              };\n            });\n            setPrevCatchups(trimmedCatchups);\n            setLastCatchupEndAt(lastCatchups[0].endAt);\n\n            // GC time\n            ownCatchups = null;\n            lastCatchups = null;\n\n            queueMicrotask(() => {\n              if (restCatchups.length) {\n                // delete them\n                db.catchup\n                  .delMany(restCatchups.map((c) => c.id))\n                  .then(() => {\n                    // GC time\n                    restCatchups = null;\n                  })\n                  .catch((e) => {\n                    console.error(e);\n                  });\n              }\n            });\n\n            return;\n          }\n        }\n      } catch (e) {\n        console.error(e);\n      }\n      setPrevCatchups([]);\n    })();\n  }, [reloadCatchupsCount]);\n  useEffect(() => {\n    if (uiState === 'start') {\n      reloadCatchups();\n    }\n  }, [uiState === 'start']);\n\n  const [filterCounts, links] = useMemo(() => {\n    let filtereds = 0,\n      groups = 0,\n      boosts = 0,\n      replies = 0,\n      followedTags = 0,\n      originals = 0;\n    const links = {};\n    for (const post of posts) {\n      if (post._filtered) {\n        filtereds++;\n        post.__FILTER = 'filtered';\n      } else if (post.group) {\n        groups++;\n        post.__FILTER = 'group';\n      } else if (post.reblog) {\n        boosts++;\n        post.__FILTER = 'boost';\n      } else if (post._followedTags?.length) {\n        followedTags++;\n        post.__FILTER = 'followedTags';\n      } else if (\n        post.inReplyToId &&\n        post.inReplyToAccountId !== post.account?.id\n      ) {\n        replies++;\n        post.__FILTER = 'reply';\n      } else {\n        originals++;\n        post.__FILTER = 'original';\n      }\n\n      const thePost = post.reblog || post;\n      if (\n        post.__FILTER !== 'filtered' &&\n        thePost.card?.url &&\n        thePost.card?.image &&\n        thePost.card?.type === 'link'\n      ) {\n        const { card, favouritesCount, reblogsCount } = thePost;\n        let { url } = card;\n        url = url.replace(/\\/$/, '');\n        if (!links[url]) {\n          links[url] = {\n            postID: thePost.id,\n            card,\n            shared: 1,\n            sharers: [post.account],\n            likes: favouritesCount,\n            boosts: reblogsCount,\n          };\n        } else {\n          if (links[url].sharers.find((a) => a.id === post.account.id)) {\n            continue;\n          }\n          links[url].shared++;\n          links[url].sharers.push(post.account);\n          if (links[url].postID !== thePost.id) {\n            links[url].likes += favouritesCount;\n            links[url].boosts += reblogsCount;\n          }\n        }\n      }\n    }\n\n    let topLinks = [];\n    for (const link in links) {\n      topLinks.push({\n        url: link,\n        ...links[link],\n      });\n    }\n    topLinks.sort((a, b) => {\n      if (a.shared > b.shared) return -1;\n      if (a.shared < b.shared) return 1;\n      if (a.boosts > b.boosts) return -1;\n      if (a.boosts < b.boosts) return 1;\n      if (a.likes > b.likes) return -1;\n      if (a.likes < b.likes) return 1;\n      return 0;\n    });\n\n    // Slice links to shared > 1 but min 10 links\n    if (topLinks.length > 10) {\n      linksLoop: for (let i = 10; i < topLinks.length; i++) {\n        const { shared } = topLinks[i];\n        if (shared <= 1) {\n          topLinks = topLinks.slice(0, i);\n          break linksLoop;\n        }\n      }\n    }\n\n    return [\n      {\n        Filtered: filtereds,\n        Groups: groups,\n        Boosts: boosts,\n        Replies: replies,\n        'Followed tags': followedTags,\n        Original: originals,\n      },\n      topLinks,\n    ];\n  }, [posts]);\n\n  const [selectedFilterCategory, setSelectedFilterCategory] = useState('All');\n  const [selectedAuthor, setSelectedAuthor] = useState(null);\n\n  const [range, setRange] = useState(1);\n\n  const [sortBy, setSortBy] = useState('createdAt');\n  const [sortOrder, setSortOrder] = useState('asc');\n  const [groupBy, setGroupBy] = useState(null);\n\n  const [filteredPosts, authors, authorCounts] = useMemo(() => {\n    const authorsHash = {};\n    const authorCountsMap = new Map();\n\n    let filteredPosts = posts.filter((post) => {\n      const postFilterMatches =\n        selectedFilterCategory === 'All' ||\n        post.__FILTER === FILTER_VALUES[selectedFilterCategory];\n\n      if (postFilterMatches) {\n        authorsHash[post.account.id] = post.account;\n        authorCountsMap.set(\n          post.account.id,\n          (authorCountsMap.get(post.account.id) || 0) + 1,\n        );\n      }\n\n      return postFilterMatches;\n    });\n\n    // Deduplicate boosts\n    const boostedPosts = {};\n    filteredPosts.forEach((post) => {\n      if (post.reblog) {\n        if (boostedPosts[post.reblog.id]) {\n          if (boostedPosts[post.reblog.id].__BOOSTERS) {\n            boostedPosts[post.reblog.id].__BOOSTERS.add(post.account);\n          } else {\n            boostedPosts[post.reblog.id].__BOOSTERS = new Set([post.account]);\n          }\n          post.__HIDDEN = true;\n        } else {\n          boostedPosts[post.reblog.id] = post;\n        }\n      }\n    });\n\n    if (selectedAuthor && authorCountsMap.has(selectedAuthor)) {\n      filteredPosts = filteredPosts.filter(\n        (post) =>\n          post.account.id === selectedAuthor ||\n          [...(post.__BOOSTERS || [])].find((a) => a.id === selectedAuthor),\n      );\n    }\n\n    return [filteredPosts, authorsHash, Object.fromEntries(authorCountsMap)];\n  }, [selectedFilterCategory, selectedAuthor, posts]);\n\n  const filteredPostsMap = useMemo(() => {\n    const map = {};\n    filteredPosts.forEach((post) => {\n      map[post.id] = post;\n    });\n    return map;\n  }, [filteredPosts]);\n\n  const authorCountsList = useMemo(\n    () =>\n      Object.keys(authorCounts).sort(\n        (a, b) => authorCounts[b] - authorCounts[a],\n      ),\n    [authorCounts],\n  );\n\n  const sortedFilteredPosts = useMemo(() => {\n    const authorIndices = {};\n    authorCountsList.forEach((authorID, index) => {\n      authorIndices[authorID] = index;\n    });\n    return filteredPosts\n      .filter((post) => !post.__HIDDEN)\n      .sort((a, b) => {\n        if (groupBy === 'account') {\n          const aAccountID = a.account.id;\n          const bAccountID = b.account.id;\n          const aIndex = authorIndices[aAccountID];\n          const bIndex = authorIndices[bAccountID];\n          const order = aIndex - bIndex;\n          if (order !== 0) {\n            return order;\n          }\n        }\n        if (sortBy !== 'createdAt') {\n          a = a.reblog || a;\n          b = b.reblog || b;\n          if (sortBy !== 'density' && a[sortBy] === b[sortBy]) {\n            return a.createdAt > b.createdAt ? 1 : -1;\n          }\n        }\n        if (sortBy === 'density') {\n          const aDensity = postDensity(a);\n          const bDensity = postDensity(b);\n          if (sortOrder === 'asc') {\n            return aDensity > bDensity ? 1 : -1;\n          } else {\n            return bDensity > aDensity ? 1 : -1;\n          }\n        }\n        if (sortOrder === 'asc') {\n          return a[sortBy] > b[sortBy] ? 1 : -1;\n        } else {\n          return b[sortBy] > a[sortBy] ? 1 : -1;\n        }\n      });\n  }, [filteredPosts, sortBy, sortOrder, groupBy, authorCountsList]);\n\n  const prevGroup = useRef(null);\n\n  const authorsListParent = useRef(null);\n  const autoAnimated = useRef(false);\n  useEffect(() => {\n    if (posts.length > 100 || autoAnimated.current) return;\n    if (authorsListParent.current) {\n      autoAnimate(authorsListParent.current, {\n        duration: 200,\n      });\n      autoAnimated.current = true;\n    }\n  }, [posts, authorsListParent]);\n\n  const postsBarType = posts.length > 160 ? '3d' : '2d';\n\n  const postsBar = useMemo(() => {\n    if (postsBarType !== '2d') return null;\n    return posts.map((post) => {\n      // If part of filteredPosts\n      const isFiltered = filteredPostsMap[post.id];\n      return (\n        <span\n          key={post.id}\n          class={`post-dot ${isFiltered ? 'post-dot-highlight' : ''}`}\n        />\n      );\n    });\n  }, [filteredPostsMap]);\n\n  const postsBins = useMemo(() => {\n    if (postsBarType !== '3d') return null;\n    if (!posts?.length) return null;\n    const bins = binByTime(posts, 'createdAt', 320);\n    return bins.map((posts, i) => {\n      return (\n        <div class=\"posts-bin\" key={i}>\n          {posts.map((post) => {\n            const isFiltered = filteredPostsMap[post.id];\n            return (\n              <span\n                key={post.id}\n                class={`post-dot ${isFiltered ? 'post-dot-highlight' : ''}`}\n              />\n            );\n          })}\n        </div>\n      );\n    });\n  }, [filteredPostsMap]);\n\n  const scrollableRef = useRef(null);\n\n  // if range value exceeded lastCatchupEndAt, show error\n  const lastCatchupRange = useMemo(() => {\n    // return hour, not ms\n    if (!lastCatchupEndAt) return null;\n    return (Date.now() - lastCatchupEndAt) / 1000 / 60 / 60;\n  }, [lastCatchupEndAt, range]);\n\n  useEffect(() => {\n    if (uiState !== 'results') return;\n    const authorUsername =\n      selectedAuthor && authors[selectedAuthor]\n        ? authors[selectedAuthor].username\n        : '';\n    const sortOrderIndex = sortOrder === 'asc' ? 0 : 1;\n    const groupByText = {\n      account: 'authors',\n    };\n    let toast = showToast({\n      duration: 5_000, // 5 seconds\n      text: `Showing ${\n        FILTER_CATEGORY_TEXT[selectedFilterCategory] || 'all posts'\n      }${authorUsername ? ` by @${authorUsername}` : ''}, ${\n        SORT_BY_TEXT[sortBy][sortOrderIndex]\n      } first${\n        !!groupBy\n          ? `, grouped by ${groupBy === 'account' ? groupByText[groupBy] : ''}`\n          : ''\n      }`,\n    });\n    return () => {\n      toast?.hideToast?.();\n    };\n  }, [\n    uiState,\n    selectedFilterCategory,\n    selectedAuthor,\n    sortBy,\n    sortOrder,\n    groupBy,\n    authors,\n  ]);\n\n  useEffect(() => {\n    if (selectedAuthor) {\n      if (authors[selectedAuthor]) {\n        // Check if author is visible and within the scrollable area viewport\n        const authorElement = authorsListParent.current.querySelector(\n          `[data-author=\"${selectedAuthor}\"]`,\n        );\n        const scrollableRect =\n          authorsListParent.current?.getBoundingClientRect();\n        const authorRect = authorElement?.getBoundingClientRect();\n        console.log({\n          sLeft: scrollableRect.left,\n          sRight: scrollableRect.right,\n          aLeft: authorRect.left,\n          aRight: authorRect.right,\n        });\n        if (\n          authorRect.left < scrollableRect.left ||\n          authorRect.right > scrollableRect.right\n        ) {\n          authorElement.scrollIntoView({\n            block: 'nearest',\n            inline: 'center',\n            behavior: 'smooth',\n          });\n        } else if (authorRect.top < 0) {\n          authorElement.scrollIntoView({\n            block: 'nearest',\n            inline: 'nearest',\n            behavior: 'smooth',\n          });\n        }\n      }\n    }\n  }, [selectedAuthor, authors]);\n\n  const [showHelp, setShowHelp] = useState(false);\n\n  const itemsSelector = '.catchup-list > li > a';\n  const jRef = useHotkeys(\n    'j',\n    () => {\n      const activeItem = document.activeElement.closest(itemsSelector);\n      const activeItemRect = activeItem?.getBoundingClientRect();\n      const allItems = Array.from(\n        scrollableRef.current.querySelectorAll(itemsSelector),\n      );\n      if (\n        activeItem &&\n        activeItemRect.top < scrollableRef.current.clientHeight &&\n        activeItemRect.bottom > 0\n      ) {\n        const activeItemIndex = allItems.indexOf(activeItem);\n        const nextItem = allItems[activeItemIndex + 1];\n        if (nextItem) {\n          nextItem.focus();\n          nextItem.scrollIntoView({\n            block: 'center',\n            inline: 'center',\n            behavior: 'smooth',\n          });\n        }\n      } else {\n        const topmostItem = allItems.find((item) => {\n          const itemRect = item.getBoundingClientRect();\n          return itemRect.top >= 0;\n        });\n        if (topmostItem) {\n          topmostItem.focus();\n          topmostItem.scrollIntoView({\n            block: 'nearest',\n            inline: 'center',\n            behavior: 'smooth',\n          });\n        }\n      }\n    },\n    {\n      preventDefault: true,\n      ignoreModifiers: true,\n    },\n  );\n\n  const kRef = useHotkeys(\n    'k',\n    () => {\n      const activeItem = document.activeElement.closest(itemsSelector);\n      const activeItemRect = activeItem?.getBoundingClientRect();\n      const allItems = Array.from(\n        scrollableRef.current.querySelectorAll(itemsSelector),\n      );\n      if (\n        activeItem &&\n        activeItemRect.top < scrollableRef.current.clientHeight &&\n        activeItemRect.bottom > 0\n      ) {\n        const activeItemIndex = allItems.indexOf(activeItem);\n        let prevItem = allItems[activeItemIndex - 1];\n        if (prevItem) {\n          prevItem.focus();\n          prevItem.scrollIntoView({\n            block: 'center',\n            inline: 'center',\n            behavior: 'smooth',\n          });\n        }\n      } else {\n        const topmostItem = allItems.find((item) => {\n          const itemRect = item.getBoundingClientRect();\n          return itemRect.top >= 44 && itemRect.left >= 0;\n        });\n        if (topmostItem) {\n          topmostItem.focus();\n          topmostItem.scrollIntoView({\n            block: 'nearest',\n            inline: 'center',\n            behavior: 'smooth',\n          });\n        }\n      }\n    },\n    {\n      preventDefault: true,\n      ignoreModifiers: true,\n    },\n  );\n\n  const hlRef = useHotkeys(\n    'h, l',\n    (_, handler) => {\n      // Go next/prev selectedAuthor in authorCountsList list\n      const key = handler.keys[0];\n      if (selectedAuthor) {\n        const index = authorCountsList.indexOf(selectedAuthor);\n        if (key === 'h') {\n          if (index > 0 && index < authorCountsList.length) {\n            setSelectedAuthor(authorCountsList[index - 1]);\n            scrollableRef.current?.focus();\n          }\n        } else if (key === 'l') {\n          if (index < authorCountsList.length - 1 && index >= 0) {\n            setSelectedAuthor(authorCountsList[index + 1]);\n            scrollableRef.current?.focus();\n          }\n        }\n      } else if (key === 'l') {\n        setSelectedAuthor(authorCountsList[0]);\n        scrollableRef.current?.focus();\n      }\n    },\n    {\n      preventDefault: true,\n      ignoreModifiers: true,\n      enableOnFormTags: ['input'],\n    },\n  );\n\n  const escRef = useHotkeys(\n    'esc',\n    () => {\n      setSelectedAuthor(null);\n      scrollableRef.current?.focus();\n    },\n    {\n      preventDefault: true,\n      ignoreModifiers: true,\n      enableOnFormTags: ['input'],\n    },\n  );\n\n  const dotRef = useHotkeys(\n    '.',\n    () => {\n      scrollableRef.current?.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      });\n    },\n    {\n      preventDefault: true,\n      ignoreModifiers: true,\n      enableOnFormTags: ['input'],\n    },\n  );\n\n  return (\n    <div\n      ref={(node) => {\n        scrollableRef.current = node;\n        jRef.current = node;\n        kRef.current = node;\n        hlRef.current = node;\n        escRef.current = node;\n      }}\n      id=\"catchup-page\"\n      class=\"deck-container\"\n      tabIndex=\"-1\"\n    >\n      <div class=\"timeline-deck deck wide\">\n        <header\n          class={`${uiState === 'loading' ? 'loading' : ''}`}\n          onClick={(e) => {\n            if (!e.target.closest('a, button')) {\n              scrollableRef.current?.scrollTo({\n                top: 0,\n                behavior: 'smooth',\n              });\n            }\n          }}\n        >\n          <div class=\"header-grid\">\n            <div class=\"header-side\">\n              <NavMenu />\n              {uiState === 'results' && (\n                <Link to=\"/catchup\" class=\"button plain\">\n                  <Icon icon=\"history2\" size=\"l\" />\n                </Link>\n              )}\n              {uiState === 'start' && (\n                <Link to=\"/\" class=\"button plain\">\n                  <Icon icon=\"home\" size=\"l\" />\n                </Link>\n              )}\n            </div>\n            <h1>\n              {uiState !== 'start' && (\n                <>\n                  Catch-up <sup>beta</sup>\n                </>\n              )}\n            </h1>\n            <div class=\"header-side\">\n              {uiState !== 'start' && uiState !== 'loading' && (\n                <button\n                  type=\"button\"\n                  class=\"plain\"\n                  onClick={() => {\n                    setShowHelp(true);\n                  }}\n                >\n                  Help\n                </button>\n              )}\n            </div>\n          </div>\n        </header>\n        <main>\n          {uiState === 'start' && (\n            <div class=\"catchup-start\">\n              <h1>\n                Catch-up <sup>beta</sup>\n              </h1>\n              <details>\n                <summary>What is this?</summary>\n                <p>\n                  Catch-up is a separate timeline for your followings, offering\n                  a high-level view at a glance, with a simple, email-inspired\n                  interface to effortlessly sort and filter through posts.\n                </p>\n                <img\n                  src={catchupUrl}\n                  width=\"1200\"\n                  height=\"900\"\n                  alt=\"Preview of Catch-up UI\"\n                />\n                <p>\n                  <button\n                    type=\"button\"\n                    onClick={(e) => {\n                      e.target.closest('details').open = false;\n                    }}\n                  >\n                    Let's catch up\n                  </button>\n                </p>\n              </details>\n              <p>Let's catch up on the posts from your followings.</p>\n              <p>\n                <b>Show me all posts from…</b>\n              </p>\n              <div class=\"catchup-form\">\n                <input\n                  ref={catchupRangeRef}\n                  type=\"range\"\n                  value={range}\n                  min={RANGES[0].value}\n                  max={RANGES[RANGES.length - 1].value}\n                  step=\"1\"\n                  list=\"catchup-ranges\"\n                  onChange={(e) => setRange(+e.target.value)}\n                />{' '}\n                <span\n                  style={{\n                    width: '8em',\n                  }}\n                >\n                  {RANGES[range - 1].label}\n                  <br />\n                  <small class=\"insignificant\">\n                    {range == RANGES[RANGES.length - 1].value\n                      ? 'until the max'\n                      : niceDateTime(\n                          new Date(Date.now() - range * 60 * 60 * 1000),\n                        )}\n                  </small>\n                </span>\n                <datalist id=\"catchup-ranges\">\n                  {RANGES.map(({ label, value }) => (\n                    <option value={value} label={label} />\n                  ))}\n                </datalist>{' '}\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    if (range < RANGES[RANGES.length - 1].value) {\n                      const duration = range * 60 * 60 * 1000;\n                      handleCatchupClick({ duration });\n                    } else {\n                      handleCatchupClick();\n                    }\n                  }}\n                >\n                  Catch up\n                </button>\n              </div>\n              {lastCatchupRange && range > lastCatchupRange && (\n                <p class=\"catchup-info\">\n                  <Icon icon=\"info\" /> Overlaps with your last catch-up\n                </p>\n              )}\n              <p class=\"insignificant\">\n                <small>\n                  Note: your instance might only show a maximum of 800 posts in\n                  the Home timeline regardless of the time range. Could be less\n                  or more.\n                </small>\n              </p>\n              {!!prevCatchups?.length && (\n                <div class=\"catchup-prev\">\n                  <p>Previously…</p>\n                  <ul>\n                    {prevCatchups.map((pc) => (\n                      <li key={pc.id}>\n                        <Link to={`/catchup?id=${pc.id}`}>\n                          <Icon icon=\"history2\" />{' '}\n                          <span>\n                            {pc.startAt\n                              ? dtf.formatRange(\n                                  new Date(pc.startAt),\n                                  new Date(pc.endAt),\n                                )\n                              : `… – ${dtf.format(new Date(pc.endAt))}`}\n                          </span>\n                        </Link>{' '}\n                        <span>\n                          <small class=\"ib insignificant\">\n                            {pc.count} posts\n                          </small>{' '}\n                          <button\n                            type=\"button\"\n                            class=\"light danger small\"\n                            onClick={async () => {\n                              const yes = confirm('Remove this catch-up?');\n                              if (yes) {\n                                let t = showToast(`Removing Catch-up ${pc.id}`);\n                                await db.catchup.del(pc.id);\n                                t?.hideToast?.();\n                                showToast(`Catch-up ${pc.id} removed`);\n                                reloadCatchups();\n                              }\n                            }}\n                          >\n                            <Icon icon=\"x\" />\n                          </button>\n                        </span>\n                      </li>\n                    ))}\n                  </ul>\n                  {prevCatchups.length >= 3 && (\n                    <p>\n                      <small>\n                        Note: Only max 3 will be stored. The rest will be\n                        automatically removed.\n                      </small>\n                    </p>\n                  )}\n                </div>\n              )}\n            </div>\n          )}\n          {uiState === 'loading' && (\n            <div class=\"ui-state catchup-start\">\n              <Loader abrupt />\n              <p class=\"insignificant\">Fetching posts…</p>\n              <p class=\"insignificant\">This might take a while.</p>\n            </div>\n          )}\n          {uiState === 'results' && (\n            <>\n              <div class=\"catchup-header\">\n                {posts.length > 0 && (\n                  <p>\n                    <b class=\"ib\">\n                      {dtf.formatRange(\n                        new Date(posts[0].createdAt),\n                        new Date(posts[posts.length - 1].createdAt),\n                      )}\n                    </b>\n                  </p>\n                )}\n                <aside>\n                  <button\n                    hidden={\n                      selectedFilterCategory === 'All' &&\n                      !selectedAuthor &&\n                      sortBy === 'createdAt' &&\n                      sortOrder === 'asc'\n                    }\n                    type=\"button\"\n                    class=\"plain4 small\"\n                    onClick={() => {\n                      setSelectedFilterCategory('All');\n                      setSelectedAuthor(null);\n                      setSortBy('createdAt');\n                      setGroupBy(null);\n                      setSortOrder('asc');\n                    }}\n                  >\n                    Reset filters\n                  </button>\n                  {links?.length > 0 && (\n                    <button\n                      type=\"button\"\n                      class=\"plain small\"\n                      onClick={() => setShowTopLinks(!showTopLinks)}\n                    >\n                      Top links{' '}\n                      <Icon\n                        icon=\"chevron-down\"\n                        style={{\n                          transform: showTopLinks\n                            ? 'rotate(180deg)'\n                            : 'rotate(0deg)',\n                        }}\n                      />\n                    </button>\n                  )}\n                </aside>\n              </div>\n              <div class=\"shazam-container no-animation\" hidden={!showTopLinks}>\n                <div class=\"shazam-container-inner\">\n                  <div class=\"catchup-top-links links-bar\">\n                    {links.map((link) => {\n                      const { card, shared, sharers, likes, boosts } = link;\n                      const {\n                        blurhash,\n                        title,\n                        description,\n                        url,\n                        image,\n                        imageDescription,\n                        language,\n                        width,\n                        height,\n                        publishedAt,\n                      } = card;\n                      const domain = new URL(url).hostname\n                        .replace(/^www\\./, '')\n                        .replace(/\\/$/, '');\n                      let accentColor;\n                      if (blurhash) {\n                        const averageColor = getBlurHashAverageColor(blurhash);\n                        const labAverageColor = rgb2oklab(averageColor);\n                        accentColor = oklab2rgb([\n                          0.6,\n                          labAverageColor[1],\n                          labAverageColor[2],\n                        ]);\n                      }\n\n                      return (\n                        <a\n                          key={url}\n                          href={url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          style={\n                            accentColor\n                              ? {\n                                  '--accent-color': `rgb(${accentColor.join(\n                                    ',',\n                                  )})`,\n                                  '--accent-alpha-color': `rgba(${accentColor.join(\n                                    ',',\n                                  )}, 0.4)`,\n                                }\n                              : {}\n                          }\n                        >\n                          <article>\n                            <figure>\n                              <img\n                                src={image}\n                                alt={imageDescription}\n                                width={width}\n                                height={height}\n                                loading=\"lazy\"\n                              />\n                            </figure>\n                            <div class=\"article-body\">\n                              <header>\n                                <div class=\"article-meta\">\n                                  <span class=\"domain\">{domain}</span>{' '}\n                                  {!!publishedAt && <>&middot; </>}\n                                  {!!publishedAt && (\n                                    <>\n                                      <RelativeTime\n                                        datetime={publishedAt}\n                                        format=\"micro\"\n                                      />\n                                    </>\n                                  )}\n                                </div>\n                                {!!title && (\n                                  <h1\n                                    class=\"title\"\n                                    lang={language}\n                                    dir=\"auto\"\n                                    title={title}\n                                  >\n                                    {title}\n                                  </h1>\n                                )}\n                              </header>\n                              {!!description && (\n                                <p\n                                  class=\"description\"\n                                  lang={language}\n                                  dir=\"auto\"\n                                  title={description}\n                                >\n                                  {description}\n                                </p>\n                              )}\n                              <hr />\n                              <p\n                                style={{\n                                  whiteSpace: 'nowrap',\n                                }}\n                              >\n                                Shared by{' '}\n                                {sharers.map((s) => {\n                                  const { avatarStatic, displayName } = s;\n                                  return (\n                                    <Avatar\n                                      url={avatarStatic}\n                                      size=\"s\"\n                                      alt={displayName}\n                                    />\n                                  );\n                                })}\n                              </p>\n                            </div>\n                          </article>\n                        </a>\n                      );\n                    })}\n                  </div>\n                </div>\n              </div>\n              {posts.length >= 5 &&\n                (postsBarType === '3d' ? (\n                  <div class=\"catchup-posts-viz-time-bar\">{postsBins}</div>\n                ) : (\n                  <div class=\"catchup-posts-viz-bar\">{postsBar}</div>\n                ))}\n              {posts.length >= 2 && (\n                <div class=\"catchup-filters\">\n                  <label class=\"filter-cat\">\n                    <input\n                      type=\"radio\"\n                      name=\"filter-cat\"\n                      checked={selectedFilterCategory.toLowerCase() === 'all'}\n                      onChange={() => {\n                        setSelectedFilterCategory('All');\n                      }}\n                    />\n                    All <span class=\"count\">{posts.length}</span>\n                  </label>\n                  {FILTER_LABELS.map(\n                    (label) =>\n                      !!filterCounts[label] && (\n                        <label\n                          class=\"filter-cat\"\n                          key={label}\n                          title={\n                            (\n                              (filterCounts[label] / posts.length) *\n                              100\n                            ).toFixed(2) + '%'\n                          }\n                        >\n                          <input\n                            type=\"radio\"\n                            name=\"filter-cat\"\n                            checked={\n                              selectedFilterCategory.toLowerCase() ===\n                              label.toLowerCase()\n                            }\n                            onChange={() => {\n                              setSelectedFilterCategory(label);\n                              // setSelectedAuthor(null);\n                            }}\n                          />\n                          {label}{' '}\n                          <span class=\"count\">{filterCounts[label]}</span>\n                        </label>\n                      ),\n                  )}\n                </div>\n              )}\n              {posts.length >= 2 && !!authorCounts && (\n                <div\n                  class=\"catchup-filters authors-filters\"\n                  ref={authorsListParent}\n                >\n                  {authorCountsList.map((author) => (\n                    <label\n                      class=\"filter-author\"\n                      data-author={author}\n                      key={`${author}-${authorCounts[author]}`}\n                      // Preact messed up the order sometimes, need additional key besides just `author`\n                      // https://github.com/preactjs/preact/issues/2849\n                    >\n                      <input\n                        type=\"radio\"\n                        name=\"filter-author\"\n                        checked={selectedAuthor === author}\n                        onChange={() => {\n                          setSelectedAuthor(author);\n                          // setGroupBy(null);\n                        }}\n                        onClick={() => {\n                          if (selectedAuthor === author) {\n                            setSelectedAuthor(null);\n                          }\n                        }}\n                      />\n                      <Avatar\n                        url={\n                          authors[author].avatarStatic || authors[author].avatar\n                        }\n                        size=\"xxl\"\n                        alt={`${authors[author].displayName} (@${authors[author].acct})`}\n                      />{' '}\n                      <span class=\"count\">{authorCounts[author]}</span>\n                      <span class=\"username\">{authors[author].username}</span>\n                    </label>\n                  ))}\n                  {authorCountsList.length > 5 && (\n                    <small\n                      key=\"authors-count\"\n                      style={{\n                        whiteSpace: 'nowrap',\n                        paddingInline: '1em',\n                        opacity: 0.33,\n                      }}\n                    >\n                      {authorCountsList.length} authors\n                    </small>\n                  )}\n                </div>\n              )}\n              {posts.length >= 2 && (\n                <div class=\"catchup-filters\">\n                  <span class=\"filter-label\">Sort</span>{' '}\n                  <fieldset class=\"radio-field-group\">\n                    {FILTER_SORTS.map((key) => (\n                      <label\n                        class=\"filter-sort\"\n                        key={key}\n                        onClick={(e) => {\n                          if (sortBy === key) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\n                          }\n                        }}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"filter-sort-cat\"\n                          checked={sortBy === key}\n                          onChange={() => {\n                            setSortBy(key);\n                            const order = /(replies|favourites|reblogs)/.test(\n                              key,\n                            )\n                              ? 'desc'\n                              : 'asc';\n                            setSortOrder(order);\n                          }}\n                        />\n                        {\n                          {\n                            createdAt: 'Date',\n                            repliesCount: 'Replies',\n                            favouritesCount: 'Likes',\n                            reblogsCount: 'Boosts',\n                            density: 'Density',\n                          }[key]\n                        }\n                        {sortBy === key && (sortOrder === 'asc' ? ' ↑' : ' ↓')}\n                      </label>\n                    ))}\n                  </fieldset>\n                  {/* <fieldset class=\"radio-field-group\">\n                    {['asc', 'desc'].map((key) => (\n                      <label class=\"filter-sort\" key={key}>\n                        <input\n                          type=\"radio\"\n                          name=\"filter-sort-dir\"\n                          checked={sortOrder === key}\n                          onChange={() => {\n                            setSortOrder(key);\n                          }}\n                        />\n                        {key === 'asc' ? '↑' : '↓'}\n                      </label>\n                    ))}\n                  </fieldset> */}\n                  <span class=\"filter-label\">Group</span>{' '}\n                  <fieldset class=\"radio-field-group\">\n                    {FILTER_GROUPS.map((key) => (\n                      <label class=\"filter-group\" key={key || 'none'}>\n                        <input\n                          type=\"radio\"\n                          name=\"filter-group\"\n                          checked={groupBy === key}\n                          onChange={() => {\n                            setGroupBy(key);\n                          }}\n                          disabled={key === 'account' && selectedAuthor}\n                        />\n                        {{\n                          account: 'Authors',\n                        }[key] || 'None'}\n                      </label>\n                    ))}\n                  </fieldset>\n                  {\n                    selectedAuthor && authorCountsList.length > 1 ? (\n                      <button\n                        type=\"button\"\n                        class=\"plain6 small\"\n                        onClick={() => {\n                          setSelectedAuthor(null);\n                        }}\n                        style={{\n                          whiteSpace: 'nowrap',\n                        }}\n                      >\n                        Show all authors\n                      </button>\n                    ) : null\n                    // <button\n                    //   type=\"button\"\n                    //   class=\"plain4 small\"\n                    //   onClick={() => {}}\n                    // >\n                    //   Group by authors\n                    // </button>\n                  }\n                </div>\n              )}\n              <ul\n                class={`catchup-list catchup-filter-${\n                  FILTER_VALUES[selectedFilterCategory] || ''\n                } ${sortBy ? `catchup-sort-${sortBy}` : ''} ${\n                  selectedAuthor && authors[selectedAuthor]\n                    ? `catchup-selected-author`\n                    : ''\n                } ${groupBy ? `catchup-group-${groupBy}` : ''}`}\n              >\n                {sortedFilteredPosts.map((post, i) => {\n                  const id = post.reblog?.id || post.id;\n                  let showSeparator = false;\n                  if (groupBy === 'account') {\n                    if (\n                      prevGroup.current &&\n                      post.account.id !== prevGroup.current &&\n                      i > 0\n                    ) {\n                      showSeparator = true;\n                    }\n                    prevGroup.current = post.account.id;\n                  }\n                  return (\n                    <Fragment key={`${post.id}-${showSeparator}`}>\n                      {showSeparator && <li class=\"separator\" />}\n                      <IntersectionPostLineItem\n                        to={`/${instance}/s/${id}`}\n                        post={post}\n                        root={scrollableRef.current}\n                      />\n                    </Fragment>\n                  );\n                })}\n              </ul>\n              <footer>\n                {filteredPosts.length > 5 && (\n                  <p>\n                    {selectedFilterCategory === 'Boosts'\n                      ? \"You don't have to read everything.\"\n                      : \"That's all.\"}{' '}\n                    <button\n                      type=\"button\"\n                      class=\"textual\"\n                      onClick={() => {\n                        scrollableRef.current.scrollTop = 0;\n                      }}\n                    >\n                      Back to top\n                    </button>\n                    .\n                  </p>\n                )}\n              </footer>\n            </>\n          )}\n        </main>\n      </div>\n      {showHelp && (\n        <Modal onClose={() => setShowHelp(false)}>\n          <div class=\"sheet\" id=\"catchup-help-sheet\">\n            <button\n              type=\"button\"\n              class=\"sheet-close\"\n              onClick={() => setShowHelp(false)}\n            >\n              <Icon icon=\"x\" />\n            </button>\n            <header>\n              <h2>Help</h2>\n            </header>\n            <main>\n              <dl>\n                <dt>Top links</dt>\n                <dd>\n                  Links shared by followings, sorted by shared counts, boosts\n                  and likes.\n                </dd>\n                <dt>Sort: Density</dt>\n                <dd>\n                  Posts are sorted by information density or depth. Shorter\n                  posts are \"lighter\" while longer posts are \"heavier\". Posts\n                  with photos are \"heavier\" than posts without photos.\n                </dd>\n                <dt>Group: Authors</dt>\n                <dd>\n                  Posts are grouped by authors, sorted by posts count per\n                  author.\n                </dd>\n                <dt>Keyboard shortcuts</dt>\n                <dd>\n                  <kbd>j</kbd>: Next post\n                </dd>\n                <dd>\n                  <kbd>k</kbd>: Previous post\n                </dd>\n                <dd>\n                  <kbd>l</kbd>: Next author\n                </dd>\n                <dd>\n                  <kbd>h</kbd>: Previous author\n                </dd>\n                <dd>\n                  <kbd>Enter</kbd>: Open post details\n                </dd>\n                <dd>\n                  <kbd>.</kbd>: Scroll to top\n                </dd>\n              </dl>\n            </main>\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nconst PostLine = memo(\n  function ({ post }) {\n    const {\n      id,\n      account,\n      group,\n      reblog,\n      inReplyToId,\n      inReplyToAccountId,\n      _followedTags: isFollowedTags,\n      _filtered: filterInfo,\n      visibility,\n      __BOOSTERS,\n    } = post;\n    const isReplyTo = inReplyToId && inReplyToAccountId !== account.id;\n    const isFiltered = !!filterInfo;\n\n    const debugHover = (e) => {\n      if (e.shiftKey) {\n        console.log({\n          ...post,\n        });\n      }\n    };\n\n    return (\n      <article\n        class={`post-line ${\n          group\n            ? 'group'\n            : reblog\n            ? 'reblog'\n            : isFollowedTags?.length\n            ? 'followed-tags'\n            : ''\n        } ${isReplyTo ? 'reply-to' : ''} ${\n          isFiltered ? 'filtered' : ''\n        } visibility-${visibility}`}\n        onMouseEnter={debugHover}\n      >\n        <span class=\"post-author\">\n          {reblog ? (\n            <span class=\"post-reblog-avatar\">\n              <Avatar\n                url={account.avatarStatic || account.avatar}\n                squircle={account.bot}\n              />\n              {__BOOSTERS?.size > 0\n                ? [...__BOOSTERS].map((b) => (\n                    <Avatar url={b.avatarStatic || b.avatar} squircle={b.bot} />\n                  ))\n                : ''}{' '}\n              <Icon icon=\"rocket\" />{' '}\n              {/* <Avatar\n              url={reblog.account.avatarStatic || reblog.account.avatar}\n              squircle={reblog.account.bot}\n            /> */}\n              <NameText account={reblog.account} showAvatar />\n            </span>\n          ) : (\n            <NameText account={account} showAvatar />\n          )}\n        </span>\n        <PostPeek post={reblog || post} filterInfo={filterInfo} />\n        <span class=\"post-meta\">\n          <PostStats post={reblog || post} />{' '}\n          <RelativeTime\n            datetime={new Date(reblog?.createdAt || post.createdAt)}\n            format=\"micro\"\n          />\n        </span>\n      </article>\n    );\n  },\n  (oldProps, newProps) => {\n    return oldProps?.post?.id === newProps?.post?.id;\n  },\n);\n\nconst IntersectionPostLineItem = ({ root, to, ...props }) => {\n  const ref = useRef();\n  const [show, setShow] = useState(false);\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const entry = entries[0];\n        if (entry.isIntersecting) {\n          queueMicrotask(() => setShow(true));\n          observer.unobserve(ref.current);\n        }\n      },\n      {\n        root,\n        rootMargin: `${Math.max(320, screen.height * 0.75)}px`,\n      },\n    );\n    if (ref.current) observer.observe(ref.current);\n    return () => {\n      if (ref.current) observer.unobserve(ref.current);\n    };\n  }, []);\n\n  return show ? (\n    <li>\n      <Link to={to}>\n        <PostLine {...props} />\n      </Link>\n    </li>\n  ) : (\n    <li ref={ref} style={{ height: '4em' }} />\n  );\n};\n\n// A media speak a thousand words\nconst MEDIA_DENSITY = 8;\nconst CARD_DENSITY = 8;\nfunction postDensity(post) {\n  const { spoilerText, content, poll, mediaAttachments, card } = post;\n  const pollContent = poll?.options?.length\n    ? poll.options.reduce((acc, cur) => acc + cur.title, '')\n    : '';\n  const density =\n    (spoilerText.length + htmlContentLength(content) + pollContent.length) /\n      140 +\n    (mediaAttachments?.length\n      ? MEDIA_DENSITY * mediaAttachments.length\n      : card?.image\n      ? CARD_DENSITY\n      : 0);\n  return density;\n}\n\nconst MEDIA_SIZE = 48;\n\nfunction PostPeek({ post, filterInfo }) {\n  const {\n    spoilerText,\n    sensitive,\n    content,\n    emojis,\n    poll,\n    mediaAttachments,\n    card,\n    inReplyToId,\n    inReplyToAccountId,\n    account,\n    _thread,\n  } = post;\n  const isThread =\n    (inReplyToId && inReplyToAccountId === account.id) || !!_thread;\n  const showMedia = !spoilerText && !sensitive;\n  const postText = content ? statusPeek(post) : '';\n\n  return (\n    <div class=\"post-peek\" title={!spoilerText ? postText : ''}>\n      <span class=\"post-peek-content\">\n        {!!filterInfo ? (\n          <>\n            {isThread && (\n              <>\n                <span class=\"post-peek-tag post-peek-thread\">Thread</span>{' '}\n              </>\n            )}\n            <span class=\"post-peek-filtered\">\n              Filtered{filterInfo?.titlesStr ? `: ${filterInfo.titlesStr}` : ''}\n            </span>\n          </>\n        ) : !!spoilerText ? (\n          <>\n            {isThread && (\n              <>\n                <span class=\"post-peek-tag post-peek-thread\">Thread</span>{' '}\n              </>\n            )}\n            <span class=\"post-peek-spoiler\">\n              <Icon icon=\"eye-close\" /> {spoilerText}\n            </span>\n          </>\n        ) : (\n          <div class=\"post-peek-html\">\n            {isThread && (\n              <>\n                <span class=\"post-peek-tag post-peek-thread\">Thread</span>{' '}\n              </>\n            )}\n            {!!content && (\n              <div\n                dangerouslySetInnerHTML={{\n                  __html: emojifyText(content, emojis),\n                }}\n              />\n            )}\n            {!!poll?.options?.length &&\n              poll.options.map((o) => (\n                <div>\n                  {poll.multiple ? '▪️' : '•'} {o.title}\n                </div>\n              ))}\n            {!content &&\n              mediaAttachments?.length === 1 &&\n              mediaAttachments[0].description && (\n                <>\n                  <span class=\"post-peek-tag post-peek-alt\">ALT</span>{' '}\n                  <div>{mediaAttachments[0].description}</div>\n                </>\n              )}\n          </div>\n        )}\n      </span>\n      {!filterInfo && (\n        <span class=\"post-peek-post-content\">\n          {!!poll && (\n            <span class=\"post-peek-tag post-peek-poll\">\n              <Icon icon=\"poll\" size=\"s\" />\n              Poll\n            </span>\n          )}\n          {!!mediaAttachments?.length\n            ? mediaAttachments.map((m) => {\n                const mediaURL = m.previewUrl || m.url;\n                const remoteMediaURL = m.previewRemoteUrl || m.remoteUrl;\n                return (\n                  <span key={m.id} class=\"post-peek-media\">\n                    {{\n                      image:\n                        (mediaURL || remoteMediaURL) && showMedia ? (\n                          <img\n                            src={mediaURL}\n                            width={MEDIA_SIZE}\n                            height={MEDIA_SIZE}\n                            alt={m.description}\n                            loading=\"lazy\"\n                            onError={(e) => {\n                              const { src } = e.target;\n                              if (src === mediaURL) {\n                                e.target.src = remoteMediaURL;\n                              }\n                            }}\n                          />\n                        ) : (\n                          <span class=\"post-peek-faux-media\">🖼</span>\n                        ),\n                      gifv:\n                        (mediaURL || remoteMediaURL) && showMedia ? (\n                          <img\n                            src={mediaURL}\n                            width={MEDIA_SIZE}\n                            height={MEDIA_SIZE}\n                            alt={m.description}\n                            loading=\"lazy\"\n                            onError={(e) => {\n                              const { src } = e.target;\n                              if (src === mediaURL) {\n                                e.target.src = remoteMediaURL;\n                              }\n                            }}\n                          />\n                        ) : (\n                          <span class=\"post-peek-faux-media\">🎞️</span>\n                        ),\n                      video:\n                        (mediaURL || remoteMediaURL) && showMedia ? (\n                          <img\n                            src={mediaURL}\n                            width={MEDIA_SIZE}\n                            height={MEDIA_SIZE}\n                            alt={m.description}\n                            loading=\"lazy\"\n                            onError={(e) => {\n                              const { src } = e.target;\n                              if (src === mediaURL) {\n                                e.target.src = remoteMediaURL;\n                              }\n                            }}\n                          />\n                        ) : (\n                          <span class=\"post-peek-faux-media\">📹</span>\n                        ),\n                      audio: <span class=\"post-peek-faux-media\">🎵</span>,\n                    }[m.type] || null}\n                  </span>\n                );\n              })\n            : !!card &&\n              card.image &&\n              showMedia && (\n                <span\n                  class={`post-peek-media post-peek-card card-${\n                    card.type || ''\n                  }`}\n                >\n                  {card.image ? (\n                    <img\n                      src={card.image}\n                      width={MEDIA_SIZE}\n                      height={MEDIA_SIZE}\n                      alt={\n                        card.title || card.description || card.imageDescription\n                      }\n                      loading=\"lazy\"\n                    />\n                  ) : (\n                    <span class=\"post-peek-faux-media\">🔗</span>\n                  )}\n                </span>\n              )}\n        </span>\n      )}\n    </div>\n  );\n}\n\nfunction PostStats({ post }) {\n  const { reblogsCount, repliesCount, favouritesCount } = post;\n  return (\n    <span class=\"post-stats\">\n      {repliesCount > 0 && (\n        <span class=\"post-stat-replies\">\n          <Icon icon=\"comment2\" size=\"s\" /> {shortenNumber(repliesCount)}\n        </span>\n      )}\n      {favouritesCount > 0 && (\n        <span class=\"post-stat-likes\">\n          <Icon icon=\"heart\" size=\"s\" /> {shortenNumber(favouritesCount)}\n        </span>\n      )}\n      {reblogsCount > 0 && (\n        <span class=\"post-stat-boosts\">\n          <Icon icon=\"rocket\" size=\"s\" /> {shortenNumber(reblogsCount)}\n        </span>\n      )}\n    </span>\n  );\n}\n\nconst { locale } = new Intl.DateTimeFormat().resolvedOptions();\nconst dtf = new Intl.DateTimeFormat(locale, {\n  year: 'numeric',\n  month: 'short',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric',\n});\n\nfunction binByTime(data, key, numBins) {\n  // Extract dates from data objects\n  const dates = data.map((item) => new Date(item[key]));\n\n  // Find minimum and maximum dates directly (avoiding Math.min/max)\n  const minDate = dates.reduce(\n    (acc, date) => (date < acc ? date : acc),\n    dates[0],\n  );\n  const maxDate = dates.reduce(\n    (acc, date) => (date > acc ? date : acc),\n    dates[0],\n  );\n\n  // Calculate the time span in milliseconds\n  const range = maxDate.getTime() - minDate.getTime();\n\n  // Create empty bins and loop through data\n  const bins = Array.from({ length: numBins }, () => []);\n  data.forEach((item) => {\n    const date = new Date(item[key]);\n    const normalized = (date.getTime() - minDate.getTime()) / range;\n    const binIndex = Math.floor(normalized * (numBins - 1));\n    bins[binIndex].push(item);\n  });\n\n  return bins;\n}\n\nexport default Catchup;\n"],"names":["catchupUrl","FILTER_CONTEXT","RANGES","label","value","FILTER_LABELS","FILTER_SORTS","FILTER_GROUPS","FILTER_VALUES","Filtered","Groups","Boosts","Replies","Original","FILTER_CATEGORY_TEXT","SORT_BY_TEXT","createdAt","repliesCount","favouritesCount","reblogsCount","density","Catchup","useTitle","masto","instance","api","searchParams","setSearchParams","useSearchParams","id","get","uiState","setUIState","useState","showTopLinks","setShowTopLinks","currentAccount","useMemo","store","session","isSelf","accountID","fetchHome","maxCreatedAt","maxCreatedAtDate","Date","debug","allResults","mainloop","results","homeIterator","assignFollowedTags","i","item","createdAtDate","selfPost","reblog","filterInfo","isFiltered","statusKey","sKey","states","addedResults","resolve","Promise","console","status","s","replyToStatus","find","catchupRangeRef","useRef","NS","setPosts","useCallback","duration","handleCatchupClick","now","db","catchupID","catchup","posts","count","length","useEffect","error","a","b","reloadCatchups","useReducer","c","setLastCatchupEndAt","prevCatchups","setPrevCatchups","lastCatchupEndAt","catchups","ns","getCurrentAccountNS","ownKeys","key","ownCatchups","trimmedCatchups","lastCatchups","restCatchups","endAt","startAt","queueMicrotask","reloadCatchupsCount","filtereds","groups","boosts","replies","followedTags","originals","post","_followedTags","inReplyToId","inReplyToAccountId","_e","thePost","__FILTER","card","url","links","sharers","links2","link","topLinks","sort","shared","linksLoop","likes","filteredPosts","authors","authorCounts","selectedFilterCategory","filteredPosts2","setSelectedAuthor","range","sortBy","authorsHash","setSortOrder","authorCountsMap","postFilterMatches","account","set","boostedPosts","__BOOSTERS","selectedAuthor","filteredPostsMap","map","authorID","index","authorCountsList","Object","sortedFilteredPosts","aAccountID","forEach","authorIndices","order","bAccountID","aIndex","bIndex","postDensity","bDensity","aDensity","sortOrder","groupBy","prevGroup","authorsListParent","autoAnimated","current","postsBarType","autoAnimate","_jsx","postsBar","postsBins","binByTime","posts2","isFiltered2","children","lastCatchupRange","scrollableRef","groupByText","showToast","authorUsername","sortOrderIndex","authorElement","scrollableRect","_a","authorRect","left","right","showHelp","setShowHelp","itemsSelector","jRef","useHotkeys","activeItem","activeItemRect","top","inline","allItems","behavior","activeItemIndex","nextItem","document","from","topmostItem","scrollIntoView","block","itemRect","kRef","prevItem","hlRef","_","handler","_b","keys","indexOf","escRef","dotRef","_jsxs","ignoreModifiers","node","enableOnFormTags","preventDefault","e","NavMenu","Link","closest","Icon","to","_Fragment","icon","size","type","class","onClick","width","alt","setRange","min","max","pc","dtf","t","yes","setSelectedFilterCategory","setSortBy","hidden","setGroupBy","style","transform","blurhash","description","image","language","title","imageDescription","height","publishedAt","domain","accentColor","averageColor","labAverageColor","oklab2rgb","join","displayName","Avatar","avatarStatic","filterCounts","name","checked","toLowerCase","onChange","author","avatar","paddingInline","opacity","disabled","id2","showSeparator","Fragment","IntersectionPostLineItem","Modal","onClose","group","isFollowedTags","visibility","PostLine","debugHover","isReplyTo","shiftKey","log","NameText","bot","squircle","oldProps","newProps","root","props","show","setShow","RelativeTime","format","observer","ref","IntersectionObserver","entry","isIntersecting","unobserve","rootMargin","observe","MEDIA_DENSITY","pollContent","poll","acc","cur","spoilerText","htmlContentLength","content","mediaAttachments","CARD_DENSITY","PostPeek","sensitive","isThread","_thread","showMedia","postText","emojis","emojifyText","o","__html","options","multiple","m","remoteMediaURL","mediaURL","MEDIA_SIZE","src","loading","onError","target","gifv","video","audio","PostStats","shortenNumber","locale","data","numBins","dates","date","bins","Intl","minDate","binIndex","DateTimeFormat"],"mappings":"wdAAA,MAAeA,GAAA,GAAA,IAAA,IAAA,wBAAA,YAAA,GAAA,EAAA,KC6CTC,GAAiB,OAEjBC,EAAS,CACb,CAAEC,MAAO,cAAeC,MAAO,CAAE,EACjC,CAAED,MAAO,eAAgBC,MAAO,CAAE,EAClC,CAAED,MAAO,eAAgBC,MAAO,CAAE,EAClC,CAAED,MAAO,eAAgBC,MAAO,CAAE,EAClC,CAAED,MAAO,eAAgBC,MAAO,CAAE,EAClC,CAAED,MAAO,eAAgBC,MAAO,CAAE,EAClC,CAAED,MAAO,eAAgBC,MAAO,CAAE,EAClC,CAAED,MAAO,eAAgBC,MAAO,CAAE,EAClC,CAAED,MAAO,eAAgBC,MAAO,CAAE,EAClC,CAAED,MAAO,gBAAiBC,MAAO,EAAG,EACpC,CAAED,MAAO,gBAAiBC,MAAO,EAAG,EACpC,CAAED,MAAO,gBAAiBC,MAAO,EAAG,EACpC,CAAED,MAAO,kBAAmBC,MAAO,EAAG,CAAC,EAGnCC,GAAgB,CACpB,WACA,UACA,SACA,gBACA,SACA,UAAU,EAENC,GAAe,CACnB,YACA,eACA,kBACA,eACA,SAAS,EAELC,GAAgB,CAAC,KAAM,SAAS,EAChCC,GAAgB,CACpBC,SAAU,WACVC,OAAQ,QACRC,OAAQ,QACRC,QAAS,QACT,gBAAiB,eACjBC,SAAU,UACZ,EACMC,GAAuB,CAC3BL,SAAU,iBACVC,OAAQ,cACRC,OAAQ,SACRC,QAAS,UACT,gBAAiB,qBACjBC,SAAU,gBACZ,EACME,GAAe,CAEnBC,UAAW,CAAC,SAAU,QAAQ,EAC9BC,aAAc,CAAC,iBAAkB,cAAc,EAC/CC,gBAAiB,CAAC,eAAgB,YAAY,EAC9CC,aAAc,CAAC,gBAAiB,aAAa,EAC7CC,QAAS,CAAC,cAAe,YAAY,CACvC,EAEA,SAASC,IAAU,CACjBC,GAAS,WAAY,UAAU,EACzB,KAAA,CAAEC,MAAAA,EAAOC,SAAAA,GAAaC,GAAI,EAC1B,CAACC,EAAcC,CAAe,EAAIC,GAAgB,EAClDC,EAAKH,EAAaI,IAAI,IAAI,EAC1B,CAACC,EAASC,CAAU,EAAIC,EAAS,OAAO,EACxC,CAACC,EAAcC,CAAe,EAAIF,EAAS,EAAK,EAEhDG,EAAiBC,EAAQ,IACtBC,GAAMC,QAAQT,IAAI,gBAAgB,EACxC,CAAE,CAAA,EACCU,KAAwBC,IAAcL,EAE5C,eAAeM,EAAU,CAAEC,aAAAA,CAAAA,EAAgB,WACzC,MAAMC,EAAmBD,EAAe,IAAIE,KAAKF,CAAY,EAAI,KACzDG,KACFC,EAAexB,EAAA,GAAA,UAAA,KAAA,KAAA,CACrB,MAAqBA,EAA6B,CAAA,EAAYyB,EAC9DA,OAAU,GAAA,CACJ,MAAAC,EAAA,MAAAC,EAAA,OACID,CACA,MAAA7C,CAAEA,EAAAA,EAAM,GAAI6C,GAAAA,MAAAA,EAAAA,OAAAA,CAClB,SAAmB7C,EAAAoB,CAAA,EAEX2B,IAAAA,EAAAA,GACN,QAAmBC,EAAA,EAAAA,EAAAhD,EAAA,OAAAgD,IAAA,CACnB,MAAAC,EAAajD,EAAOA,CAAAA,EACZiD,GAAc,IAAA,KAAAA,EAAA,SAAA,EACpB,GAAA,CAAAT,GAAsBU,IAAuBV,EAAA,CAGrCW,MAAAA,GAFiBD,IAAAA,GAAAA,EAAAA,EAAAA,SAAAA,YAAAA,EAAAA,UAAAA,YAAAA,EAAmC,KAAAD,EAAA,QAAA,EAAA,GAGnDG,SAAuBH,uBAAAA,WAC9BA,EAAA,SAAApD,EAAA,EACMwD,IAAAA,GAAAA,YAAAA,EAAAA,UAEJC,OAIF,SAAmCL,EAAA,UAAAI,EACnCJ,MAAiBI,EAAAA,GAAAA,EAAAA,GAAAA,CAAAA,EAGjBJ,EAAA,cAAaM,GAAe9B,mBAAY+B,CAAA,EAAA,CAAA,GAAAC,GAAA,mBAAAD,CAAA,CAAA,EAAA,CAAA,EACxCP,EAAqBQ,KAAAA,CAAAA,EAIrBd,IACAe,CAGA,GAAA,CAAAA,EAGF,MAAmBd,CAEnB,CAAA,KAEG,OAAAA,EAEP,MAAA,IAAA,QAAAe,GAAA,WAAAA,EAAA,GAAA,CAAA,CAEA,MAAUC,QAEVC,CAEF,OAAAlB,EAAA,QAAAmB,GAAA,CACF,GAAAA,GAAA,MAAAA,EAAA,YAAA,CAIAnB,MAAAA,EAA+BA,EAAA,KAAAoB,GAAAA,EAAA,KAAAD,EAAA,WAAA,KACJ,CAAAE,EAAA,cACvBA,UAAiCC,GAI/BD,CAAwB,CAC1B,EACFrB,CAAA,CAGKA,KAAAA,CAAAA,EAAAA,CAAAA,EAAAA,EAAAA,CAAAA,CAAAA,EACTuB,EAAAC,KAEMC,GAAQC,EAAAA,IAAYxC,GAAW,EAAA,CAAA,CAAA,EAC/BqC,GAAyBI,GAAA,MAAA,CAC/B,SAAAC,CACMC,EAAAA,KAAAA,CAA0CD,MAAAA,EAAAA,KAAAA,MAAoBhC,EAAAgC,EAAAE,EAAAF,EAAA,KAC5DE,EAAAA,SAAe,EACflC,MAAAA,EAAAA,MAA0BkC,EAAAA,CAChC7C,aAAAA,CACA,CAAMiB,EAA4BN,EAAAA,GAAAA,EAAAA,IAAAA,GAAAA,CAAAA,GAAa,GAAC,CAGhD,MAAmBmC,GAAA,QAAA,IAAKC,EAAS,CAC7B,GAAAA,EACID,MAAGE,EACPnD,MAAIkD,EAAAA,OACJE,QAAOhC,EACPiC,MAAOjC,CAAQkC,CAAAA,EACNxC,EACFkC,CACR,GAAAE,CACDpD,CAAgB,CAAA,MAAMoD,CAAAA,CAAAA,EAAAA,CAAW,CAAA,EAAAK,OACvB,CACFC,GACV,SAAA,CACG,MAAAL,EAAA,MAAAF,GAAA,QAAA,IAAAjD,CAAA,EAEKmD,IACAA,EAAA,MAAA,KAAA,CAAAM,EAAAC,IAAAD,EAAA,UAAAC,EAAA,UAAA,EAAA,EAAA,EACOd,EAAAO,EAAA,KAAA,EACXhD,EAAgB,SAAM8C,EAEpBE,KACAP,IAAiBQ,YACjBjD,EAAAA,CAAAA,CAAAA,EACFA,EAAA,OAAA,EACC,EACL,CAAAH,CAAA,CAAA,EACE4C,KAAAA,CAAAA,EAAWe,CAAA,EAAAC,GAAAC,GAAAA,EAAA,EAAA,CAAA,EACX1D,CAAAA,EAAkB2D,CAAA,EAAA1D,EAAA,IAAA,EACpB,CAAA2D,EAAAC,EAAA,EAAA5D,EAAA,CAAA,CAAA,EACFmD,GAAO,IAAA,EAED,UACN,GAAOU,CACD,MAAeD,EAAAA,MAAAA,GAAAA,QAAmB5D,KAAAA,EACxCmD,GAAUW,EAAM,OAAA,CACD,MAAAC,EAAAC,KACPC,EAAAH,EAAA,OAAAI,GAAAA,EAAA,WAAA,GAAAH,CAAA,GAAA,CAAA,EACF,GAAMD,EAAW,OAAA,CACbA,MAAiB,MAAAjB,GAAA,QAAA,QAAAoB,CAAA,EACnBE,EAA+B,KAAA,CAAAd,EAAAC,IAAAA,EAAA,MAAAD,EAAA,KAAA,EACzBY,IAAAA,IAA2BC,MAAAA,OACbC,EAAA,MAAA,CAAA,EAClB,MAAkBC,EAAMvB,SAA0B,CAClDsB,KAAAA,CAGIE,GAAeF,EACfG,MAAAA,EAEEF,QAAAA,EACE,MAAAG,CAAA,EAAE3E,EAAIqD,MAAAA,CAAOuB,GAAAA,EAASD,MAAAA,EAAUd,QAAAA,EAC/B,MAAAc,CAAA,CACL3E,CACAqD,EACAuB,GAAAA,CAAAA,EACAD,EAAAA,EAAAA,CAAAA,EAAAA,KAAAA,EACFJ,EAAA,KACFE,EAAC,KACDT,eAAAA,IAA+B,CACXS,EAAAA,QAGNxB,GAAA,QAAA,QAAAyB,EAAA,IAAAb,GAAAA,EAAA,EAAA,CAAA,EAAA,KAAA,IAAA,CACCa,EAAA,IAEfG,CAAAA,EAAAA,MAAAA,GAAqB,CAAA,CAAA,CAGjB5B,CAAGE,EAIgB,MACjB,CAEEf,CAAe,MAChB,CAAA,CACL4B,GAAA,CAAA,CAAA,CAAA,IAGF,EAAA,CAAAc,CAAA,CAAA,EACFvB,GAAA,IAAA,CACFrD,IAAA,SACFyD,GACiB,EACjB,CAAAzD,IAAA,OAAA,CAAA,EACA8D,KAAAA,CAAAA,KAAkB,EAAAxD,EAAA,IAAA,gBACpB,IAAGuE,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,EACL,MAAIN,EAAAA,CAAAA,EACJvB,UAAgB8B,KAAAjC,EAAA,cAEG2B,IACjBM,EAAA,SAAA,YACcA,EAAA,OAEVL,IACAD,EAAAA,SACFC,WAKa,QACfC,IACEI,WAAoB,UAClBN,EAAAA,EAAAA,gBAAAA,MAAAA,EAAAA,QACAM,IACFA,EAAA,SAAuB,gBACrBL,EAAAA,aAAAA,EAAAA,uBAAAA,EAAAA,EAAAA,UAAAA,YAAAA,EAAAA,KACAK,IACFA,EAAA,SAAwB,UAEtBA,IACFA,EAAA,SAAgBC,YAEdD,MAAAA,EAAgBA,EAAA,QAAAA,EAClB,gBACOE,cACAC,EAAAA,EAAuBH,OAAvBG,MAAAA,EAAuBH,QAAAA,EAAAA,SAAAA,MAAAA,YAC5BI,GAAAC,EAAA,OAAA,YAAAD,GAAA,QAAA,OAAA,CACAP,KAAAA,CACAG,KAAAA,EACK,gBAAAhG,GACL+F,aAAAA,EACAC,EAAAA,EACF,GAAA,CAEMK,IAAAA,CACN,EACOC,EAKGC,GAAFC,EAAAA,EAAA,QAAA,MAAA,EAAA,EAAED,CAAAA,EAAAA,CAAAA,EAAMvG,EAAAA,CAAAA,EAAAA,CAAiBC,OAAAA,EAAAA,GAAiBoG,KAAAA,EAC5C,OAAA,EAAEG,QAAAA,CAAAA,EAAAA,OAAAA,EAAQD,MAAAA,GACRC,OAAYvG,EAClB,MACEwG,CAAa,KACK9F,CAAAA,EAAAA,QAAAA,KAAAA,IAAAA,GAAAA,KAAAA,EAAAA,QAAAA,EAAAA,EAChB4F,SAEAG,EAAAA,CAAAA,EAAUV,SAAYW,EACf3G,CAAAA,EAAAA,QAAAA,KAAAA,EAAAA,OAAAA,EACCC,EAAAA,CAAAA,EAAAA,SAAAA,EAAAA,KACV0G,EAAAH,CAAA,EAAA,OAAAxG,GACK2G,EAAAH,CAAA,EAAA,QAAAvG,GAEH,CACF,CACAwG,CACAA,IAAAA,EAAS,CAAA,EACT,UAAUD,KAAAA,EACRC,EAAAA,KAAS,CACTA,IAAAA,EACF,GAAAE,EAAAC,CAAA,CAAA,CACF,EAeExC,GAbNyC,EAAA,KAAA,CAAAzC,EAAAC,aAEiBA,EAAA,OACNuC,GACTC,EAAAA,OAAcxC,EAAA,OACPuC,EACLxC,SAAaC,EAAA,OACd,GACHD,EAAA,OAAAC,EAAA,OACSyC,EACH1C,EAAE2C,QAAWA,MAAe,GAC5B3C,EAAE2C,QAAWA,MAAe,GACA,EAC5B3C,SAAawB,GAAeoB,EAC5B5C,UAAY6C,GAAAA,EAAAA,EAAAA,OAAAA,IAAAA,CAAc,KAAA,CACxBA,OAAAA,CAAiB,EAAOJ,EAAA3E,CAAA,EACvB,GAAA6E,GAAA,EAAA,CACRF,EAAAA,EAAA,MAAA,EAAA3E,CAAA,EAGG2E,OACFG,CAAW,CACDD,MAAAA,CAAAA,CAAO,WACf,OAAIA,EACSF,OAAAA,EACLG,QAAAA,EACR,gBAAAlB,EACF,SAAAC,CACF,EAAAc,CAAA,CAEA,EAAA,CAAA9C,CAAO,CACL,EACY2B,CAAAA,EAAAA,EAAAA,EAAAA,EAAAA,KAAAA,EACFC,CAAAA,EAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EACAC,CAAAA,EAAAA,EAAAA,EAAAA,EAAAA,CAAAA,EACCC,CAAAA,EAAAA,EAAAA,EAAAA,EAAAA,WAAAA,EACQC,CAAAA,EAAAA,EAAAA,EAAAA,EAAAA,KAAAA,EACPC,CAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAEJ,CAAAmB,GAAAC,EAAAC,CAAA,EAAAjG,EAAA,IAAA,CAEZ,MAAI4C,EAAM,CAAA,EAEHsD,EAAiD,IAAA,IACxD,IAAMC,EAAiBC,EAAiB,OAAAvB,IAExC,MAAOwB,MAA6B,OAAAxB,EAAA,WAAA1G,GAAA+H,CAAA,EAEpC,OAAOI,IACDC,EAAYC,EAAY,QAAA,EAAA,YACxBC,EAAoB,IAAA5B,UAAa,IAAI4B,EAAA,IAAA5B,EAAA,QAAA,EAAA,GAAA,GAAA,CAAA,IAIzC,CAAM4B,EAEFV,MAAAA,EAAgBnD,CAAAA,EAClB,OAAAuD,aAC6B,CAGzBO,EAAmB,SACrBH,EAAiBI,EAAAA,OAAU,EAAI9B,GACf+B,EAAAA,EACTD,OAAAA,EAAQnH,EACZiH,WAELI,EAAAhC,EAAA,OAAA,EAAA,EAAA,WAAA,IAAAA,EAAA,OAAA,EAGDgC,EAAAhC,EAAA,OAAA,EAAA,EAAA,WAAA,IAAA,IAAA,CAAAA,EAAA,OAAA,CAAA,EAIDkB,EAAAA,aAEIc,EAAiBhC,EAAAA,OAAYrF,EAAAA,EAAKqF,EAE0B,CAAA,EAE3CA,GAAAA,EAAgBiC,IAAAA,KAC/BX,EAAAA,EAAA,OAAAtB,GAAAA,EAAA,QAAA,KAAAkC,GAAA,CAAA,GAAAlC,EAAA,YAAA,CAAA,CAAA,EAAA,KAAA5B,GAAAA,EAAA,KAAA8D,CAAA,CAAA,GAEK,CAAAZ,EAAAI,EAAA,OAAA,YAAAE,CAAA,CAAA,CACQ5B,EAAAA,CAAAA,EAAYrF,EAAMqF,CAAAA,CAAAA,EACjCmC,GAAAhH,EAAA,IAAA,CACF,MAAAiH,EAAA,CAAA,EACF,OAAAlB,GAAC,QAAAlB,GAAA,CAEDoC,EAAsBR,EAAAA,EAAAA,EAAAA,CACpBV,CAAAA,EAKFkB,CAEA,EAAA,CAAAlB,EAAuBQ,CAAAA,EACGQ,EAAAA,EAAAA,IAAAA,YAAsBd,CAAA,EAAA,KAAA,CAAAhD,EAAAC,IAAA+C,EAAA/C,CAAA,EAAA+C,EAAAhD,CAAA,CAAA,EAAA,CAAAgD,CAAA,CAAA,EAE5Ce,KAAiC,IAAA,CACrC,MAAMC,EAAO,CAAA,EACblB,OAAAA,UAAgC,CAAAmB,EAAAC,IAAA,CAC1BtC,EAAWA,CAAAA,EAAAA,CAAAA,CAChB,EACMoC,GAAAA,OAAAA,GAAAA,CAAAA,EAAAA,QAAAA,EAAAA,KAAAA,CAAAA,EAAAA,IAAAA,CACLlB,GAAAA,IAAc,UAAA,CAEZqB,MAAAA,EAAmBpH,UAErBqH,GAMEC,EAAAA,EAAAA,eACmBC,CAAA,EACNC,EAAAA,EAASN,CAAoB,EAC5CO,IAA0BN,EAC3B,GAAAO,IAAA,EACM3B,OAAAA,CAIKwB,CACAI,GAAAA,IAAAA,cACAC,EAAAA,EAAAA,UACAC,EAAAA,EAAAA,UACNvB,IAAuBuB,WAAAA,EAAAA,CAAAA,IAAAA,EAAAA,CAAAA,GACvB,mBAAiB3E,EAAA,UAAA,EAAA,GAGnB,GAAAoD,IAAA,UAAA,CACA,QAA4BwB,GAAA7E,CAAA,EACpB9B,EAAU8B,GAAAA,CAAAA,EAChBC,OAAIA,IAAYA,QACYD,OAE5B8E,EAAAC,EAAA,EAAA,EAEF,CACQA,OAAAA,IAAAA,MACAD,EAAAA,CAAAA,OAAwB,EAAA,GAErBC,EAAAA,CAAAA,EAAAA,KAAsB,EAAI,EAEjC,CAAOD,CAA0B,EACnC,CAAAhC,GAAAO,EAAA2B,EAAAC,EAAAd,CAAA,CAAA,EACFe,GAAAjG,GAAA,IAAA,EACAkG,GAAyBlG,GAAA,IAAA,EACvBmG,GAAenG,GAAMoE,EAAM,EAAQvD,GAC9B,IAAA,CACLH,EAAA,OAAe,KAAM0D,GAAc,SAEtC8B,GAAA,UACDrC,GAAAA,GAAkCmC,QAAAA,CAEhCC,SAAAA,GAEN,CAAMC,EACAC,GAAAA,WAEJ,EAAIzF,CAAAA,EAAAA,EAAsByF,CAAaC,EAAS,MAAAC,GAAA3F,EAAA,OAAA,IAAA,KAAA,KAC5CwF,KAA2B,IAC7BI,UACY,KACX5F,EAAA,IAAAiC,GAAA,CACDwD,MAAAA,EAAuBrB,GAAAnC,EAAA,EAAA,EACzB,OAAA4D,EAAA,OAAA,CACSL,MAAAA,YAAAA,EAAkB,qBAAA,EAAA,EAE7B,EAAqBxF,EAAAA,EAAAA,CAErB,CAAM8F,EACJ,CAAA1B,EAAqB,CAAA,EAAa2B,GAAA3I,EAAA,IAC3B4C,KAAoB,MAGzB,EAAAA,GAAA,MAAAA,UAGY,KACTgG,GAAAhG,EAAA,YAAA,GAAA,EAEJ,IAAA,CAAAiG,EAAA,IACC7B,EAAAA,MAAiB,CAEf2B,MAAAA,YACAJ,SAAiBM,EAAA,IAAAhE,GAAA,CAAa,MAAAiE,EAAA9B,GAAAnC,EAAA,EAAA,EACtB/B,OAAAA,EAAAA,OAAAA,CAAe,MAAA,YAAAgG,EAAA,qBAAA,EAAA,EAC3B,EAAaF,EAAAA,EAAAA,CACb,CAAA,CACE,EAAA,CAAA,CACE,EAAsBG,CAAAA,EACb9B,CAAAA,EACC5F,EAAAA,GAA8BwD,IAAAA,EACpCmE,GACEhJ,EAAA,IAAAyD,GAKH,KAAA,IAAA,EAAAA,GAAA,IAAA,GAAA,GAJUoB,KAIV,CAACpB,EACC4C,CAAA,CAAA,EAAAtD,GAER,IAAA,CACH,GAAIiE,IAAAA,UAEEiC,OAGAD,MAAAA,EAAmBhJ,GAAcgG,EAAAe,CAAA,EAAAf,EAAAe,CAAA,EAAA,SAAA,GAEhCtD,EAAAA,IAAAA,MAAAA,EAAAA,EAAyByF,EAAA,CAC9B,QAAa1G,SAAwC,EAGvDO,IAAAA,EAAgBoG,GAAA,CACd,SAAgB,IACVC,KAAAA,WAAAA,IACsBrC,GACtBf,WAAQe,GAAAA,EACR,QAAAqC,CAAA,GAAA,EAAA,KAAA1K,GAAA4H,CAAA,EAAA+C,CAAA,CAAA,SAAAnB,EAAA,gBAAAA,IAAA,UAAAgB,EAAAhB,CAAA,EAAA,EAAA,GAAA,EAAA,EACN,CAAMmB,EACN,MAAoB,IAAA,QAClB1C,EAAAA,GAAAA,YAAAA,EAAS,YAATA,MAAAA,EAAAA,KAAAA,EAAS,CAEX,EAAA,CAAAjH,IAAsBqH,EAAAT,EAAA2B,EAAAC,EAAAlC,CAAA,CAAA,EAAAjD,GACV,IAAA,OAAA,GAAAgE,GACHf,EAAAe,CACgBb,EAAAA,CAQxB,MAAAoD,EAAAlB,GAAA,QAAA,cAAA,iBAAArB,CAAA,IAAA,EACYwC,GAAAC,EAAApB,GAAA,UAAA,YAAAoB,EAAA,wBACQC,EAAAH,GAAA,YAAAA,EAAA,wBACrBG,EAAA,KAAAF,EAAA,MAAAE,EAAA,MAAAF,EAAA,MAGArD,EAAAA,eACAa,CAOQ,MAAM,UACM,OAAA,SACdf,iBAEF,CAAA,EAGMuD,EAAAA,IACcjB,GACdmB,EAAAA,gBACN7H,MAAY,iBACY8H,mBACCC,QAAAA,EAEJA,CAMnBL,EAAAA,CAAAA,EAAAA,CAA6B,CAAA,EAAA,KAAA,CAAAM,GACpBC,EAAA,EAAAjK,EAAA,EAAA,EAAAkK,GACC,yBAAAC,GACEC,GAAA,IAAA,IAAA,CAAA,MACZC,EAAC,SAAA,cAAA,QAAAH,EAAA,EACHI,EAAsBC,GAAAA,YAAAA,EAAS,wBAC7Bb,EAAAA,MAA6B,KAAAL,EAAA,QAAA,iBAAAa,EAAA,CAAA,EAAA,GAAAG,GACpBC,EAAA,IAAAjB,EAAA,QAAA,cAAAiB,EAAA,OAAA,EAAA,CAAA,MACPE,EAAQC,EAAA,QAAAJ,CAAA,EACRK,EAAUD,EAAAE,EAAA,CAAA,EACZC,IACFA,EAAA,MAAA,EACFA,EAAA,eAAA,CACF,MAAA,SACkBxE,OAAAA,SAEb4D,SAAqB,QAE5B,CAAsB,EAIlB,KAAmBa,CACbP,MAAAA,EAAAA,OAAmDlJ,GAClC0J,EAAAA,8BAQfH,EACAC,IACNG,EAAc,MAAA,EACZH,EAAe,eAAA,CACfA,MAASI,UACPC,OAAO,SACPT,SAAQ,QAAA,CAAA,EAGZ,CAAA,EACK,CACCO,eAAAA,GACEG,gBAAAA,EACN,CAAA,EACDC,GAAAf,GAAA,IAAA,IAAA,CACD,MAAIW,EAAa,SAAA,cAAA,QAAAb,EAAA,EACfa,EAAkBV,GAAA,YAAAA,EAAA,wBAClBU,EAA2B,MAAA,KAAA1B,EAAA,QAAA,iBAAAa,EAAA,CAAA,EAAA,GAAAG,GAClBC,EAAA,IAAAjB,EAAA,QAAA,cAAAiB,EAAA,OAAA,EAAA,CAAA,MACCK,EAAAF,EAAA,QAAAJ,CAAA,EAAA,IACRK,EAAUD,EAAAE,EAAA,CAAA,EACXS,IACHA,EAAA,MAAA,EACFA,EAAA,eAAA,CAEF,MAAA,SACkB,OAAA,SACC,SAAA,QAAA,CAErB,EAKI,KAAmBP,CACbP,MAAAA,EAAAA,OAAmDlJ,GAAA,CACzD,QAAuB0J,EAAAA,wBAIrBT,OAAAA,WACeE,EAAMlB,MAAAA,CAGrB,CAAMsB,EACFS,IACJL,EAAc,MAAA,EACZK,EAAe,eAAA,CACfA,MAASJ,UACPC,OAAO,SACPT,SAAQ,QAAA,CAAA,EAGZ,CAAA,EACK,CACCO,eAAAA,GACEG,gBAAAA,EACN,CAAA,EACDG,GAAAjB,GAAA,OAAA,CAAAkB,EAAAC,IAAA,WACD,MAAIR,EAAaQ,EAAA,KAAA,CAAA,EACfR,GAAAA,EAAkB,CAClBA,MAAAA,EAAYC,EAAe,QAAA7D,CAAA,EACzB8D,IAAO,IACC1D,EAAA,GAAAA,EAAAC,EAAA,SACRkD,EAAUlD,EAAAD,EAAA,CAAA,CAAA,GACXqC,EAAAP,EAAA,UAAA,MAAAO,EAAA,SAEL1F,IAAA,KAEFqD,EAAAC,EAAA,OAAA,GAAAD,GAAA,IACkBf,EAAAgB,EAAAD,EAAA,CAAA,CAAA,GACCiE,EAAAnC,EAAA,UAAA,MAAAmC,EAAA,QAQjB,MAAMtH,IAAcuH,MACpBjF,EAAoBgB,EAAA,CAAA,CAAA,GACZD,EAAAA,EAAQC,UAARD,MAAAA,EAAyBmE,QAE7B,EAAA,CACoBlE,eAAAA,GAClB6B,gBAAAA,GACF,iBAAA,CAAA,OAAA,CAAA,CACF,EACEsC,GAAYnE,GAAAA,MAAAA,IAA0B,OAClBA,EAAAA,IAAAA,GAClB6B,EAAAA,EAAAA,UAAAA,MAAAA,SAA6B,EAC/B,CACF,eAAA,GACF,mBACoB7B,iBAAAA,CAAAA,OAAAA,CAClB6B,CAAAA,EACFuC,GAAAxB,GAAA,IAAA,IAAA,QAEFR,EAAAP,EAAA,UAAA,MAAAO,EAAA,SAAA,CACkB,IAAA,EACC,SAAA,QAAA,EACS,EAE9B,CAEM+B,eACJ,GAEEnF,gBAAAA,GACA6C,yBAA6B,CAAA,CAE/B,EAAA,OACkBwC,EAAA,MAAA,CAChBC,IAAiBC,GAAA,CACjBC,EAAAA,QAA0BD,EAE9B5B,GAAA,QAAA4B,EAEMH,GAAAA,QACJG,EAEE1C,GAAAA,UACEkB,GAAK,QAAAwB,CAAA,EAEP,GAAC,eAEH,MAAA,iBACEE,SAAgB,KAChBH,SAAiB,CAAAD,EAAA,MAAA,CACjBG,MAAAA,0BAEJ,SAAA,CAAAnD,EAAA,SAAA,CAEA,MACE,GAAA/I,IAAA,UAAA,UAAA,EAAA,WACiBoM,GAAA,OACb7C,EAAAA,OAAwB0C,QAAAA,WAAAA,IACTA,EAAAA,EAAAA,UAAAA,MAAAA,EAAAA,SAAAA,CACAA,IAAAA,EACCA,SAAAA,QAChBJ,EAEC,EACG,SAAAE,EAAA,MAAA,CACG,MAAA,cAAI1C,SAEb0C,CAAAA,EAAA,MAAA,CAAW,MAAA,cAAyB1C,SAClC,CAAAN,EAAAsD,GAAA,CAAA,CAAA,EAAArM,IAAA,WAAA+I,EAAAuD,GAAA,CACU,GAAEtM,iBACM,eACV,SAAUuM,EAAAA,GACZhD,KAAAA,WACO,KAAA,GAAA,CACK,CACX,CAAA,EAAAvJ,IAAA,SAAA+I,EAAAuD,GAAA,CACH,GAAA,IACF,MAAA,eAAEjD,SAEFN,EAAAyD,EAAA,CAAW,KAAA,OAAanD,KACtB0C,GAAA,CAAW,CAAA,CAAa1C,CAAAA,CAGf,CAAA,EAACoD,EAAG,KAAA,CAAA,SAAiBzM,IAAA,SAAA+L,EAAAW,EAAA,CAAcrD,SACtCN,aAAKA,EAAA,MAAA,CAAC4D,SAAK,MAAA,CAAA,CAAWC,CAAK,CAAA,CAAK,CAAA,EAC5B7D,EAEK,MAAA,CACN,MAAI,cAAA,SAAU/I,IAAA,SAAAA,IAAA,WAAA+I,EAAA,SAAA,CAAcM,KAAAA,SAC1B,MAAM,QAAA,QAAY,IAAA,CAAKc,GAAA,EAAA,CAE/B,EAEHpB,SAAA,MAAA,CACG/I,CACC,CAAA,CAAA,CACW,CAAA,CAAK,CAAA,EAAA+L,EAAU,OAAA,CAAA,SACxB,CAAA/L,IAAA,SAAA+L,EAAA,MAAA,CACH,MAEHhD,gBAAA,SAAW,CAAAgD,EAAA,KAAA,CAAa1C,SACrBrJ,CAAY,YAAA+I,EAAA,MAAuB,CAEhC8D,SAAK,MAAA,CAAA,CACLC,CAAM,CAAA,EACNC,YAAe,CACb5C,SAAAA,CAAAA,EAAY,UAAI,CAClB,SAAA,eAAA,CAAA,EACDpB,EAAA,IAAA,CAEO,SAAA,qLAAA,CAEN,EAAAA,EAAA,MAAA,CACH,IAAA9K,GAEP8N,MAAA,OACG/L,OAAY,MACA,IAAA,wBAAA,CAAeqJ,EAAAA,EACxB0C,IAAAA,CAAA,SACWhD,EAAAA,SAAAA,CAAK,KAAA,SAAU,QAAAqD,GAAA,CAE1BL,EAAA,OAAA,QAAA,SAAA,EAAA,KAAA,EAAA1C,EACW,SAAA,gBAAA,CACTN,CAAA,CAAA,CAAAM,CAAG,CAIH,EACAN,EAAAA,IAAA,CAAA,SACO9K,mDAAAA,CAAAA,EACL+O,EAAM,IAAA,CAAA,SACCjE,EAAA,IAAA,CACPkE,SAAI,yBAAA,CACL,CACD,CAAA5D,EAAAA,EAAAA,OACE,MACO,eAAA,YACW,QAAA,CACd+C,IAAAA,EACF,KAAA,QAAA,MACDzF,EAED,IAAQxI,EAAA,CAAA,EAAA,MACN,IAAAA,EAAAA,EAAA,OAAA,CAAA,EAAA,MAEN4K,KAAA,IAAG,KAAA,iBACHA,SAAAqD,GAAAc,GAAA,CAAAd,EAAA,OAAA,KAAA,CAAA,CAAA/C,EAAAA,IAAAA,EACE,OAAA,CAAAA,MAAG,CAA0B,MAAA,KAE/B0C,EAAW,SAAA,CAAA5N,EAAAwI,EAAA,CAAA,EAAA,MAAAoC,EAAA,KAAA,CAAA,CAAA,EAAAA,EAAA,QAAA,CAAcM,MACvBN,gBACOxG,SAAAA,GAAAA,EAAAA,EAAAA,OAAAA,CAAAA,EAAAA,MAAAA,gBAAAA,GAAAA,IAAAA,KAAAA,KAAAA,IAAAA,EAAAA,EAAAA,GAAAA,GAAAA,GAAAA,CAAAA,CAAAA,CACA,CAAA,CAAA,CAAA,EACEoE,EAAAA,WAAAA,CACPwG,GAAAA,iBACAC,SAAKjP,EAAciF,IAAAA,CAAAA,CACd,MAAAhF,EACA,MAAAC,CAAA,MACY6O,SAAAA,CAChB,MAAA7O,EAEM,MAAAD,CAAA,CAAA,CACL4O,CAAO,CACT,EAAA,IAAAjE,EAAA,SAAA,CAAEM,KAEDlL,SAED,QAAa,IAAA,CAAekL,KAChBlL,EAAAA,EAAOA,OAAgB,CAAA,EAAA,MAAGE,CAK9B,MAAAuE,EAAA+D,EAAA,GAAA,GAAA,IAEVoC,GAAA,CAAa,SAAAnG,CAAA,CAAgByG,CACd,MAAShL,IACZA,EAAcD,SAAAA,UAAAA,CAAAA,CAAa,CACpC,CAAA,EACOkL,IACV3C,EAAA2C,IAAAyC,EAAA,IAAA,CAAA,MACO,eAAA,UACIgB,EAAMP,EAAA,CACb,KAAI7F,MACI/D,CAAAA,EAAAA,mCAA6B,CACnCC,CAAmB,EAAAkG,EAAA,IAAA,CAAEnG,MAAAA,gBAAAA,SAAUmG,EAAA,QAAA,CAAA,SAC1B,sIACLlG,CAAmB,CACrB,CAAA,EAAA,CAAA,EAAAgB,GAAA,MAAAA,EAAA,SAAAkI,EAAA,MAAA,CACF,MAAA,eAAA,SACD,CAAAhD,EAAA,IAAA,CAEQ,SAAA,aAAA,CAEVO,EAAAA,EAAAA,KAAAA,CACU,SAAAzF,EAAA,IAAAwJ,GAAAtB,EAAA,KAAA,CAAc1C,SACrBN,CAAAA,EAAKuD,GAAA,CAAM,GAAA,eAAAe,EAAA,EAAA,GACb,SAAA,CAAAtE,EAAAyD,EAAA,CAEF,KAAA,UAAA,CAAS,EAAA,IAAAzD,EAAA,OAAA,CAAeM,SACtBgE,EAAA,QAAAC,GAAA,YAAA,IAAA,KAAAD,EAAA,OAAA,EAAA,IAAA,KAAAA,EAAA,KAAA,CAAA,EAAA,OAAAC,GAAA,OAAA,IAAA,KAAAD,EAAA,KAAA,CAAA,CAAA,EAAA,CAAO,CAAA,CAAA,CAIA,EAAA,IAAAtB,EAAA,OAAA,CAEQ3I,SAAAA,CAAAA,EAAAA,SACJ,MAAA,mBAAciG,SACvB,CAAAgE,EAAA,MAAA,QAAA,CAAA,CAAG,EAAA,IAAAtE,EAAA,SAAA,CACHA,KAAA,SACGlF,MAAAA,qBACCwF,QACE0C,SAAK,OAA4B1C,GAARgE,QAAM,uBAAA,EAC7BtE,CAAW,IAAAwE,EAAA9D,GAAA,qBAAA4D,EAAA,EAAA,EAAA,EACXtE,MAAAA,GAAA,QAAA,IAAAsE,EAAA,EAAA,GAAAhE,EAAAA,GAAAA,YAAAA,EAAAA,YAAAA,MAAAA,EAAAA,KAAAA,GAOOI,GAAA,YAAA4D,EAAA,EAAA,UAAA,EAETtB,GAAA1C,CACe,EAAkBA,SAC5BgE,EAAGlK,EAAM,CACH,KACT4F,GAAA,CACO,CAAA,CAAA,CACL+D,CAAM,CAAA,CAAA,CAEJ,EAAMU,EAAAA,EAAAA,CAAAA,CACN,CAAA,EAAA3J,EAAS,QAAA,GAAAkF,EAAA,IAAA,CACP,SAAAA,EAAQU,QAAAA,CACR,SAAA,0EACA8D,CAAAA,CACA9D,CAAW,CAAA,CACXhG,CAAe,CAAA,CACjB,CAAA,EAAAzD,IAAA,WAAA+L,EAAA,MAAA,CACF,MAAA,yBAAE1C,SAAAA,CAAAA,EAAAA,IAEG,OAAA,EAAM,CAAA,EAAAN,EAAA,IAAK,CAAA,MACV,gBAAC,SACJ,iBAAA,CAAA,EAAAA,EAhCGjJ,IAkCb,CAAC,MAEH+D,gBACCwF,SAAAA,0BACE,CAAA,CAAA,CAAO,CAAA,EAAArJ,IAGA,WAAA+L,EAAAW,EAAA,CAAA,SAEV,CAAAX,EAAA,MAAA,CAEJ,MAAA,iBAGJ/L,SAAY,CAAAkD,EAAA,UACX6F,EAAA,IAAA,CAAW,SAAAA,EAAA,IAAA,CAAwBM,MACjCN,KAAc,SAAAuE,GAAA,YAAA,IAAA,KAAApK,EAAA,CAAA,EAAA,SAAA,EAAA,IAAA,KAAAA,EAAAA,EAAA,OAAA,CAAA,EAAA,SAAA,CAAA,CAAA,CACd6F,CAAA,CAAS,EAAAgD,EAAA,QAAA,CAAgB,SAAA,CAAAhD,EAAA,SAAA,CACzBA,OAAAvC,IAAA,OAAA,CAAAa,GAAAT,IAAA,aAAA2B,IAAA,MAAS,KAAA,SAAgB,MAAA,eAA4B,QAAA,IAAA,CAG5CkF,GACX,KAAA,EAAApE,EACE,IAAA,EAAWqE,GAAA,WAAA,KACFtK,IAAS,EACdiG,GACE,KAAA,CAAS,EAAIA,SACViE,eAIA,CAAA,GAAA1H,IAAA,YAAAA,GAAA,QAAA,GAAAmG,EAAA,SAAA,CAGPA,KAAA,SAAA1C,MAAAA,cAEIsE,QAC6B,IAAAvN,EAAA,CAAAD,CAC3B,EAIF0M,SAAK,CAAA,YAAA,IAAA9D,EAAAyD,EAAA,CACC,KAAA,qBACGO,CACPU,UAAAA,EAA+B,iBAAA,cAC/B/G,CACAgH,CAAAA,CAAAA,CACAE,CAAAA,CAAAA,CACA9G,CAAAA,CAAAA,CAAkB,CACpB,EAAAiC,EAAA,MAAA,CAAA,MACD,gCAAA,OAGAnD,CAAAA,EACC,SACOmD,EAAA,MAAA,CAAA,MACC,yBAAA,SACGgE,EAAAA,MAAsB,CAAe1D,oCAGzC,SACEzD,GAAA,IAAAG,GAAA,CACL8H,KAAO,CACLC,KAAAA,EAGF,OAAA5H,EACA,QAAAL,EAEL,MAAAO,EACK,OAAArB,CAEV,EAAAgB,EAAW,CAAwC,SAAAgI,EAAc1E,MAAAA,EACpD,YAAA2E,EAAwB3E,IAAAA,EACtB,MAAA4E,EAA6B5E,iBAAAA,EAE9B,SAAA6E,GAAExI,MAAAA,EAAMQ,OAAAA,EAAQL,YAAAA,CAASO,EAAAA,EAAOrB,GAAAA,IAAAA,IAAAA,CAAAA,EAAAA,SAAAA,QAAAA,SAAAA,EAAAA,EAAAA,QAAAA,MAAAA,EAAAA,EAAO,IAAIgB,GAC3C,GAAAgI,EAAA,CACJA,MAAAA,EAAAA,GAAAA,CAAAA,EACAI,GAAAA,GAAAA,CAAAA,EACAH,GAAAA,GAAAA,CAAAA,GAAAA,GAAAA,CAAAA,EAAAA,GAAAA,CAAAA,CAAAA,CAAAA,CACArI,CACAsI,OAAAA,EAAAA,IAAAA,CACAG,KAAAA,EACAF,OAAAA,SACAlB,IAAAA,sBACAqB,MAAAA,GAAAA,CACAC,iBAAAA,OAAAA,GAAAA,KAAAA,GAAAA,CAAAA,IACE5I,uBAAAA,QAAAA,GAAAA,KAAAA,GAAAA,CAAAA,QACJ,EAAM6I,CAAS,EAGXC,SAAAA,EAAAA,UAAAA,CACAT,SAAU,CAAAhF,EAAA,SAAA,CACN0F,SAAAA,EAAAA,OACAC,IAAAA,EACQC,IAAAA,EAKhB,MAAA3B,WAKUrH,QAAAA,MAAAA,CACC,CAAA,CACH,EAAAoG,EAAA,MAAA,OAGE,eACqB,SAAA,CAAAA,EAAA,SAAkB6C,CAGZ,SAAA,CAAA7C,EAAA,MAAA,CAI1B,MAAA,eACN1C,SAED,CAAAN,EAAA,OAAA,CAAAM,MACEN,SAAAM,SACEkF,EACON,CAAAA,EAAAA,IAAAA,CAAAA,CAAAA,GAAAA,EAAAA,EAAAA,CACAG,SAAAA,IACLpB,CAAAA,EAAAA,CAAAA,CAAAA,GAAAA,EAAAA,EAAAA,CACAqB,SAAAA,EAAAA,GAAAA,CACQ,SAAAC,EACT,OAAA,OAAA,CAEHvC,CAAA,CAAW,CAAA,CAAc1C,CAAAA,EAAAA,CAAAA,CAAAA,GACvBN,EAAA,KAAA,CAAAM,MAAAA,QACOyD,KAAMoB,GAAc7E,IAAAA,OACvB,MAAA8E,EAAY,SAAUI,CAAAA,CAAAA,CAAM,CACV,CAAA,EAAA,CAAA,CAAAlF,GAAEN,EAAA,IAAA,CAAA,MAClB,cACAM,KAAAA,GACe,IAAA,OACDiF,MACHN,EAAA,SACRA,CAAA,CAAA,EAACjF,EAEL,KAAA,CAAA,CAAA,EAAAgD,EAAA,IAAA,CAAA,MAEAoC,CAECrB,WAAM,QAAA,EACAoB,SACF,CAAA,YAAA,IAAArI,EAAA,IAAAzD,GAAA,CACJ+L,KAAAA,CAECA,aAAAA,GAEJ,YAAAU,EAED,EAACb,EAEO,OAAAjF,EAAA+F,GAAA,CACAZ,IAAAA,GACF,KAAA,IACGF,IAAAA,EAAAA,CAENA,CAAAA,EAGLjF,CACA,CAAA,CACE8E,CAAO,CAAA,CAAA,CACO,CACd,CAAA,EAAAlI,CAAA,CAIE,CAAM,CAAA,CAAEoJ,CAAAA,CAAcF,CAAAA,CAAAA,EAAAA,EAAAA,QAAgBzM,IAAAA,KAAAA,KAAAA,EAAAA,MAAAA,CACtC,MAAA,6BACS,SAAA6G,EACA8F,CAAAA,EAAAA,EAAAA,MAAAA,CACA,MAAA,wBACAF,SAAAA,EACN,CAAA,GAAA3L,EAAA,QAEH,GAAA6I,EAAA,MAAA,CAAA,MAAA,kBACA,SAAA,CACDA,EAAC,QAAA,CAAA,MACC,aAAA,SACR,CAAAhD,EAAA,QAAA,CAEP,KAAC,QACE,KAAA,aACF,QAAAvC,EAAA,YAAA,IAAA,MAEApD,SAAAA,KAEQqK,GAAA,KAAA,CAA8BxE,CAAAA,CAEzCF,EAAAA,OAAAA,EAAA,OAAA,CAAW,MAAA,QAAyBC,SAAAA,EAAAA,MAAAA,CAEvC9F,CAAAA,CACC,CAAW,EAAA5E,GAAA,IAAAF,GAAA,CAAA,CAAA4Q,GAAA5Q,CAAA,GAAA2N,EAAA,QAAA,CAAiB1C,MAAAA,aACnByD,OAAMkC,GAAA5Q,CAAA,EAAA8E,EAAA,OAAA,KAAA,QAAA,CAAA,EAAA,IAAYmG,UACvBN,EAAA,QAAA,CACE8D,KAAK,QACLoC,KAAK,aACLC,QAAS1I,EAAuB2I,gBAAkB/Q,EAAA,YAAA,EAClDgR,SAAUA,IAAM,CACd3B,GAA0BrP,CAAK,CACjC,CACD,CAAA,EACGA,EAAA2K,IAAAA,EAAA,OAAA,CAAM+D,MAAM,QAAOzD,SAAEnG,GAAME,CAAAA,CAAAA,CAAa,CAAC,CAAA,EAE9C9E,CAAAA,CAAAA,CAAAA,CAGK,CAAA,EACEwO,EAAM,QAAA,GAAA,CAAA,CAAAvG,GAAAwF,EAAA,MAAA,CAENoC,MAAAA,kCAKC9E,IAAAA,GAED,SACO,CAAA3B,EAAA,IAAA2H,GAAAtD,EAAA,QAAA,CAAA,MACA,gBAAA,cAEHvF,EACkB,YAEJ,QAAA,CACdiH,KAAAA,QAEF,KAAA,gBACD,QACOpG,IACRgI,EAAMvC,SAAM,IAAA,CAAOzD,GAAoB,CAAS,EAC3C,QAEZ,IAAA,CAGEjG,IACL2I,GACQrF,EAAA,IAAA,EAIJ,CACQ,EAAAqC,EAAA+F,GAAA,CACOO,IAAAA,EAAAA,CAAAA,EAAAA,cAAAA,EAAAA,CAAAA,EAAAA,OAAOhG,KAAAA,MAMlBwD,IAAK,GAAAvG,EAAA+I,CAAA,EAAA,WAAA,MAAA/I,EAAA+I,CAAA,EAAA,IAAA,GAAA,CAAA,EACA,IAAAtG,EAAA,OAAA,CACLmG,cACAE,SAAUA,EAAMC,CAAA,CACd3I,CAAAA,EAAAA,EAAAA,OAAAA,CAEF,MAAA,WACAqG,SAAezG,EAAA+I,CAAA,EAAA,QACb,CAAA,CAAA,CACE3I,EAAAA,GAAAA,CAAAA,IAAAA,EAAsB2I,CAAA,CAAA,EAAA,CAAA,EAAA3H,EAAA,OAAA,GAAAqE,EAAA,QAAA,CACxB,MAAA,CACF,WAAA,SAEFhD,cAAO,MACLpD,QACU0J,GAAwCC,EAGlDrC,SAAQ3G,CAAAA,mBAAiCA,CAAqB,EAC/D,eACD,CAAA,CAAA,CAAA,EAAApD,EAAY,QAAA,GAAA6I,EAAA,MAAA,CAAO1C,MAAAA,kBAAsB,SACzCN,CAAAA,EAAY,OAAA,CAAUM,MAAAA,eAAkC,SAAA,MAAA,CA1BlD,EAgCNwE,IAAO9E,EACO,WAAA,CACZwG,MAAe,oBACfC,SAASjR,GAAA,IAAA6F,GAAA2H,EAAA,QAAA,CACX,MAAA,cAECrE,QAAiBtE,GAAAA,KAErBgB,IAGYgI,EAAA,iBACJA,EAAA,gBAAA,6BACG,EAAe,SAAA,CAAArD,EAAA,QAAA,CAAU,KAAA,QAAE,KAAA,kBACvC,QAAAnC,IAAAxC,EAAgB,SAAA,IAAA,CACb7F,GAAAA,CAAAA,EAES,MAAAyJ,EAAA,+BAAA,KAAA5D,CAAA,EAAA,OAAA,SAEU4D,CAAA,CACd,CACEoE,CAAAA,EAAAA,CACAA,UAAkB,OACL7D,aAAAA,UACf,gBAAA,QACF,aAAA,SAAEc,QAEFN,SAAA,EACE8D,CAAK,EAAAjG,IAAAxC,IAAAmE,IAAA,MAAA,KAAA,KAAA,CAAA,EAAAnE,CACA,CAAA,CAAA,CAAA,EACeA,EAAAA,QAElBsJ,MAAAA,eACA,SAAA,OAKA5G,CAAAA,EACF,IAAAiC,EACD,WAEC,CAAA,MACa,oBAAA,SACGvK,GAAA,IAAA4F,GAAA2H,EAAA,QAAA,CAAA,MACG,eAAA,SACH,CAAAhD,EAAA,QAAA,CACd1J,KAAS,QACT+E,KAEHwC,uBAEJ4B,IAAApE,EACO,SAAA,IAAA,CAgBVwJ,GAAAxJ,CAAA,CAAY,EAAe,SAAAA,IAAA,WAAAiD,CAAA,CAAW,EAAA,CAAE,QAAA,SAAA,EACxCjD,CAAA,GAAA,MAAA,CAAA,EAAgBA,GAAA,MAAA,CAAA,CAAA,CAAA,EAEZiD,GAAaK,EAAA,OAAA,EAAAqB,EAAA,SAAA,CAAcM,KAAAA,SACzB,MACO,eAAA,QACA,IAAA,CAAA3C,EACgBtC,IAAAA,CAAAA,EAEnBwJ,MAAAA,CACF,WAAA,QACA6B,EAA+BpI,SAEhC,kBAAA,CAAA,EAAA,IAYCX,CAAsB,CACxB,EAAAqC,EAAA,KAAA,CAAA,MACO,+BAAAtK,GAAA+H,CAAA,GAAA,EAAA,IAAAI,EAAA,gBAAAA,CAAA,GAAA,EAAA,IAAAS,GAAAf,EAAAe,CAAA,EAAA,0BAAA,EAAA,IAAAmB,EAAA,iBAAAA,CAAA,GAAA,EAAA,GAAA,SACOZ,GAAA,IAAA,CAAAzC,EAAA9D,IAAA,OACd,MAAAqO,IAAA5F,EAAA3E,EAAA,SAAA,YAAA2E,EAAA,KAAA3E,EAAA,GAAA,IACDwK,EAAA,GAED,OACEnH,IAAA,YAAAC,GAAA,SAAAtD,EAAA,QAAA,KAAAsD,GAAA,SAAApH,EAAA,IAAAsO,EAAA,IAAAlH,GAAA,QAAAtD,EAAA,QAAA,IAAA4G,EAAA6D,EAAA,CAAA,SAAA,CAAAD,GAAA5G,EAAA,KAAA,CAOJ,MAAA,WAAA,CAINA,EAAAA,EAAA8G,GAAA,CACE/C,GACErO,IAAAA,CAAAA,MAAAA,CAAAA,GAODmJ,KAAAA,EACC,KAAWzC,EAAarF,OACxB,CAAA,CAAI6P,CACJ,EAAA,WAA2BA,CAAA,EAAA,CACzB,CACElH,CAIAkH,CAAgB,EAAA5G,EAAA,SAAA,CAClB,SAAA1C,GAAA,OAAA,GAAA0F,EAAA,IAAA,CACUnD,SAAAA,CAAAA,IAAuB9I,SAAAA,qCAAAA,cAAAA,IAAAA,EAAAA,SAAAA,CACnC,KAAA,SACA,gBACWuJ,QAAA,IACWN,CAAI+D,EAAM,QAAA,UAAA,CAAa,EAChB,SACfrN,aACR0F,CAAAA,EAAAA,GAAAA,CAAAA,CAAAA,CACoByD,CAAAA,CAAAA,CACpB,CAAA,CAAA,CACM,CAAA,CAAA,CAEb,CAAC,EAAAsB,IAEJnB,EAAA+G,GAAA,CAAA,QACGzJ,IAAAA,GAAAA,EAAuB,EACtBgD,SAAAA,EAAAA,MAC8B,CAG5B,MAAA,QACO,GAAA,qBACC,qBACS,CACbE,KAAAA,SACF,MAAA,cAAA,QACD,IAAAY,GAAA,EAAA,EAED,SAEFpB,EAAAyD,EAAA,CAAA,KAAG,GAAA,CAEC,CAAC,CACT,EACHzD,EAAA,SAAA,CACI,SAAAA,EAAA,KAAA,CAGPA,SAAAA,MAAM,CAACgH,CAAgC,CAAE1G,EAAAA,SACvC,CAAW,SAAA0C,EAAA,KAAA,CAAW,SAAA,CAAAhD,EAAA,KAAA,CAAoBM,SACxC,WAAA,CACO,EAAAN,EAAA,KAAA,CACC,SAAA,wEAAA,CACNgE,EAAAA,EAAe5C,KAAAA,CAAmBd,wBAE7B,CAAM,EAAAN,EAAA,KAAA,CAAK,SAAA,4KAAA,CAElBA,EAAAA,EAAA,KAAA,CAAAM,yBACE,CAAI,EAAAN,EAAA,KAAA,CAAQ,SAAA,iEAAA,CAEdA,EAAAA,EAAA,KAAA,CAAAM,6BACE,CAAAA,EAAAA,OACE,CAAAA,SAAI,CAAAN,EAAA,MAAA,CACJA,SAAA,GAAI,CAAA,EAAA,aAAA,CAAA,CAGA,EACJA,EAAA,KAAA,CAAAM,SAAI,CAAAN,EAAA,MAAA,CACJA,SAAA,GAAI,CAAA,EAAA,iBAAA,CAAA,CAIA,EACJA,EAAA,KAAA,CAAAM,SAAI,CAAAN,EAAA,MAAA,CACJA,SAAA,GAAI,CAAA,EAAA,eAAA,CAAA,CAGA,EACJA,EAAA,KAAA,CAAAM,SAAI,CAAAN,EAAA,MAAA,CACJgD,SAAA,GAAA1C,CAAAA,EAAAA,mBACE,CAAA,CAAA,EAAAA,EAAK,KAAA,CAAC,SACR,CAAAN,EAAA,MAAA,CACAgD,SAAA,OAAA1C,CAAAA,EAAAA,qBACE,CAAA,CAAA,EAAAA,EAAK,KAAA,CAAC,SACR,CAAAN,EAAA,MAAA,CACAgD,SAAA,GAAA1C,CAAAA,EAAAA,iBACE,CAAA,CAAA,CAAA,CAAK,CAAC,CACR,CAAA,CAAA,CACA,CAAAA,CACE,CAAA,CAAA,CAAK,CAAC,CACR,CACA,MAAAA,GAAAA,GAAAA,SACE,CAAA,KAAAlE,CAAK,EAAK,CACZ,KAAA,CACAkE,GAAAA,EACE,QAAApC,EAAM,MAAA+I,EACR,OAAAvO,EAAK,YAAA4D,EACH,mBAAAC,EACC,cACJ2K,EAAC,UAETvO,EACE,WAAAwO,EAET,WAAA9I,CAEM+I,EAAAA,EACQhL,EAAAA,GAAAA,IAAAA,EAAAA,GAAQiE,EAAA,CAAA,CAAA1H,EACZ0O,EAAAhE,GAAA,CACJtM,EAAAA,QAAAA,EAEAkQ,OAAAA,EAAAA,UAAAA,CACAvO,MAAAA,aAAAA,EAAAA,QAAAA,EAAAA,SAAAA,GAAAA,MAAAA,EAAAA,OAAAA,gBAAAA,EAAAA,IAAAA,EAAAA,WAAAA,EAAAA,IAAAA,EAAAA,WAAAA,EAAAA,eAAAA,CAAAA,GACA4D,aAAAA,EACAC,SAAAA,CAAAA,EAAAA,OAAAA,CACe2K,MAAAA,cACJvO,SAAAA,EAAAA,EAAAA,OAAAA,CACXwO,MAAAA,qBACA9I,SAAAA,CAAAA,EAAAA,GAAAA,CACEjC,IAAAA,EAAAA,cAAAA,EAAAA,OACEkL,SAAYhL,EAAeC,GAC3B3D,CAAAA,GAAAA,GAAAA,YAAAA,EAAeD,MAAAA,EAAAA,CAAAA,GAAAA,CAAAA,EAAAA,IAAAA,GAAAA,EAAAA,GAAAA,qBAEK8B,EAAA,OAClB8M,SAAU9M,EAAA,GACdtB,CAAAA,CAAAA,EAAQqO,GAAI,IAAAxH,EAAAyD,EAAA,CACPrH,KAAAA,QAAAA,CACJ,EAAA,IAAA4D,EAAAyH,GAAA,CACH,QAAA/O,EAAA,QACF,WAAA,EAEA,CACEsK,EAAA,GACUhD,EACNiH,GAAAA,CAUYI,QAAAA,EAAW/G,WAEzB,EAAA,CAAY,CAAA,CAAaA,EAAAA,EAAAA,GAErB0C,CAAA,KAAYtK,GAAA0D,EAAoBkE,WAAAA,CACvB,CACL1D,EAAAA,EAAAA,OAAaoJ,CAAwBO,kBACnBmB,SAEP7D,CAAAA,EAAAA,GACT,CACUjH,KAAAA,GAAOoJ,CAAkBO,CAAAA,EAAQoB,MAAUlN,GAAEiN,CAAI,SAEvD,IAAA,uBACH,YAAAtL,EAAA,SAAA,EAAA,OAAM,OAAA,CAAA,CAAQ,CAKV,CAAA,CAAA,CAAiB8B,CAAAA,CAAmB,EAAA,CAAA0J,EAAGC,IAAA,SAAA,QAGlD7H,EAAAA,GAAAA,YAAAA,EAAS,OAATA,YAAAA,EAAS,QAAA2C,EAAAkF,GAAA,YAAAA,EAAA,OAAA,YAAAlF,EAAA,GAAA,CAACzE,EAAAA,GAA4B,CAAA,CAAA,KAAA4J,EACvC,GAAApE,EAEM,GAAAqE,CAAiB3L,IAAMzD,CAAuB,MACvDqK,EAAAvJ,KAAY,CAAAuO,EAAAC,CAAA,EAAA9Q,EAAA,EAAA,EAAWmJ,OAAAA,GAAAA,IACrBN,CAAU,QAAiB5D,IAAAA,qBAAAA,GAAAA,CAC1B8L,EAAY,CAAA,mBAEXC,eAAO,IAAAF,EAAA,EAAA,CAAA,EACPG,EAAA,UAAAC,EAAA,OAAA,EACG,EACA,QAIX,WAAiBjM,GAAAA,KAAayL,IAAAA,IAAAA,OAAUzL,OAAMrF,GAAAA,CAAAA,IAChD,CACF,EAEA,kBAAoC+Q,EAAAA,QAAAA,EAAAA,OAAAA,EAAMpE,IAAAA,CAAOqE,EAAAA,SAAYK,EAAA,UAAAC,EAAA,OAAA,CAC3D,CACA,EAAA,CAAA,CAAA,EACA/N,EAAgB0F,EAAA,KAAA,CACRoI,SAAAA,EAAAA,GAAeE,CAEXC,GAAAA,EACN,SAAUC,EAAgBpB,GAAA,CACT,GAAAW,CACfK,CAASK,CAAqB,CAChC,CAAA,CAAA,EAEFzI,EAAA,KAAA,CACE8H,IAAAA,EACAY,MAAAA,CAEJ,OAAA,KACA,CAAiBN,CAASO,CAC1B,EACEC,GAAQ/I,EAAkB4I,GAAAA,EAAqB,SACjDpJ,GAAAjD,EAAA,OACF,KAAK,CAEE4L,YAAAA,EACL1H,QAAAA,EACQoD,KAAAA,EAAOpD,iBAAAA,EACF,KAAA3D,CAAKoL,EAAK3L,EACfyM,GAAA9H,EAAA+H,GAAA,YAAAA,EAAA,UAAA,MAAA/H,EAAA,OAAA+H,EAAA,QAAA,OAAA,CAAAC,EAAAC,IAAAD,EAAAC,EAAA,MAAA,EAAA,EAAA,GAGJX,OAAJY,EAAA,OAAAC,GAAAC,CAAA,EAAAN,EAAA,QAAA,KAAAO,GAAA,MAAAA,EAAA,OAAAR,GAAAQ,EAAA,OAAAzM,GAAA,MAAAA,EAAA,MAAA0M,GAAA,EAAIhB,CAAiB,MAAE/C,EAAQ,GAAA,SAAMgE,GAAA,CAAE,KAAAlN,EAE3C,WAAAzD,CAGA,EAAA,QACA,KAAqB,CACrB,YAAAsQ,EACQ,UAAAM,EAAEN,QAAAA,EAAaE,OAAAA,EAASL,KAAAA,EAAMM,iBAAAA,EAAkBzM,KAAAA,EAASP,YAAAA,EAC/D,mBAAAG,EAGA,QAAA2B,EAQO5H,QAAAA,CACT,EAAA8F,EAEmBoN,EAAAlN,GAAAC,IAAA2B,EAAA,IAAA,CAAA,CAAAuL,EAEnBC,EAAkB,CAAAT,GAAA,CAAAM,EAAEnN,GAAAA,EAAAA,GAAAA,CAAAA,EAAAA,GAAMzD,OAAAA,EAAAA,MAAAA,CAAc,MAAA,YAChC,MAAAsQ,EAAA,GAAAU,GACJV,SAAAA,CAAAA,EAAAA,OAAAA,CACAM,MAAAA,oBACAJ,SAAAA,EAAAA,EAAAA,EAAAA,CACAS,SAAAA,CAAAA,GAAAA,EAAAA,EAAAA,CACAd,SAAAA,CAAAA,EAAAA,OAAAA,CACAM,MAAAA,iCACAzM,SAAAA,QACAL,CAAAA,EAAAA,GAAAA,CAAAA,CACAC,EAAAA,EAAAA,OAAAA,CACA2B,MAAAA,qBACAuL,SAAAA,CAAAA,WAAAA,GAAAA,MAAAA,EAAAA,UAAAA,KAAAA,EAAAA,SAAAA,GAAAA,EAAAA,CAAAA,CACErN,CAAAA,CACJ,CAAA,IACkBG,EAAAA,EAAAA,CACZmN,SAAAA,CAAAA,GAAaT,EAAgBM,EAAAA,CAClBJ,SAAAA,CAAAA,EAAAA,OAAqB/M,OAGpC,iCAAW,SAAA,QAAmB,CAAA,EAAC6M,GAAAA,CAAyB,CAAG3I,EAAAA,EACzDN,OAAA,CAAY,MAAA,oBACT,SAAErH,CAAAA,EAAAA,GAEE6Q,KAAAA,WACC,CAAAlJ,EAAAA,IAAAA,CACE,CAAA,CAAA,CAAA,CAAY,CAAA,EAAA0C,EAAiC,MAAA,CAAM,MAAW,iBAAA,SAGlE,CAAAwG,GAAAxG,EAAAW,EAAA,CAAMI,SAAM,CAAA/D,EAAA,OAAA,CAAoBM,MAAAA,iCAEzB,SAAA,QAEP,CAAA,EAAE2I,GAAAA,CAEDO,CAAAA,EAAAA,CAAAA,CAAAA,GACCxG,EAAAA,MAAAW,CAAArD,wBACE,CAAMyD,OAAM8F,GAAAV,EAAAS,CAAA,CAAA,CAAuC,CAAA,MAAQ7I,GAAA+H,GAAA,YAAAA,EAAG,UAAH,MAAA/H,GAAG,SAAA+H,EAAA,QAAA,IAAAgB,GAAA9G,EAAA,MAAA,CAGlEA,SAAA,CAAA8F,EAAA,SAAA,KAAA,IAAA,IAAAgB,EAAA,KAAA,CAAA,CAAA,CAAM/F,EAAM,CAAAoF,IAAAC,GAAA,YAAAA,EAAA,UAAA,GAAAA,EAAA,CAAA,EAAA,aAAApG,EAAAW,EAAA,CAAmBrD,SAAA,CAC7BN,EAACyD,OAAI,CAACG,MAAK,8BAAe,SAAY,KAAA,CACjC,EAAA,IAAA5D,EAAA,MAAA,CAGTgD,SAAAoG,EAAA,CAAA,EAAA,WAAA,CAAW,CAAA,CAAA,CACRI,CAAAA,CACC,CAAAlJ,CACE,CAAA,EAAA,CAAA3H,GAAYqK,EAAA,OAAA,CAAA,MAAiC,yBAAM,SAAW,CAAA,CAAA,CAAA8F,GAAA9F,EAAA,OAAA,CAAA,MAG/DmG,+BACD,SAC2B,CAAAnJ,EAAAyD,EAAA,CACvBsG,KAAAA,OACF,KAAA,GACD,CAAA,EAEF,MAAQC,CAEL,CAAA1J,EAAAA,GAAAA,MAAAA,EACQ2J,SAA0B7E,IAAK8E,GAAA,CAAA,MAGzCf,EACAC,EAAAA,YAAAA,EAAkB/O,IAEhBiG,EACE4J,EAAA,kBAAAA,EAAA,UAAA,OAAYlK,EAAA,OAAA,CAAA,MAA8B,kBAAG,SAC7CA,CAAAM,OAAAA,GAAuB6J,IAAGlF,EAAAA,EAAAA,MAAAA,CAAkB,IAAAmF,EAE/C,MAAAC,EACA,OAAAA,EAGP1R,IAAAA,EAAAA,YACY,QAAA,eACPmQ,IACW,KAAA,CAA8B,IAAAwB,CACnC,EAAMjH,EAAA,OAAYiH,IAAAF,IAEzB/G,EAAA,OAAA,IAAA8G,EAIUC,CACN,CAAMD,EAAAA,EAAAA,OAAAA,CACN,MACE,uBAAuB,SAAA,IAAA,CACpB,EACCjF,MACGkF,GAAAA,IAA+BV,EAAAA,QAC9B,CACEY,IAAKF,EACLnG,MAAOoG,EACP/E,OAAQ+E,EACRnG,IAAKgG,EAAEjF,YACPsF,QAAQ,OACRC,QAAgBnH,GAAA,CACR,KAAA,CAAEiH,IAAAA,CAAAA,EAAQjH,EAAEoH,OACdH,IAAQF,IACV/G,EAAEoH,OAAOH,IAAMH,EAEnB,CAAA,CACD,EAEDnK,EAAA,OAAA,CAAM+D,MAAM,uBAAsBzD,SAAC,KAAA,CAAQ,EAE/CoK,OACGN,GAA+BV,IAAAA,IAC9B,MAAA,CACEY,IAAKF,EACLnG,MAAOoG,EACP/E,OAAQ+E,EACRnG,IAAKgG,EAAEjF,YACPsF,QAAQ,OACRC,QAAgBnH,GAAA,CACR,KAAA,CAAEiH,IAAAA,CAAAA,EAAQjH,EAAEoH,OACdH,IAAQF,IACV/G,EAAEoH,OAAOH,IAAMH,EAEnB,CAAA,CACD,EAEDnK,EAAA,OAAA,CAAM+D,MAAM,uBAAsBzD,SAAC,IAAA,CAAS,EAEhDqK,MACGP,EAAAA,OAAYD,CAETG,MAAKF,uBACLnG,SAAOoG,IAAAA,CAAAA,CACCA,EAAAA,EACRnG,OAAOe,IAAAA,EAAAA,EAAAA,EACC,CAAA,CAAA,EAAA,CAAA,CAAAtI,KACQ,OAAA+M,GAAA1J,EAAA,OAAA,CACR,MAAA,uCAAArD,EAAA,MAAA,EAAA,GAAE2N,SAAAA,EAAAA,MAAAA,EAAAA,MAAAA,CAAAA,IAAAA,EAAQjH,MAChB,MAAAgH,EACEhH,OAAAA,EACF,IAAA1G,EAAA,OAAAA,EAAA,aAAAA,EAAA,iBACF,QAAA,MAAA,CAAE,EACHqD,EAEDA,OAAA,CAAA,MAAY,uBAAA,SAAuB,IAAA,CAAA,CAAQ,CAE/C4K,CAAAA,CAAO,CAAA,CAAA,CAAY,CAAA,CAAuB,CAAQ,SACpDC,GAAa,CAAI,KAAAzO,CACb,EAEV,CAIE,KACE2H,CAEC,aAAA1N,EAGC,aAAAF,EACY+O,gBAAAA,CACHmF,EAAAA,EACCA,OAAAA,EAEN1N,OAAcA,CAAyB0I,MAEjC,aAAM,SAGhBrF,CAAAA,EAAA,GAAAgD,EAAA,OAAA,CAAA,MAAY,oBAAA,SAAuB,CAAAhD,EAAAyD,EAAA,CAAE,KAAM,WAGhD,KAAA,GAER,CAAA,EAAA,IAAAqH,GAAA3U,CAAA,CAAA,CACE,CAAA,EAAAC,EAAA,GAAA4M,EAAA,OAAA,CAET,MAAA,kBAEA,SAAmB,CAAAhD,EAAAyD,EAAA,CAAErH,KAAAA,QAAQ,KAAA,GACrB,CAAA,EAAA,IAAA0O,GAAA1U,CAAA,CAAA,CAAEC,CAAAA,EAAAA,EAAAA,GAAAA,EAAAA,OAAAA,CAAcF,MAAAA,mBAAcC,SAAAA,CAAAA,EAAAA,EAAAA,CAAoBgG,KAAAA,SACxD,QACc,CAAA,EAAA,IAAA0O,GAAAzU,CAAA,CAAA,CAAA,CACTF,CAAAA,CACC,CAAA,CAAY,CACL,KAAA,CAAM,OAAA4U,EAAgB,EAAA,IAAK,KAAGD,eAAc3U,kBAAa,EAC1DoO,GAEW,IAAA,KAAA,kBACjB,CAAA,KAAY,UAAiBjE,MAAAA,QACtB,IAAA,UAAM,KAAQuD,UAAK,OAAO,SAA+B,CAAA,EAIhE,SAAY1D,GAAA6K,EAAA3P,EAAA4P,EAAA,CAAkB3K,MAAAA,EAAA0K,EAC5BhL,IAAKzH,GAAA,IAAA,KAAAA,EAAA8C,CAAA,CAAA,CAAA,EAACuI,EAAKsH,EAAA,OAAA,CAAAnC,EAAAoC,IAAAA,EAAApC,EAAAoC,EAAApC,EAAAmC,EAAA,CAAA,CAAA,EAAmBtN,EAALsN,EAAA,OAAA,CAAAnC,EAAAoC,IAAAA,EAAApC,EAAAoC,EAAApC,EAAAmC,EAAA,CAAA,CAAA,EAAQJ,YAA2B,QAAA,EAE/DM,EAAA,MAAA,KAAA,CACG,OAAAH,CAEV,EAAA,IAAA,CAAA,CAAA,EAEM,OAAAD,EAAA,QAAAzS,GAAA,CAAa,MAAI8S,GAAfN,IAAAA,KAAAA,EAAAA,CAAAA,CAAAA,EAAmC,QAAkB,EAAAO,EAAA,QAAA,GAAA1N,EACjD2N,EAASC,KAAAA,MAAAA,GAAuBP,EAAA,EAAA,EACpCG,EAAAG,CAAA,EAAA,KAAAhT,CAAA,CAAA,CACC,EACF6S,CAAA"}