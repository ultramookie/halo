var Dt=s=>{throw TypeError(s)};var pt=(s,t,n)=>t.has(s)||Dt("Cannot "+n);var M=(s,t,n)=>(pt(s,t,"read from private field"),n?n.call(s):t.get(s)),oe=(s,t,n)=>t.has(s)?Dt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,n),pe=(s,t,n,a)=>(pt(s,t,"write to private field"),a?a.call(s,n):t.set(s,n),n),Y=(s,t,n)=>(pt(s,t,"access private method"),n);import{z as fn,s as le,V as Xt,j as Ne,a as _t,h as q,A as V,M as vn,aE as Jt,d as Se,y as te,x as bn,aF as xn,l as je,c as e,T as N,b as yn,f as Pe,w as at,r as wn,af as kn,i as ve,P as En,u as Fn,t as $t,C as Qt}from"./useTitle-Yzy4mGi8.js";import{j as Fe,G as Cn,$ as zn,a as $e,a9 as _n,y as jt,u as Ln,m as en,b as An,I as Z,B as Pt,i as Je,aa as Sn,l as yt,M as Qe,s as ze,a5 as In,a1 as Bn,r as Mn,Q as Tn,Y as rt,p as Ze,c as Rn,d as Ot,z as Dn}from"./fuse-oqIdmU6j.js";class $n{constructor(t,n,{tabInsertsSuggestions:a,defaultFirstOption:c}={}){this.input=t,this.list=n,this.tabInsertsSuggestions=a??!0,this.defaultFirstOption=c??!1,this.isComposing=!1,n.id||(n.id=`combobox-${Math.random().toString().slice(2,6)}`),this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=l=>jn(l,this),this.compositionEventHandler=l=>On(l,this),this.inputHandler=this.clearSelection.bind(this),t.setAttribute("role","combobox"),t.setAttribute("aria-controls",n.id),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",Ht),this.indicateDefaultOption()}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",Ht)}indicateDefaultOption(){var t;this.defaultFirstOption&&((t=Array.from(this.list.querySelectorAll('[role="option"]:not([aria-disabled="true"])')).filter(gt)[0])===null||t===void 0||t.setAttribute("data-combobox-option-default","true"))}navigate(t=1){const n=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(gt)[0],a=Array.from(this.list.querySelectorAll('[role="option"]')).filter(gt),c=a.indexOf(n);if(c===a.length-1&&t===1||c===0&&t===-1){this.clearSelection(),this.input.focus();return}let l=t===1?0:a.length-1;if(n&&c>=0){const y=c+t;y>=0&&y<a.length&&(l=y)}const o=a[l];if(o)for(const y of a)y.removeAttribute("data-combobox-option-default"),o===y?(this.input.setAttribute("aria-activedescendant",o.id),o.setAttribute("aria-selected","true"),Hn(this.list,o)):y.removeAttribute("aria-selected")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const t of this.list.querySelectorAll('[aria-selected="true"]'))t.removeAttribute("aria-selected");this.indicateDefaultOption()}}function jn(s,t){if(!(s.shiftKey||s.metaKey||s.altKey)&&!(!t.ctrlBindings&&s.ctrlKey)&&!t.isComposing)switch(s.key){case"Enter":Kt(t.input,t.list)&&s.preventDefault();break;case"Tab":t.tabInsertsSuggestions&&Kt(t.input,t.list)&&s.preventDefault();break;case"Escape":t.clearSelection();break;case"ArrowDown":t.navigate(1),s.preventDefault();break;case"ArrowUp":t.navigate(-1),s.preventDefault();break;case"n":t.ctrlBindings&&s.ctrlKey&&(t.navigate(1),s.preventDefault());break;case"p":t.ctrlBindings&&s.ctrlKey&&(t.navigate(-1),s.preventDefault());break;default:if(s.ctrlKey)break;t.clearSelection()}}function Ht(s){if(!(s.target instanceof Element))return;const t=s.target.closest('[role="option"]');t&&t.getAttribute("aria-disabled")!=="true"&&Pn(t)}function Kt(s,t){const n=t.querySelector('[aria-selected="true"], [data-combobox-option-default="true"]');return n?(n.getAttribute("aria-disabled")==="true"||n.click(),!0):!1}function Pn(s){s.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0}))}function gt(s){return!s.hidden&&!(s instanceof HTMLInputElement&&s.type==="hidden")&&(s.offsetWidth>0||s.offsetHeight>0)}function On(s,t){t.isComposing=s.type==="compositionstart",document.getElementById(t.input.getAttribute("aria-controls")||"")&&t.clearSelection()}function Hn(s,t){Kn(s,t)||(s.scrollTop=t.offsetTop)}function Kn(s,t){const n=s.scrollTop,a=n+s.clientHeight,c=t.offsetTop,l=c+t.clientHeight;return c>=n&&l<=a}const qn=/\s|\(|\[/;function Nn(s,t,n,{multiWord:a,lookBackIndex:c,lastMatchPosition:l}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let o=s.lastIndexOf(t,n-1);if(o===-1||o<c)return;if(a){if(l!=null){if(l===o)return;o=l-t.length}if(s[o+1]===" "&&n>=o+t.length+1||s.lastIndexOf(`
`,n-1)>o||s.lastIndexOf(".",n-1)>o)return}else if(s.lastIndexOf(" ",n-1)>o)return;const y=s[o-1];return y&&!qn.test(y)?void 0:{text:s.substring(o+t.length,n),position:o+t.length}}class Wn extends HTMLElement{}class Un extends Event{constructor(){super("update")}}const ft=new WeakMap;var Oe,He,Ke,ye,W,wt,Ae,Ie,Be,kt,Me,et,tt,nt,qe,_e;const At=class At extends Wn{constructor(){super(...arguments);oe(this,W);oe(this,Oe,new MutationObserver(()=>Y(this,W,tt).call(this)));oe(this,He,new ResizeObserver(()=>Y(this,W,et).call(this)));oe(this,Ke);oe(this,ye);oe(this,Ie,0);oe(this,Be,0);oe(this,Me,!1);oe(this,qe,()=>Y(this,W,nt).call(this));oe(this,_e,n=>{Y(this,W,Ae).call(this,a=>{(n.target===document||n.target===window||n.target instanceof Node&&n.target.contains(a))&&Y(this,W,et).call(this)})})}static for(n){let a=ft.get(n);return a||(a=new At,a.connect(n),ft.set(n,a)),a}connect(n){pe(this,Ke,new WeakRef(n)),pe(this,ye,document.createElement("div")),M(this,ye).style.position="absolute",M(this,ye).style.pointerEvents="none",n.after(M(this,ye)),M(this,ye).appendChild(this)}forceUpdate(){Y(this,W,tt).call(this),Y(this,W,nt).call(this)}connectedCallback(){Y(this,W,Ae).call(this,n=>{this.style.pointerEvents="none",this.style.userSelect="none",this.style.overflow="hidden",this.style.display="block",this.style.visibility="hidden",n instanceof HTMLTextAreaElement?(this.style.whiteSpace="pre-wrap",this.style.wordWrap="break-word"):(this.style.whiteSpace="nowrap",this.style.display="table-cell",this.style.verticalAlign="middle"),this.setAttribute("aria-hidden","true"),Y(this,W,tt).call(this),Y(this,W,nt).call(this),M(this,Oe).observe(n,{attributeFilter:["style","dir"]}),M(this,He).observe(n),document.addEventListener("scroll",M(this,_e),{capture:!0}),window.addEventListener("resize",M(this,_e),{capture:!0}),n.addEventListener("input",M(this,qe),{capture:!0})})}disconnectedCallback(){var a;(a=M(this,ye))==null||a.remove(),M(this,Oe).disconnect(),M(this,He).disconnect(),document.removeEventListener("scroll",M(this,_e),{capture:!0}),window.removeEventListener("resize",M(this,_e),{capture:!0});const n=M(this,W,wt);n&&(n.removeEventListener("input",M(this,qe),{capture:!0}),ft.delete(n))}};Oe=new WeakMap,He=new WeakMap,Ke=new WeakMap,ye=new WeakMap,W=new WeakSet,wt=function(){var n;return(n=M(this,Ke))==null?void 0:n.deref()},Ae=function(n){const a=M(this,W,wt);return a?n(a):this.remove()},Ie=new WeakMap,Be=new WeakMap,kt=function(){Y(this,W,Ae).call(this,n=>{const a=window.getComputedStyle(n);this.style.height=a.height,this.style.width=a.width,n.clientHeight!==this.clientHeight&&(this.style.height=`calc(${a.height} + ${n.clientHeight-this.clientHeight}px)`),n.clientWidth!==this.clientWidth&&(this.style.width=`calc(${a.width} + ${n.clientWidth-this.clientWidth}px)`);const c=n.getBoundingClientRect(),l=this.getBoundingClientRect();pe(this,Ie,M(this,Ie)+c.left-l.left),pe(this,Be,M(this,Be)+c.top-l.top),this.style.transform=`translate(${M(this,Ie)}px, ${M(this,Be)}px)`,this.scrollTop=n.scrollTop,this.scrollLeft=n.scrollLeft,this.dispatchEvent(new Un)})},Me=new WeakMap,et=function(){M(this,Me)||(pe(this,Me,!0),requestAnimationFrame(()=>{Y(this,W,kt).call(this),pe(this,Me,!1)}))},tt=function(){Y(this,W,Ae).call(this,n=>{const a=window.getComputedStyle(n);for(const c of Vn)this.style[c]=a[c];Y(this,W,et).call(this)})},nt=function(){Y(this,W,Ae).call(this,n=>{this.textContent=n.value,Y(this,W,kt).call(this)})},qe=new WeakMap,_e=new WeakMap;let it=At;const Vn=["direction","writingMode","unicodeBidi","textOrientation","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];try{customElements.define("input-style-clone",it)}catch(s){if(!(s instanceof DOMException&&s.name==="NotSupportedError"))throw s}var be,Te,Re,ce,Ft,tn,Ct,De;const st=class st{constructor(t,n=0,a=n){oe(this,ce);oe(this,be);oe(this,Te);oe(this,Re);pe(this,be,t),pe(this,Te,n),pe(this,Re,a)}static fromSelection(t){const{selectionStart:n,selectionEnd:a}=t;return new st(t,n??void 0,a??void 0)}get collapsed(){return this.startOffset===this.endOffset}get commonAncestorContainer(){return M(this,be)}get endContainer(){return M(this,be)}get startContainer(){return M(this,be)}get startOffset(){return M(this,Te)}get endOffset(){return M(this,Re)}setStartOffset(t){pe(this,Te,Y(this,ce,Ct).call(this,t))}setEndOffset(t){pe(this,Re,Y(this,ce,Ct).call(this,t))}collapse(t=!1){t?this.setEndOffset(this.startOffset):this.setStartOffset(this.endOffset)}cloneContents(){return Y(this,ce,De).call(this).cloneContents()}cloneRange(){return new st(M(this,be),this.startOffset,this.endOffset)}getBoundingClientRect(){return Y(this,ce,De).call(this).getBoundingClientRect()}getClientRects(){return Y(this,ce,De).call(this).getClientRects()}toString(){return Y(this,ce,De).call(this).toString()}getStyleClone(){return M(this,ce,Ft)}};be=new WeakMap,Te=new WeakMap,Re=new WeakMap,ce=new WeakSet,Ft=function(){return it.for(M(this,be))},tn=function(){return M(this,ce,Ft)},Ct=function(t){return Math.max(0,Math.min(t,M(this,be).value.length))},De=function(){const t=document.createRange(),n=M(this,ce,tn).childNodes[0];return n&&(t.setStart(n,this.startOffset),t.setEnd(n,this.endOffset)),t};let Et=st;const Xe=new WeakMap;class Gn{constructor(t,n){this.expander=t,this.input=n,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,n.addEventListener("paste",this.onpaste),n.addEventListener("input",this.oninput),n.addEventListener("keydown",this.onkeydown),n.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(t,n){var a,c;this.input!==document.activeElement&&this.input!==((c=(a=document.activeElement)===null||a===void 0?void 0:a.shadowRoot)===null||c===void 0?void 0:c.activeElement)||(this.deactivate(),this.menu=n,n.id||(n.id=`text-expander-${Math.floor(Math.random()*1e5).toString()}`),this.expander.append(n),this.combobox=new $n(this.input,n),this.expander.dispatchEvent(new Event("text-expander-activate")),this.positionMenu(n,t.position),this.combobox.start(),n.addEventListener("combobox-commit",this.oncommit),n.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1))}positionMenu(t,n){const a=new Et(this.input,n).getBoundingClientRect(),c={left:a.left,top:a.top+a.height},l=t.getBoundingClientRect(),o={left:c.left-l.left,top:c.top-l.top};if(o.left!==0||o.top!==0){const y=getComputedStyle(t);t.style.left=y.left?`calc(${y.left} + ${o.left}px)`:`${o.left}px`,t.style.top=y.top?`calc(${y.top} + ${o.top}px)`:`${o.top}px`}}deactivate(){const t=this.menu;return!t||!this.combobox?!1:(this.expander.dispatchEvent(new Event("text-expander-deactivate")),this.menu=null,t.removeEventListener("combobox-commit",this.oncommit),t.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,t.remove(),!0)}onCommit({target:t}){var n;const a=t;if(!(a instanceof HTMLElement)||!this.combobox)return;const c=this.match;if(!c)return;const l=this.input.value.substring(0,c.position-c.key.length),o=this.input.value.substring(c.position+c.text.length),y={item:a,key:c.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:y}))||!y.value)return;let z=(n=this.expander.getAttribute("suffix"))!==null&&n!==void 0?n:" ";y.continue&&(z="");const K=`${y.value}${z}`;this.input.value=l+K+o;const g=l.length+K.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=g,this.input.selectionEnd=g,y.continue||(this.lookBackIndex=g,this.match=null),this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){if(this.interactingWithList){this.interactingWithList=!1;return}this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted){this.justPasted=!1;return}const t=this.findMatch();if(t){this.match=t;const n=await this.notifyProviders(t);if(!this.match)return;n?this.activate(t,n):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const t=this.input.selectionEnd||0,n=this.input.value;t<=this.lookBackIndex&&(this.lookBackIndex=t-1);for(const{key:a,multiWord:c}of this.expander.keys){const l=Nn(n,a,t,{multiWord:c,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(l)return{text:l.text,key:a,position:l.position}}}async notifyProviders(t){const n=[],a=y=>n.push(y);return this.expander.dispatchEvent(new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:a,text:t.text,key:t.key}}))?(await Promise.all(n)).filter(y=>y.matched).map(y=>y.fragment)[0]:void 0}onMousedown(){this.interactingWithList=!0}onKeydown(t){t.key==="Escape"&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,t.stopImmediatePropagation(),t.preventDefault()))}}class qt extends HTMLElement{get keys(){const t=this.getAttribute("keys"),n=t?t.split(" "):[],a=this.getAttribute("multiword"),c=a?a.split(" "):[],l=c.length===0&&this.hasAttribute("multiword");return n.map(o=>({key:o,multiWord:l||c.includes(o)}))}set keys(t){this.setAttribute("keys",t)}connectedCallback(){const t=this.querySelector('input[type="text"], textarea');if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;const n=new Gn(this,t);Xe.set(this,n)}disconnectedCallback(){const t=Xe.get(this);t&&(t.destroy(),Xe.delete(this))}dismiss(){const t=Xe.get(this);t&&t.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=qt,window.customElements.define("text-expander",qt));function Yn({onlyFirst:s=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,s?void 0:"g")}const Zn=Yn();function Xn(s){if(typeof s!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof s}\``);return s.replace(Zn,"")}const Jn=new Intl.Segmenter;function Nt(s,{countAnsiEscapeCodes:t=!1}={}){if(s===""||(t||(s=Xn(s)),s===""))return 0;let n=0;for(const a of Jn.segment(s))n++;return n}const Qn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.0'%20viewBox='0%200%20641%20223'%3e%3cpath%20fill='%23aaa'%20d='M86%20214c-9-1-17-4-24-8l-6-3-5-5-5-4-4-6-4-6-3-8-2-8v-27l2-9%203-9%204-6%204-6%205-5%205-5%207-3%206-4%207-2%207-2%2012-1h12l7%201%208%202%207%204%207%203%205%205%205%204-10%2010-10%209-4-3-10-5-5-1H88l-5%202-6%203-3%204-4%204-2%205-2%206v6l-1%207%201%207%202%207%203%205%202%204%204%203%204%203%205%202%206%202h9l10-1%205-2%206-3v-16H91v-27h59v54l-1%203-2%203-5%204-4%204-5%203-5%202-8%202-8%202-10%201H92l-6-1zm266-62V91h34v46h44V91h34v121h-34v-46h-44v46h-34v-61zm-182-1V90h34v121h-34v-60zm59-1V90h35l36%201%205%202c3%200%208%202%2010%204l5%202%204%205%205%204%203%207%203%207%201%2013v13l-4%206-3%207-4%204-5%205-5%202-5%203-6%202-5%201-18%201h-18v32h-34v-61zm67-2%203-2%202-4%202-5v-5l-2-4-2-4-3-2-3-3h-30v31h30l3-2zm226%2039v-24l-8-12-18-28a1751%201751%200%200%200-20-31v-2h39l7%2012%2012%2021%206%209%2013-21%2013-21h38v2l-41%2061-7%2010v48h-34v-24zM109%2066l-4-1-5-5-5-4-1-5-3-9v-5l1-5c2-7%203-10%208-15l4-4%207-2%207-2h7l6%201%205%202%205%202%203%204%204%203%202%206%202%205v13l-2%205-2%206-4%204-3%203-5%202-4%202-9%201h-9l-5-2zm22-11%204-2%203-4%202-5V34l-2-4-2-4-3-2-4-3-5-1h-6l-4%202-5%202-2%204-3%205-1%203v4l1%205%202%205%202%202%205%203%204%202h10l4-2zM37%2039V11h33l3%201%203%202%204%203%203%203%201%205%201%204v5l-1%204-3%204-3%205-4%201-3%202-11%201H49v16H37V39zm31%200%203-2%201-2%201-2v-4l-1-3-3-2-2-2H49v18h15l4-1zm107%2025a512%20512%200%200%200-19-53h14l4%2014%206%2019%201%204%201-1%207-19%205-17h9l6%2019%207%2018v-1l2-6%205-17%204-13h14v1l-4%2012-16%2041v2h-5l-5-1-6-15-6-15-1%201-3%207-6%2015-2%208h-11l-1-3zm74-25V11h42v11h-29v2l-1%205v4h29v11h-28v11h2l15%201h13v11h-43V39zm55%200V11h33l5%203%205%202%202%204%202%205v10l-2%203-1%204-5%203-5%203%205%205%208%2010%203%204h-14l-7-9-8-10h-9v19h-12V39zm33-3%202-3v-6l-3-3-2-3h-18v16h1v1h17l2-2zm26%203V11h42v11h-29l-1%206v5h29v11h-28v5l-1%205%201%201v1h30v11h-43V39zm54%200V11h17l18%201%204%202%205%203%202%204%203%204%202%206%201%206v5c-1%206-3%2012-6%2015l-3%204-5%203-5%202-17%201h-16V39zm33%2014%205-5%202-3v-6l-1-6-1-3-1-3-4-3-3-2h-5l-6-1-3%201h-3v34h9l8-1%203-2zm50-14V11h34l5%202%204%202%202%203%202%203v9l-2%202-3%204-1%201%203%203%203%204%201%203%201%204-1%204-1%204-3%203-3%203-5%201-5%201h-31V39zm34%2015%202-1v-6l-2-2-2-2h-20v13h20l2-2zm-3-22%204-2v-6l-2-1-2-2h-19v12h16l4-1zm42%2024V45l-6-9-11-17-5-8h15l4%208%207%2011%202%203%207-11%207-11h14l-11%2016-11%2017v23h-12V56z'/%3e%3c/svg%3e",Lt=[["aa","Afar","Afaraf"],["ab","Abkhaz","аҧсуа бызшәа"],["ae","Avestan","avesta"],["af","Afrikaans","Afrikaans"],["ak","Akan","Akan"],["am","Amharic","አማርኛ"],["an","Aragonese","aragonés"],["ar","Arabic","اللغة العربية"],["as","Assamese","অসমীয়া"],["av","Avaric","авар мацӀ"],["ay","Aymara","aymar aru"],["az","Azerbaijani","azərbaycan dili"],["ba","Bashkir","башҡорт теле"],["be","Belarusian","беларуская мова"],["bg","Bulgarian","български език"],["bh","Bihari","भोजपुरी"],["bi","Bislama","Bislama"],["bm","Bambara","bamanankan"],["bn","Bengali","বাংলা"],["bo","Tibetan","བོད་ཡིག"],["br","Breton","brezhoneg"],["bs","Bosnian","bosanski jezik"],["ca","Catalan","Català"],["ce","Chechen","нохчийн мотт"],["ch","Chamorro","Chamoru"],["co","Corsican","corsu"],["cr","Cree","ᓀᐦᐃᔭᐍᐏᐣ"],["cs","Czech","čeština"],["cu","Old Church Slavonic","ѩзыкъ словѣньскъ"],["cv","Chuvash","чӑваш чӗлхи"],["cy","Welsh","Cymraeg"],["da","Danish","dansk"],["de","German","Deutsch"],["dv","Divehi","Dhivehi"],["dz","Dzongkha","རྫོང་ཁ"],["ee","Ewe","Eʋegbe"],["el","Greek","Ελληνικά"],["en","English","English"],["eo","Esperanto","Esperanto"],["es","Spanish","Español"],["et","Estonian","eesti"],["eu","Basque","euskara"],["fa","Persian","فارسی"],["ff","Fula","Fulfulde"],["fi","Finnish","suomi"],["fj","Fijian","Vakaviti"],["fo","Faroese","føroyskt"],["fr","French","Français"],["fy","Western Frisian","Frysk"],["ga","Irish","Gaeilge"],["gd","Scottish Gaelic","Gàidhlig"],["gl","Galician","galego"],["gu","Gujarati","ગુજરાતી"],["gv","Manx","Gaelg"],["ha","Hausa","هَوُسَ"],["he","Hebrew","עברית"],["hi","Hindi","हिन्दी"],["ho","Hiri Motu","Hiri Motu"],["hr","Croatian","Hrvatski"],["ht","Haitian","Kreyòl ayisyen"],["hu","Hungarian","magyar"],["hy","Armenian","Հայերեն"],["hz","Herero","Otjiherero"],["ia","Interlingua","Interlingua"],["id","Indonesian","Bahasa Indonesia"],["ie","Interlingue","Interlingue"],["ig","Igbo","Asụsụ Igbo"],["ii","Nuosu","ꆈꌠ꒿ Nuosuhxop"],["ik","Inupiaq","Iñupiaq"],["io","Ido","Ido"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["iu","Inuktitut","ᐃᓄᒃᑎᑐᑦ"],["ja","Japanese","日本語"],["jv","Javanese","basa Jawa"],["ka","Georgian","ქართული"],["kg","Kongo","Kikongo"],["ki","Kikuyu","Gĩkũyũ"],["kj","Kwanyama","Kuanyama"],["kk","Kazakh","қазақ тілі"],["kl","Kalaallisut","kalaallisut"],["km","Khmer","ខេមរភាសា"],["kn","Kannada","ಕನ್ನಡ"],["ko","Korean","한국어"],["kr","Kanuri","Kanuri"],["ks","Kashmiri","कश्मीरी"],["ku","Kurmanji (Kurdish)","Kurmancî"],["kv","Komi","коми кыв"],["kw","Cornish","Kernewek"],["ky","Kyrgyz","Кыргызча"],["la","Latin","latine"],["lb","Luxembourgish","Lëtzebuergesch"],["lg","Ganda","Luganda"],["li","Limburgish","Limburgs"],["ln","Lingala","Lingála"],["lo","Lao","ລາວ"],["lt","Lithuanian","lietuvių kalba"],["lu","Luba-Katanga","Tshiluba"],["lv","Latvian","latviešu valoda"],["mg","Malagasy","fiteny malagasy"],["mh","Marshallese","Kajin M̧ajeļ"],["mi","Māori","te reo Māori"],["mk","Macedonian","македонски јазик"],["ml","Malayalam","മലയാളം"],["mn","Mongolian","Монгол хэл"],["mr","Marathi","मराठी"],["ms","Malay","Bahasa Melayu"],["ms-Arab","Jawi Malay","بهاس ملايو"],["mt","Maltese","Malti"],["my","Burmese","ဗမာစာ"],["na","Nauru","Ekakairũ Naoero"],["nb","Norwegian Bokmål","Norsk bokmål"],["nd","Northern Ndebele","isiNdebele"],["ne","Nepali","नेपाली"],["ng","Ndonga","Owambo"],["nl","Dutch","Nederlands"],["nn","Norwegian Nynorsk","Norsk Nynorsk"],["no","Norwegian","Norsk"],["nr","Southern Ndebele","isiNdebele"],["nv","Navajo","Diné bizaad"],["ny","Chichewa","chiCheŵa"],["oc","Occitan","occitan"],["oj","Ojibwe","ᐊᓂᔑᓈᐯᒧᐎᓐ"],["om","Oromo","Afaan Oromoo"],["or","Oriya","ଓଡ଼ିଆ"],["os","Ossetian","ирон æвзаг"],["pa","Punjabi","ਪੰਜਾਬੀ"],["pi","Pāli","पाऴि"],["pl","Polish","Polski"],["ps","Pashto","پښتو"],["pt","Portuguese","Português"],["qu","Quechua","Runa Simi"],["rm","Romansh","rumantsch grischun"],["rn","Kirundi","Ikirundi"],["ro","Romanian","Română"],["ru","Russian","Русский"],["rw","Kinyarwanda","Ikinyarwanda"],["sa","Sanskrit","संस्कृतम्"],["sc","Sardinian","sardu"],["sd","Sindhi","सिन्धी"],["se","Northern Sami","Davvisámegiella"],["sg","Sango","yângâ tî sängö"],["si","Sinhala","සිංහල"],["sk","Slovak","slovenčina"],["sl","Slovenian","slovenščina"],["sn","Shona","chiShona"],["so","Somali","Soomaaliga"],["sq","Albanian","Shqip"],["sr","Serbian","српски језик"],["ss","Swati","SiSwati"],["st","Southern Sotho","Sesotho"],["su","Sundanese","Basa Sunda"],["sv","Swedish","Svenska"],["sw","Swahili","Kiswahili"],["ta","Tamil","தமிழ்"],["te","Telugu","తెలుగు"],["tg","Tajik","тоҷикӣ"],["th","Thai","ไทย"],["ti","Tigrinya","ትግርኛ"],["tk","Turkmen","Türkmen"],["tl","Tagalog","Wikang Tagalog"],["tn","Tswana","Setswana"],["to","Tonga","faka Tonga"],["tr","Turkish","Türkçe"],["ts","Tsonga","Xitsonga"],["tt","Tatar","татар теле"],["tw","Twi","Twi"],["ty","Tahitian","Reo Tahiti"],["ug","Uyghur","ئۇيغۇرچە‎"],["uk","Ukrainian","Українська"],["ur","Urdu","اردو"],["uz","Uzbek","Ўзбек"],["ve","Venda","Tshivenḓa"],["vi","Vietnamese","Tiếng Việt"],["vo","Volapük","Volapük"],["wa","Walloon","walon"],["wo","Wolof","Wollof"],["xh","Xhosa","isiXhosa"],["yi","Yiddish","ייִדיש"],["yo","Yoruba","Yorùbá"],["za","Zhuang","Saɯ cueŋƅ"],["zh","Chinese","中文"],["zu","Zulu","isiZulu"],["zh-CN","Chinese (China)","简体中文"],["zh-HK","Chinese (Hong Kong)","繁體中文（香港）"],["zh-TW","Chinese (Taiwan)","繁體中文（臺灣）"],["zh-YUE","Cantonese","廣東話"],["ast","Asturian","Asturianu"],["chr","Cherokee","ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ"],["ckb","Sorani (Kurdish)","سۆرانی"],["cnr","Montenegrin","crnogorski"],["csb","Kashubian","Kaszëbsczi"],["jbo","Lojban","la .lojban."],["kab","Kabyle","Taqbaylit"],["ldn","Láadan","Láadan"],["lfn","Lingua Franca Nova","lingua franca nova"],["moh","Mohawk","Kanienʼkéha"],["nds","Low German","Plattdüütsch"],["pdc","Pennsylvania Dutch","Pennsilfaani-Deitsch"],["sco","Scots","Scots"],["sma","Southern Sami","Åarjelsaemien Gïele"],["smj","Lule Sami","Julevsámegiella"],["szl","Silesian","ślůnsko godka"],["tok","Toki Pona","toki pona"],["vai","Vai","ꕙꔤ"],["xal","Kalmyk","Хальмг келн"],["zba","Balaibalan","باليبلن"],["zgh","Standard Moroccan Tamazight","ⵜⴰⵎⴰⵣⵉⵖⵜ"]],ei="(((?:[^A-Za-z0-9@＠$#＃\\uFFFE\\uFEFF\\uFFFF]|[\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069]|^))((https?:\\/\\/)((?:(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:[_-]|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)*(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:-|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)(?:(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|招聘|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|عرب|شبكة|بيتك|بازار|العليان|ارامكو|اتصالات|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@+-]|$))|(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ລາວ|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|موريتانيا|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|البحرين|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ευ|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@+-]|$))|(?:xn--[\\-0-9a-z]+))))(?::([0-9]+))?(\\/(?:(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*)*[\\+\\-a-z\\u0400-\\u04FF0-9=_#\\/\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]|(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)))|(?:@[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\/))*)?(\\?[a-z0-9!?\\*'@\\(\\);:&=\\+\\$\\/%#\\[\\]\\-_\\.,~|]*[a-z0-9\\-_&=#\\/])?))",ti="gi",Wt={source:ei,flags:ti},ni={BASE_URL:"./",DEV:!1,MODE:"production",PHANPY_CLIENT_NAME:"Phanpy",PHANPY_GIPHY_API_KEY:"udRxrlYtMZ9MrbaB6rNbjzfI9oGRVMnB",PHANPY_PRIVACY_POLICY_URL:"https://github.com/cheeaun/phanpy/blob/main/PRIVACY.MD",PHANPY_WEBSITE:"https://halo.mookiesplace.com",PROD:!0,SSR:!1,VITE_APP_ENV:"production"},{PHANPY_IMG_ALT_API_URL:vt,PHANPY_GIPHY_API_KEY:ii}=ni,si=Lt.reduce((s,t)=>{const[n,a,c]=t;return s[n]={common:a,native:c},s},{}),nn={300:Fe(5,"minute"),1800:Fe(30,"minute"),3600:Fe(1,"hour"),21600:Fe(6,"hour"),86400:Fe(1,"day"),259200:Fe(3,"day"),604800:Fe(1,"week")},ai=Object.keys(nn),Ut=24*60*60,Vt=s=>{if(!s)return Ut;const t=(new Date(s).getTime()-Date.now())/1e3;return ai.find(n=>n>=t)||Ut},Ee=document.createElement("ul");Ee.role="listbox";Ee.className="text-expander-menu";const ri=16,oi=new IntersectionObserver(s=>{s.forEach(t=>{if(t.isIntersecting){const{left:n,width:a}=t.boundingClientRect,{innerWidth:c}=window;if(n+a>c){const l=Cn()?"right":"left";Ee.style[l]=c-a-ri+"px"}}})});oi.observe(Ee);const Ce=fn([new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],Lt.map(s=>s[0]),"en"),sn=new RegExp(Wt.source,Wt.flags),li=/(^|[^\/\w])@(([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/gi,ci="$2xxxxxxxxxxxxxxxxxxxxxxx";function ui(s){return s.replace(sn,ci).replace(li,"$1@$3")}const di=/[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?/i,hi=new RegExp(`(^|[^=\\/\\w])(@${di.source}(?:@[\\p{L}\\w.-]+[\\w]+)?)`,"uig"),mi=new RegExp("(^|[^=\\/\\w])(#[a-z0-9_]+([a-z0-9_.]+[a-z0-9_]+)?)(?![\\/\\w])","ig"),pi="[a-zA-Z0-9_]{2,}",gi=new RegExp(`(^|[^=\\/\\w])(:${pi}:)(?=[^A-Za-z0-9_:]|$)`,"g"),fi=new Intl.Segmenter;function bt(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function vi(s,{maxCharacters:t=1/0}){const{composerCharacterCount:n}=le;if(n>t){let a="",c="";const l=fi.segment(s);for(const{segment:o,index:y}of l)y<t?a+=o:c+=o;return c&&(c='<mark class="compose-highlight-exceeded">'+bt(c)+"</mark>"),bt(a)+c}return bt(s).replace(sn,'$2<mark class="compose-highlight-url">$3</mark>').replace(hi,'$1<mark class="compose-highlight-mention">$2</mark>').replace(mi,'$1<mark class="compose-highlight-hashtag">$2</mark>').replace(gi,'$1<mark class="compose-highlight-emoji-shortcode">$2</mark>')}const bi=Xt(s=>new Intl.RelativeTimeFormat(s||void 0)),xi=Xt(s=>new Intl.ListFormat(s||void 0)),zt=100;function Mi({onClose:s,replyToStatus:t,editStatus:n,draftStatus:a,standalone:c,hasOpener:l}){var Rt;const{i18n:o}=Ne(),y=bi(o.locale),_=xi(o.locale),{masto:z,instance:K}=_t(),[g,B]=q("default"),C=V((a==null?void 0:a.uid)||zn()),$=vn(),T=$.info,ne=Jt(),{statuses:{maxCharacters:ee,maxMediaAttachments:u,charactersReservedPerUrl:h}={},mediaAttachments:{supportedMimeTypes:p,imageSizeLimit:w,imageMatrixLimit:f,videoSizeLimit:j,videoMatrixLimit:k,videoFrameRateLimit:G}={},polls:{maxOptions:re,maxCharactersPerOption:ue,maxExpiration:X,minExpiration:me}={}}=ne||{},S=V(),O=V(),[U,ie]=q("public"),[se,ae]=q(!1),[D,de]=q(Se.session.get("currentLanguage")||Ce),R=V(D),[v,L]=q([]),[P,J]=q(null),Q=Se.account.get("preferences")||{},ge=()=>{S.current&&S.current.dispatchEvent(new Event("input"))},we=()=>{setTimeout(()=>{var r,d,x;S.current&&((d=(r=a==null?void 0:a.status)==null?void 0:r.startsWith)!=null&&d.call(r,`
`)&&(S.current.selectionStart=0,S.current.selectionEnd=0),(x=S.current)==null||x.focus())},300)};te(()=>{var r,d;if(t){const{spoilerText:x,visibility:m,language:A,sensitive:F}=t;x&&O.current&&(O.current.value=x);const b=[...new Set([t.account.acct,...t.mentions.map(E=>E.acct)])].filter(E=>E!==T.acct);b.length>0&&(S.current.value=`${b.map(E=>`@${E}`).join(" ")} `,ge()),we(),ie(m==="public"&&Q["posting:default:visibility"]?Q["posting:default:visibility"].toLowerCase():m),de(A||((r=Q["posting:default:language"])==null?void 0:r.toLowerCase())||Ce),ae(F&&!!x)}else if(n){const{visibility:x,language:m,sensitive:A,poll:F,mediaAttachments:I}=n,b=!!(F!=null&&F.options)&&{...F,options:F.options.map(E=>(E==null?void 0:E.title)||E),expiresIn:(F==null?void 0:F.expiresIn)||Vt(F.expiresAt)};B("loading"),(async()=>{var E;try{const H=await z.v1.statuses.$select(n.id).source.fetch(),{text:he,spoilerText:fe}=H;S.current.value=he,S.current.dataset.source=he,ge(),we(),O.current.value=fe,ie(x),de(m||((E=Q["posting:default:language"])==null?void 0:E.toLowerCase())||Ce),ae(A),b&&J(b),L(I),B("default")}catch(H){alert((H==null?void 0:H.reason)||H),B("error")}})()}else we(),Q["posting:default:visibility"]&&ie(Q["posting:default:visibility"].toLowerCase()),Q["posting:default:language"]&&de(Q["posting:default:language"].toLowerCase()),Q["posting:default:sensitive"]&&ae(!!Q["posting:default:sensitive"]);if(a){const{status:x,spoilerText:m,visibility:A,language:F,sensitive:I,poll:b,mediaAttachments:E}=a,H=!!(b!=null&&b.options)&&{...b,options:b.options.map(he=>(he==null?void 0:he.title)||he),expiresIn:(b==null?void 0:b.expiresIn)||Vt(b.expiresAt)};S.current.value=x,ge(),we(),m&&(O.current.value=m),A&&ie(A),de(F||((d=Q["posting:default:language"])==null?void 0:d.toLowerCase())||Ce),I!==null&&ae(I),H&&J(H),E&&L(E)}},[a,n,t]);const Le=V(),St=o._({id:"hR9gtK"}),ot=()=>{const{value:r,dataset:d}=S.current;if(g==="loading")return!1;const x=(r||"").trim().replace(new RegExp("^\\p{White_Space}+|\\p{White_Space}+$","gu"),""),m=v.length>0;if(!x&&!m||v.length>0&&v.every(E=>E.id))return!0;const F=(t==null?void 0:t.account.id)===T.id,I=t&&r.trim()===`@${t.account.acct}`;return!!(!F&&I||r===(d==null?void 0:d.source))},We=()=>ot()?!0:confirm(St);te(()=>{const r=d=>{ot()||(d.preventDefault(),d.returnValue=St)};return window.addEventListener("beforeunload",r,{capture:!0}),()=>window.removeEventListener("beforeunload",r,{capture:!0})},[]);const on=()=>{const{value:r}=S.current,{value:d}=O.current;return Nt(ui(r))+Nt(d)},lt=()=>{const r=on();le.composerCharacterCount=r};te(lt,[]);const It=window.CloseWatcher,ct=V(!1);$e("esc",()=>{ct.current=!0},{enabled:!It,enableOnFormTags:!0}),$e("esc",()=>{!c&&ct.current&&We()&&s(),ct.current=!1},{enabled:!It,enableOnFormTags:!0,keyup:!0,ignoreEventWhen:r=>{const d=document.querySelectorAll("#modal-container > *"),x=!!d,m=d.length===1&&d[0].querySelector("#compose-container");return x&&!m}}),_n(()=>{!c&&We()&&s()},[c,We,s]);const Bt=V({}),Mt=()=>`${bn()}#${C.current}`,ut=()=>{if(n||le.composerState.minimized)return;const r=Mt(),d={key:r,replyTo:t?{id:t.id,account:{id:t.account.id,username:t.account.username,acct:t.account.acct}}:null,draftStatus:{uid:C.current,status:S.current.value,spoilerText:O.current.value,visibility:U,language:D,sensitive:se,poll:P,mediaAttachments:v}};!xn(d,Bt.current)&&!ot()&&(jt.drafts.set(r,{...d,state:"unsaved",updatedAt:Date.now()}).then(()=>{}).catch(x=>{}),Bt.current=structuredClone(d))};Ln(ut,5e3),te(()=>(ut(),()=>{jt.drafts.del(Mt())}),[]),te(()=>{const r=x=>{const{items:m}=x.clipboardData||x.dataTransfer,A=[],F=[];for(let I=0;I<m.length;I++){const b=m[I];if(b.kind==="file"){const E=b.getAsFile();p!==void 0&&!p.includes(E.type)?F.push(E):A.push(E)}}if(F.length>0&&alert(o._({id:"rpXAF6",values:{0:F.length,1:F[0].name,2:_.format(F.map(I=>I.name))}})),A.length>0&&v.length>=u){alert(o._({id:"ctFhjs",values:{maxMediaAttachments:u}}));return}if(A.length>0){x.preventDefault(),x.stopPropagation();let I=A;if(u!==void 0){const E=u-v.length;if(I=I.slice(0,E),I.length<=0){alert(o._({id:"ctFhjs",values:{maxMediaAttachments:u}}));return}}const b=I.map(E=>({file:E,type:E.type,size:E.size,url:URL.createObjectURL(E),id:null,description:null}));L([...v,...b])}};window.addEventListener("paste",r);const d=x=>{x.dataTransfer.items.length>0&&(x.preventDefault(),x.stopPropagation())};return window.addEventListener("dragover",d),window.addEventListener("drop",r),()=>{window.removeEventListener("paste",r),window.removeEventListener("dragover",d),window.removeEventListener("drop",r)}},[v]);const[Ue,dt]=q(!1),[Ve,Ge]=q(!1),[ln,ht]=q(!1),[xe,cn]=q(null),[un,dn]=je(()=>{const r=[],d=[],{contentTranslationHideLanguages:x=[]}=le.settings;return Lt.forEach(m=>{const[A]=m;A===D||A===R.current||A===Ce||x.includes(A)||xe!=null&&xe.length&&xe.includes(A)?r.push(m):d.push(m)}),r.sort(([m,A],[F,I])=>m===D?-1:F===D?1:A.localeCompare(I)),d.sort(([m,A],[F,I])=>A.localeCompare(I)),[r,d]},[D,xe]),Tt=je(()=>!!(t!=null&&t.createdAt)&&Math.floor((Date.now()-new Date(t.createdAt))/(1e3*60*60*24*30)),[t]),hn=()=>{ut(),le.composerState.minimized=!0};return e("div",{id:"compose-container-outer",children:[e("div",{id:"compose-container",class:c?"standalone":"",children:[e("div",{class:"compose-top",children:[(T==null?void 0:T.avatarStatic)&&e(en,{account:T,accountInstance:$.instanceURL,hideDisplayName:!0,useAvatarStatic:!0}),c?l&&e("button",{type:"button",class:"light pop-button",disabled:g==="loading",onClick:()=>{var r;if(!window.opener){alert(o._({id:"qiPXgY"}));return}if(window.opener.__STATES__.showCompose){if((r=window.opener.__STATES__.composerState)!=null&&r.publishing){alert(o._({id:"Z2l5Bt"}));return}let d=o._({id:"AB/GtR"});if(!confirm(d))return}s({fn:()=>{const d={editStatus:n,replyToStatus:t,draftStatus:{uid:C.current,status:S.current.value,spoilerText:O.current.value,visibility:U,language:D,sensitive:se,poll:P,mediaAttachments:v}};window.opener.__COMPOSE__=d,window.opener.__STATES__.showCompose?(window.opener.__STATES__.showCompose=!1,setTimeout(()=>{window.opener.__STATES__.showCompose=!0},10)):window.opener.__STATES__.showCompose=!0,window.opener.__STATES__.composerState.minimized&&(window.opener.__STATES__.composerState.minimized=!1)}})},children:e(Z,{icon:"popin",alt:o._({id:"/5ZKeE"})})}):e("span",{class:"compose-controls",children:[e("button",{type:"button",class:"plain4 pop-button",disabled:g==="loading",onClick:()=>{An({editStatus:n,replyToStatus:t,draftStatus:{uid:C.current,status:S.current.value,spoilerText:O.current.value,visibility:U,language:D,sensitive:se,poll:P,mediaAttachments:v}})&&s()},children:e(Z,{icon:"popout",alt:o._({id:"JsU2En"})})}),e("button",{type:"button",class:"plain4 min-button",onClick:hn,children:e(Z,{icon:"minimize",alt:o._({id:"3TSz9S"})})})," ",e("button",{type:"button",class:"light close-button",disabled:g==="loading",onClick:()=>{We()&&s()},children:e(Z,{icon:"x",alt:o._({id:"yz7wBu"})})})]})]}),!!t&&e("div",{class:"status-preview",children:[e(Pt,{status:t,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend reply-to",children:Tt>0?e(N,{id:"Q1Huya",values:{0:t.account.acct||t.account.username,1:y.format(-Tt,"month")},components:{0:e("strong",{})}}):e(N,{id:"dwLCPZ",values:{0:t.account.acct||t.account.username}})})]}),!!n&&e("div",{class:"status-preview",children:[e(Pt,{status:n,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend",children:e(N,{id:"wKtOLH"})})]}),e("form",{ref:Le,class:`form-visibility-${U}`,style:{pointerEvents:g==="loading"?"none":"auto",opacity:g==="loading"?.5:1},onKeyDown:r=>{r.key==="Enter"&&(r.ctrlKey||r.metaKey)&&Le.current.dispatchEvent(new Event("submit",{cancelable:!0}))},onSubmit:r=>{r.preventDefault();const d=new FormData(r.target),x=Object.fromEntries(d.entries());let{status:m,visibility:A,sensitive:F,spoilerText:I}=x;if(F=F==="on",P){if(P.options.length<2){alert(o._({id:"zhrMYj"}));return}if(P.options.some(b=>b==="")){alert(o._({id:"uNVxXX"}));return}}v.length>0&&v.some(E=>{var H,he;return!((he=(H=E.description)==null?void 0:H.trim)!=null&&he.call(H))})&&!confirm(o._({id:"MQYucx"}))||(I=F&&I||void 0,m=m===""?void 0:m,le.composerState.publishing=!0,B("loading"),(async()=>{try{if(v.length>0){const H=v.map(fe=>{const{file:Ye,description:mn,id:pn}=fe;if(pn)return fe;{const gn=Zt({file:Ye,description:mn});return z.v2.media.create(gn).then(mt=>(mt.id&&(fe.id=mt.id),mt))}}),he=await Promise.allSettled(H);if(he.some(fe=>{var Ye;return fe.status==="rejected"||!((Ye=fe.value)!=null&&Ye.id)})){le.composerState.publishing=!1,le.composerState.publishingError=!0,B("error"),he.forEach(fe=>{fe.status==="rejected"&&alert(fe.reason||o._({id:"eIiurD",values:{i}}))});return}}let b={status:m,spoiler_text:I,language:D,sensitive:F,poll:P,media_ids:v.map(H=>H.id)};n&&Je("@mastodon/edit-media-attributes")?b.media_attributes=v.map(H=>({id:H.id,description:H.description})):n||(b.visibility=A,b.in_reply_to_id=(t==null?void 0:t.id)||void 0),b=Zt(b);let E;if(n)E=await z.v1.statuses.$select(n.id).update(b),yn(E,K,{skipThreading:!0});else try{E=await z.v1.statuses.create(b,{requestInit:{headers:{"Idempotency-Key":C.current}}})}catch{E=await z.v1.statuses.create(b)}le.composerState.minimized=!1,le.composerState.publishing=!1,B("default"),s({type:n?"edit":t?"reply":"post",newStatus:E,instance:K})}catch(b){le.composerState.publishing=!1,le.composerState.publishingError=!0,alert((b==null?void 0:b.reason)||b),B("error")}})())},children:[e("div",{class:"toolbar stretch",children:[e("input",{ref:O,type:"text",name:"spoilerText",placeholder:o._({id:"gnKo7f"}),disabled:g==="loading",class:"spoiler-text-field",lang:D,spellCheck:"true",dir:"auto",style:{opacity:se?1:0,pointerEvents:se?"auto":"none"},onInput:()=>{lt()}}),e("label",{class:`toolbar-button ${se?"highlight":""}`,title:o._({id:"zKu2Aq"}),children:[e("input",{name:"sensitive",type:"checkbox",checked:se,disabled:g==="loading",onChange:r=>{var x,m;const d=r.target.checked;ae(d),d?(x=O.current)==null||x.focus():(m=S.current)==null||m.focus()}}),e(Z,{icon:`eye-${se?"close":"open"}`})]})," ",e("label",{class:`toolbar-button ${U!=="public"&&!se?"show-field":""} ${U!=="public"?"highlight":""}`,title:U,children:[e(Z,{icon:Sn[U],alt:U}),e("select",{name:"visibility",value:U,onChange:r=>{ie(r.target.value)},disabled:g==="loading"||!!n,dir:"auto",children:[e("option",{value:"public",children:e(N,{id:"7d1a0d"})}),(Je("@pleroma/local-visibility-post")||Je("@akkoma/local-visibility-post"))&&e("option",{value:"local",children:e(N,{id:"d5zxa4"})}),e("option",{value:"unlisted",children:e(N,{id:"WDcQq9"})}),e("option",{value:"private",children:e(N,{id:"o34OrG"})}),e("option",{value:"direct",children:e(N,{id:"IV4QaU"})})]})]})," "]}),e(ki,{ref:S,placeholder:t?o._({id:"Sjj+EN"}):n?o._({id:"qzVesX"}):o._({id:"owpNF1"}),required:(v==null?void 0:v.length)===0,disabled:g==="loading",lang:D,onInput:()=>{lt()},maxCharacters:ee,performSearch:r=>{const{type:d,q:x,limit:m}=r;return d==="accounts"?z.v1.accounts.search.list({q:x,limit:m,resolve:!1}):z.v2.search.fetch(r)},onTrigger:r=>{(r==null?void 0:r.name)==="custom-emojis"?Ge({defaultSearchTerm:(r==null?void 0:r.defaultSearchTerm)||null}):(r==null?void 0:r.name)==="mention"?dt({defaultSearchTerm:(r==null?void 0:r.defaultSearchTerm)||null}):(r==null?void 0:r.name)==="auto-detect-language"&&(r!=null&&r.languages)&&cn(r.languages)}}),(v==null?void 0:v.length)>0&&e("div",{class:"media-attachments",children:[v.map((r,d)=>{const{id:x,file:m}=r,A=(m==null?void 0:m.size)+(m==null?void 0:m.type)+(m==null?void 0:m.name);return e(Fi,{attachment:r,disabled:g==="loading",lang:D,onDescriptionChange:F=>{L(I=>{const b=[...I];return b[d]={...b[d],description:F},b})},onRemove:()=>{L(F=>F.filter((I,b)=>b!==d))}},x||A||d)}),e("label",{class:"media-sensitive",children:[e("input",{name:"sensitive",type:"checkbox",checked:se,disabled:g==="loading",onChange:r=>{const d=r.target.checked;ae(d)}})," ",e("span",{children:e(N,{id:"jER18a"})})," ",e(Z,{icon:`eye-${se?"close":"open"}`})]})]}),!!P&&e(Ci,{lang:D,maxOptions:re,maxExpiration:X,minExpiration:me,maxCharactersPerOption:ue,poll:P,disabled:g==="loading",onInput:r=>{if(r){const d={...r};J(d)}else J(null)}}),e("div",{class:"toolbar wrap",style:{justifyContent:"flex-end"},children:[e("span",{children:[e("label",{class:"toolbar-button",children:[e("input",{type:"file",accept:p==null?void 0:p.join(","),multiple:u===void 0||u-v>=2,disabled:g==="loading"||v.length>=u||!!P,onChange:r=>{const d=r.target.files;if(!d)return;const x=Array.from(d).map(m=>({file:m,type:m.type,size:m.size,url:URL.createObjectURL(m),id:null,description:null}));v.length+x.length>u?alert(o._({id:"ctFhjs",values:{maxMediaAttachments:u}})):L(m=>m.concat(x)),r.target.value=""}}),e(Z,{icon:"attachment"})]}),re==null||re>1&&e(Pe,{children:e("button",{type:"button",class:"toolbar-button",disabled:g==="loading"||!!P||!!v.length,onClick:()=>{J({options:["",""],expiresIn:24*60*60,multiple:!1})},children:e(Z,{icon:"poll",alt:o._({id:"cZJ92q"})})})}),e("button",{type:"button",class:"toolbar-button",disabled:g==="loading",onClick:()=>{Ge(!0)},children:e(Z,{icon:"emoji2",alt:o._({id:"ggiJLM"})})}),!!le.settings.composerGIFPicker&&e("button",{type:"button",class:"toolbar-button gif-picker-button",disabled:g==="loading"||u!==void 0&&v.length>=u||!!P,onClick:()=>{ht(!0)},children:e("span",{children:"GIF"})})]}),e("div",{class:"spacer"}),g==="loading"?e(at,{abrupt:!0}):e(Ei,{maxCharacters:ee,hidden:g==="loading"}),e("label",{class:`toolbar-button ${D!==R.current||xe!=null&&xe.length&&!xe.includes(D)?"highlight":""}`,children:[e("span",{class:"icon-text",children:(Rt=si[D])==null?void 0:Rt.native}),e("select",{name:"language",value:D,onChange:r=>{const{value:d}=r.target;de(d||Ce),Se.session.set("currentLanguage",d||Ce)},disabled:g==="loading",dir:"auto",children:[un.map(([r,d,x])=>{const m=yt({code:r,fallback:d});return e("option",{value:r,children:m!==x?`${x} - ${m}`:m},r)}),e("hr",{}),dn.map(([r,d,x])=>{const m=yt({code:r,fallback:d});return e("option",{value:r,children:m!==x?`${x} - ${m}`:m},r)})]})]})," ",e("button",{type:"submit",class:"large",disabled:g==="loading",children:t?o._({id:"ImOQa9"}):n?o._({id:"EkH9pt"}):o._({id:"GMe2XV"})})]})]})]}),Ue&&e(Qe,{onClick:r=>{r.target===r.currentTarget&&dt(!1)},children:e(zi,{masto:z,instance:K,onClose:()=>{dt(!1)},defaultSearchTerm:Ue==null?void 0:Ue.defaultSearchTerm,onSelect:r=>{const d=S.current;if(!d)return;const{selectionStart:x,selectionEnd:m}=d,A=d.value,F=A.slice(0,x),I=F?/[\s\t\n\r]$/.test(F)?"":" ":"",b=A.slice(m),E=/^[\s\t\n\r]/.test(b)?"":" ",H=F+I+"@"+r+E+b;d.value=H,d.selectionStart=d.selectionEnd=m+1+r.length+E.length,d.focus(),d.dispatchEvent(new Event("input"))}})}),Ve&&e(Qe,{onClick:r=>{r.target===r.currentTarget&&Ge(!1)},children:e(_i,{masto:z,instance:K,onClose:()=>{Ge(!1)},defaultSearchTerm:Ve==null?void 0:Ve.defaultSearchTerm,onSelect:r=>{const d=S.current;if(!d)return;const{selectionStart:x,selectionEnd:m}=d,A=d.value,F=A.slice(0,x),I=F?/[\s\t\n\r]$/.test(F)?"":" ":"",b=A.slice(m),E=/^[\s\t\n\r]/.test(b)?"":" ",H=F+I+r+E+b;d.value=H,d.selectionStart=d.selectionEnd=m+r.length+E.length,d.focus(),d.dispatchEvent(new Event("input"))}})}),ln&&e(Qe,{onClick:r=>{r.target===r.currentTarget&&ht(!1)},children:e(Ai,{onClose:()=>ht(!1),onSelect:({url:r,type:d,alt_text:x})=>{if(v.length>=u){alert(o._({id:"ctFhjs",values:{maxMediaAttachments:u}}));return}(async()=>{var A,F;let m;try{m=ze({text:o._({id:"/Cw4Tx"}),duration:-1});const I=await fetch(r,{referrerPolicy:"no-referrer"}).then(H=>H.blob()),b=new File([I],d==="video/mp4"?"video.mp4":"image.gif",{type:d}),E=[...v,{file:b,type:d,size:b.size,id:null,description:x||""}];L(E),(A=m==null?void 0:m.hideToast)==null||A.call(m)}catch{(F=m==null?void 0:m.hideToast)==null||F.call(m),ze(o._({id:"VKDnAx"}))}})()}})})]})}function Gt(s){if(!s)return;const{value:t,offsetHeight:n,scrollHeight:a,clientHeight:c}=s;if(n<window.innerHeight){const l=n-c,o=t?a+l+"px":null;s.style.height=o}}async function yi(s,t){const a=(await t.v1.customEmojis.list()).filter(l=>l.visibleInPicker),c=new In(a,{keys:["shortcode"],findAllMatches:!0});return[a,c]}const an=wn(yi,{matchesArg:(s,t)=>s.instance===t.instance,maxAge:30*60*1e3}),wi=async s=>{const{detectAll:t}=await kn(async()=>{const{detectAll:a}=await import("./tinyld-light-tbgyvj3S.js");return{detectAll:a}},[],import.meta.url),n=t(s);return n!=null&&n.length?n.slice(0,2).map(a=>a.lang):null},ki=En((s,t)=>{var ee;const{masto:n,instance:a}=_t(),[c,l]=q(((ee=t.current)==null?void 0:ee.value)||""),{maxCharacters:o,performSearch:y=()=>{},onTrigger:_=()=>{},...z}=s,K=V();te(()=>{an(a,n).then(u=>{const[h,p]=u;K.current=p}).catch(u=>{})},[]);const g=V(),B=V("");te(()=>{let u,h,p;return g.current&&(u=w=>{var re;const{key:f,provide:j,text:k}=w.detail;if(B.current=k,k===""){j(Promise.resolve({matched:!1}));return}if(f===":"){const ue=(re=K.current)==null?void 0:re.search(k,{limit:5});let X="";ue.forEach(({item:me})=>{const{shortcode:S,url:O}=me;X+=`
                <li role="option" data-value="${ke(S)}">
                <img src="${ke(O)}" width="16" height="16" alt="" loading="lazy" /> 
                ${ke(S)}
              </li>`}),X+=`<li role="option" data-value="" data-more="${k}">${ve._({id:"24misb"})}</li>`,Ee.innerHTML=X,j(Promise.resolve({matched:ue.length>0,fragment:Ee}));return}const G={"@":"accounts","#":"hashtags"}[f];j(new Promise(ue=>{y({type:G,q:k,limit:5}).then(me=>{if(k!==B.current)return;const S=me[G]||me;let O="";S.forEach(U=>{var P;const{name:ie,avatarStatic:se,displayName:ae,username:D,acct:de,emojis:R,history:v}=U,L=Bn(ae,R);if(de)O+=`
                    <li role="option" data-value="${ke(de)}">
                      <span class="avatar">
                        <img src="${ke(se)}" width="16" height="16" alt="" loading="lazy" />
                      </span>
                      <span>
                        <b>${L||D}</b>
                        <br><span class="bidi-isolate">@${ke(de)}</span>
                      </span>
                    </li>
                  `;else{const J=(P=v==null?void 0:v.reduce)==null?void 0:P.call(v,(Q,ge)=>Q+ +ge.uses,0);O+=`
                    <li role="option" data-value="${ke(ie)}">
                      <span class="grow">#<b>${ke(ie)}</b></span>
                      ${J?`<span class="count">${Mn(J)}</span>`:""}
                    </li>
                  `}}),G==="accounts"&&(O+=`<li role="option" data-value="" data-more="${k}">${ve._({id:"24misb"})}</li>`),Ee.innerHTML=O,ue({matched:S.length>0,fragment:Ee})})}))},g.current.addEventListener("text-expander-change",u),h=w=>{const{key:f,item:j}=w.detail,{value:k,more:G}=j.dataset;f===":"?(w.detail.value=k?`:${k}:`:"​",G&&(w.detail.continue=!0,setTimeout(()=>{_==null||_({name:"custom-emojis",defaultSearchTerm:G})},300))):f==="@"?(w.detail.value=k?`@${k} `:"​",G&&(w.detail.continue=!0,setTimeout(()=>{_==null||_({name:"mention",defaultSearchTerm:G})},300))):w.detail.value=`${f}${k}`},g.current.addEventListener("text-expander-value",h),p=w=>{const{input:f}=w.detail;if(l(f.value),t.current){const j=new Event("input",{bubbles:!0});t.current.dispatchEvent(j)}},g.current.addEventListener("text-expander-committed",p)),()=>{g.current&&(g.current.removeEventListener("text-expander-change",u),g.current.removeEventListener("text-expander-value",h),g.current.removeEventListener("text-expander-committed",p))}},[]),te(()=>{const u=t.current;if(!u)return;new ResizeObserver(()=>{if(g.current){const{height:p}=u.getBoundingClientRect();g.current.style.height=p+"px"}}).observe(u)},[]);const C=V(0),$=V(),T=Tn(u=>{var w;if(!$.current)return;if(C.current>3){$.current.innerHTML="",$.current=null,(w=T==null?void 0:T.cancel)==null||w.call(T);return}let h,p;C.current<=3&&(h=Date.now()),$.current.innerHTML=vi(u,{maxCharacters:o})+`
`,C.current<=3&&(p=Date.now()),h&&p&&p-h>50&&C.current++},500),ne=rt(()=>{var p,w;const u=(p=$.current)==null?void 0:p.cloneNode(!0);if(!u)return;u.querySelectorAll("mark").forEach(f=>{f.remove()});const h=(w=u.innerText)==null?void 0:w.trim();h&&(async()=>{const f=await wi(h);f!=null&&f.length&&(_==null||_({name:"auto-detect-language",languages:f}))})()},2e3);return e("text-expander",{ref:g,keys:"@ # :",class:"compose-field-container",children:[e("textarea",{class:"compose-field",autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",rows:"6",cols:"50",...z,ref:t,name:"status",value:c,onKeyDown:u=>{const{key:h,target:p}=u;if(h==="Enter"&&!(u.ctrlKey||u.metaKey))try{const{value:w,selectionStart:f}=p,k=w.slice(0,f).split(`
`).slice(-1)[0];if(k&&/^\s*(-|\d+\.)\s/.test(k)){const[G,re,ue,X,me]=k.match(/^(\s*)(-|\d+\.)(\s+)(.+)?/)||[];if(me){u.preventDefault();const[S]=ue.match(/\d+/)||[],O=S?`${+S+1}.`:"-",U=`
${re}${O}${X}`;p.setRangeText(U,f,f);const ie=f+U.length;p.setSelectionRange(ie,ie)}else{const S=f-k.length;p.setRangeText("",S,f)}Gt(p),p.dispatchEvent(new Event("input"))}}catch{}$.current&&($.current.scrollTop=p.scrollTop)},onInput:u=>{var w;const{target:h}=u,p=h.value.replace(/\u200b/g,"");l(p),Gt(h),(w=s.onInput)==null||w.call(s,u),T(p),ne()},style:{width:"100%",height:"4em"},onScroll:u=>{if($.current){const{scrollTop:h}=u.target;$.current.scrollTop=h}}}),e("div",{ref:$,class:"compose-highlight","aria-hidden":"true"})]})});function Ei({maxCharacters:s=500,hidden:t}){const a=Fn(le).composerCharacterCount,c=s-a;return t?e("span",{class:"char-counter",hidden:!0}):e("span",{class:"char-counter",title:`${c}/${s}`,style:{"--percentage":a/s*100},children:[e("meter",{class:`${c<=-10?"explode":c<=0?"danger":c<=20?"warning":""}`,value:a,max:s}),e("span",{class:"counter",children:c})]})}function Yt(s,t,n,a){const c=Math.sqrt(t/s),l=Math.floor(n*c),o=Math.floor(a*c);return{newWidth:l,newHeight:o}}function Fi({attachment:s,disabled:t,lang:n,onDescriptionChange:a=()=>{},onRemove:c=()=>{}}){const{i18n:l}=Ne(),[o,y]=q("default"),_=Je("@mastodon/edit-media-attributes"),{type:z,id:K,file:g}=s,B=je(()=>g?URL.createObjectURL(g):s.url,[g,s.url]),C=!!(g!=null&&g.size),$=C?Jt():{},{mediaAttachments:{imageSizeLimit:T,imageMatrixLimit:ne,videoSizeLimit:ee,videoMatrixLimit:u,videoFrameRateLimit:h}={}}=$||{},[p,w]=q(()=>C?z.startsWith("image")&&T&&g.size>T?{type:"imageSizeLimit",details:{imageSize:g.size,imageSizeLimit:T}}:z.startsWith("video")&&ee&&g.size>ee?{type:"videoSizeLimit",details:{videoSize:g.size,videoSizeLimit:ee}}:null:null),[f,j]=q({});te(()=>{!C||!ne||(f==null?void 0:f.matrix)>ne&&w({type:"imageMatrixLimit",details:{imageMatrix:f==null?void 0:f.matrix,imageMatrixLimit:ne,width:f==null?void 0:f.width,height:f==null?void 0:f.height}})},[f,ne,C]);const[k,G]=q({});te(()=>{!C||!u||(k==null?void 0:k.matrix)>u&&w({type:"videoMatrixLimit",details:{videoMatrix:k==null?void 0:k.matrix,videoMatrixLimit:u,width:k==null?void 0:k.width,height:k==null?void 0:k.height}})},[k,u,C]);const[re,ue]=q(s.description),[X,me]=z.split("/"),S=rt(a,250);te(()=>{S(re)},[re,S]);const[O,U]=q(!1),ie=V(null);te(()=>{let R;return O&&ie.current&&(R=setTimeout(()=>{ie.current.focus()},100)),()=>{clearTimeout(R)}},[O]);const se=e(Pe,{children:K&&!_?e("div",{class:"media-desc",children:[e("span",{class:"tag",children:e(N,{id:"3wG7HI"})}),e("p",{title:re,children:s.description||e("i",{children:"No description"})})]}):e("textarea",{ref:ie,value:re||"",lang:n,placeholder:{image:l._({id:"Lh8B0N"}),video:l._({id:"mN4S+e"}),audio:l._({id:"ieZytw"})}[X],autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",disabled:t||o==="loading",class:o==="loading"?"loading":"",maxlength:"1500",onInput:R=>{const{value:v}=R.target;ue(v)}})}),ae=V(null);te(()=>()=>{var R,v;(v=(R=ae.current)==null?void 0:R.hideToast)==null||v.call(R)},[]);const D=V(null),de=R=>{const{type:v,details:L}=R;switch(v){case"imageSizeLimit":{const{imageSize:P,imageSizeLimit:J}=L;return l._({id:"d83/LB",values:{0:Ze(P),1:Ze(J)}})}case"imageMatrixLimit":{const{imageMatrix:P,imageMatrixLimit:J,width:Q,height:ge}=L,{newWidth:we,newHeight:Le}=Yt(P,J,Q,ge);return l._({id:"DuvOX/",values:{0:l.number(Q),1:l.number(ge),2:l.number(we),3:l.number(Le)}})}case"videoSizeLimit":{const{videoSize:P,videoSizeLimit:J}=L;return l._({id:"d83/LB",values:{0:Ze(P),1:Ze(J)}})}case"videoMatrixLimit":{const{videoMatrix:P,videoMatrixLimit:J,width:Q,height:ge}=L,{newWidth:we,newHeight:Le}=Yt(P,J,Q,ge);return l._({id:"DuvOX/",values:{0:l.number(Q),1:l.number(ge),2:l.number(we),3:l.number(Le)}})}case"videoFrameRateLimit":return l._({id:"S1fBwy"})}};return e(Pe,{children:[e("div",{class:"media-attachment",children:[e("div",{class:"media-preview",tabIndex:"0",onClick:()=>{U(!0)},children:X==="image"?e("img",{src:B,alt:"",onLoad:R=>{if(!C)return;const{naturalWidth:v,naturalHeight:L}=R.target;j({matrix:v*L,width:v,height:L})}}):X==="video"||X==="gifv"?e("video",{src:B+"#t=0.1",playsinline:!0,muted:!0,disablePictureInPicture:!0,preload:"metadata",onLoadedMetadata:R=>{if(!C)return;const{videoWidth:v,videoHeight:L}=R.target;v&&L&&G({matrix:v*L,width:v,height:L})}}):X==="audio"?e("audio",{src:B,controls:!0}):null}),se,e("div",{class:"media-aside",children:[e("button",{type:"button",class:"plain close-button",disabled:t,onClick:c,children:e(Z,{icon:"x",alt:l._({id:"t/YqKh"})})}),!!p&&e("button",{type:"button",class:"media-error",title:de(p),onClick:()=>{D.current&&D.current.hideToast(),D.current=ze({text:de(p),duration:1e4})},children:e(Z,{icon:"alert",alt:l._({id:"SlfejT"})})})]})]}),O&&e(Qe,{onClose:()=>{U(!1)},children:e("div",{id:"media-sheet",class:"sheet sheet-max",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>{U(!1)},children:e(Z,{icon:"x",alt:l._({id:"yz7wBu"})})}),e("header",{children:e("h2",{children:{image:l._({id:"oMslIB"}),video:l._({id:"WZw+zB"}),audio:l._({id:"KMtgtM"})}[X]})}),e("main",{tabIndex:"-1",children:[e("div",{class:"media-preview",children:X==="image"?e("img",{src:B,alt:""}):X==="video"||X==="gifv"?e("video",{src:B,playsinline:!0,controls:!0}):X==="audio"?e("audio",{src:B,controls:!0}):null}),e("div",{class:"media-form",children:[se,e("footer",{children:[X==="image"&&/^(png|jpe?g|gif|webp)$/i.test(me)&&!!le.settings.mediaAltGenerator&&!!vt&&e(Rn,{portal:{target:document.body},containerProps:{style:{zIndex:1001}},align:"center",position:"anchor",overflow:"auto",menuButton:e("button",{type:"button",class:"plain",children:e(Z,{icon:"more",size:"l",alt:l._({id:"2FYpfJ"})})}),children:[e(Ot,{disabled:o==="loading",onClick:()=>{y("loading"),ae.current=ze({text:l._({id:"8zsp51"}),duration:-1}),async function(){var R,v;try{const L=new FormData;L.append("image",g);const P=await fetch(vt,{method:"POST",body:L}).then(J=>J.json());if(P.error)throw new Error(P.error);ue(P.description)}catch(L){ze(L.message?l._({id:"wy0Iwj",values:{0:L.message}}):l._({id:"xhYfVj"}))}finally{y("default"),(v=(R=ae.current)==null?void 0:R.hideToast)==null||v.call(R)}}()},children:[e(Z,{icon:"sparkles2"}),n&&n!=="en"?e("small",{children:[e(N,{id:"o5sTJw"}),e("br",{}),"(English)"]}):e("span",{children:e(N,{id:"o5sTJw"})})]}),!!n&&n!=="en"&&e(Ot,{disabled:o==="loading",onClick:()=>{y("loading"),ae.current=ze({text:l._({id:"8zsp51"}),duration:-1}),async function(){var R,v;try{const L=new FormData;L.append("image",g);const P=`?lang=${n}`,J=await fetch(vt+P,{method:"POST",body:L}).then(Q=>Q.json());if(J.error)throw new Error(J.error);ue(J.description)}catch(L){ze(l._({id:"eNTGfp",values:{0:L!=null&&L.message?`: ${L.message}`:""}}))}finally{y("default"),(v=(R=ae.current)==null?void 0:R.hideToast)==null||v.call(R)}}()},children:[e(Z,{icon:"sparkles2"}),e("small",{children:[e(N,{id:"o5sTJw"}),e("br",{}),e(N,{id:"m+pAEQ",values:{0:yt(n)},components:{0:e("span",{class:"more-insignificant"})}})]})]})]}),e("button",{type:"button",class:"light block",onClick:()=>{U(!1)},disabled:o==="loading",children:e(N,{id:"DPfwMq"})})]})]})]})]})})]})}function Ci({lang:s,poll:t,disabled:n,onInput:a=()=>{},maxOptions:c,maxExpiration:l,minExpiration:o,maxCharactersPerOption:y}){const{_}=Ne(),{options:z,expiresIn:K,multiple:g}=t;return e("div",{class:`poll ${g?"multiple":""}`,children:[e("div",{class:"poll-choices",children:z.map((B,C)=>e("div",{class:"poll-choice",children:[e("input",{required:!0,type:"text",value:B,disabled:n,maxlength:y,placeholder:ve._({id:"LDUSXg",values:{0:C+1}}),lang:s,spellCheck:"true",dir:"auto",onInput:$=>{const{value:T}=$.target;z[C]=T,a(t)}}),e("button",{type:"button",class:"plain2 poll-button",disabled:n||z.length<=1,onClick:()=>{z.splice(C,1),a(t)},children:e(Z,{icon:"x",size:"s",alt:ve._({id:"t/YqKh"})})})]},C))}),e("div",{class:"poll-toolbar",children:[e("button",{type:"button",class:"plain2 poll-button",disabled:n||z.length>=c,onClick:()=>{z.push(""),a(t)},children:"+"})," ",e("label",{class:"multiple-choices",children:[e("input",{type:"checkbox",checked:g,disabled:n,onChange:B=>{const{checked:C}=B.target;t.multiple=C,a(t)}})," ",e(N,{id:"T57mm9"})]}),e("label",{class:"expires-in",children:[e(N,{id:"lkz6PL"})," ",e("select",{value:K,disabled:n,onChange:B=>{const{value:C}=B.target;t.expiresIn=C,a(t)},children:Object.entries(nn).filter(([B])=>B>=o&&B<=l).map(([B,C])=>e("option",{value:B,children:C()},B))})]})]}),e("div",{class:"poll-toolbar",children:e("button",{type:"button",class:"plain remove-poll-button",disabled:n,onClick:()=>{a(null)},children:e(N,{id:"CDpQAX"})})})]})}function ke(s){return s.replace(/[&<>"']/g,function(t){return"&#"+t.charCodeAt(0)+";"})}function Zt(s){for(let t in s)(s[t]===null||s[t]===void 0)&&delete s[t];return s}function zi({onClose:s=()=>{},onSelect:t=()=>{},defaultSearchTerm:n}){const{masto:a}=_t(),[c,l]=q("default"),[o,y]=q([]),[_,z]=q({}),[K,g]=q(0),B=async u=>{if(!(u!=null&&u.length))return;const h=await Dn(u,_);h&&z({..._,...h})},C=u=>{u&&(l("loading"),(async()=>{try{const h=await a.v1.accounts.search.list({q:u,limit:40,resolve:!1});y(h),B(h),l("default")}catch{l("error")}})())},$=rt(C,1e3);te(()=>{C()},[C]);const T=V();te(()=>{T.current&&(T.current.focus(),T.current.value&&(T.current.selectionStart=T.current.value.length,T.current.selectionEnd=T.current.value.length))},[]),te(()=>{n&&C(n)},[n]);const ne=u=>{const h=u.acct;t(h),s()};$e("enter",()=>{const u=o[K];u&&ne(u)},{preventDefault:!0,enableOnFormTags:["input"]});const ee=V();return $e("down",()=>{K<o.length-1?g(K+1):g(0),setTimeout(()=>{const u=ee.current.querySelector(".selected");u&&u.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},1)},{preventDefault:!0,enableOnFormTags:["input"]}),$e("up",()=>{K>0?g(K-1):g(o.length-1),setTimeout(()=>{const u=ee.current.querySelector(".selected");u&&u.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},1)},{preventDefault:!0,enableOnFormTags:["input"]}),e("div",{id:"mention-sheet",class:"sheet",children:[!!s&&e("button",{type:"button",class:"sheet-close",onClick:s,children:e(Z,{icon:"x",alt:ve._({id:"yz7wBu"})})}),e("header",{children:e("form",{onSubmit:u=>{var h;u.preventDefault(),(h=$.flush)==null||h.call($)},children:e("input",{ref:T,required:!0,type:"search",class:"block",placeholder:ve._({id:"eH1bqp"}),onInput:u=>{const{value:h}=u.target;$(h)},autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellCheck:"false",dir:"auto",defaultValue:n||""})})}),e("main",{children:(o==null?void 0:o.length)>0?e("ul",{ref:ee,class:`accounts-list ${c==="loading"?"loading":""}`,children:o.map((u,h)=>{const p=_[u.id];return e("li",{class:h===K?"selected":"",children:[e(en,{avatarSize:"xxl",account:u,relationship:p,showStats:!0,showActivity:!0}),e("button",{type:"button",class:"plain2",onClick:()=>{ne(u)},children:e(Z,{icon:"plus",size:"xl",alt:ve._({id:"m16xKo"})})})]},u.id)})}):c==="loading"?e("div",{class:"ui-state",children:e(at,{abrupt:!0})}):c==="error"?e("div",{class:"ui-state",children:e("p",{children:e(N,{id:"AThL/k"})})}):null})]})}function _i({masto:s,instance:t,onClose:n=()=>{},onSelect:a=()=>{},defaultSearchTerm:c}){const[l,o]=q("default"),y=V([]),[_,z]=q([]),K=je(()=>Se.account.get("recentlyUsedCustomEmojis")||[]),g=V();te(()=>{o("loading"),(async()=>{try{const[h,p]=await an(t,s);g.current=p,z(h),o("default")}catch{o("error")}})()},[]);const B=je(()=>{const h={"--recent--":K.filter(w=>_.find(f=>f.shortcode===w.shortcode))},p=[];return _.forEach(w=>{var f,j;if((j=(f=y.current)==null?void 0:f.push)==null||j.call(f,w),!w.category){p.push(w);return}h[w.category]||(h[w.category]=[]),h[w.category].push(w)}),p.length&&(h["--others--"]=p),h},[_]),C=V(),[$,T]=q(null),ne=$t(h=>{var w,f,j;const{value:p}=h.target;if(p){const k=(w=g.current)==null?void 0:w.search(p,{limit:zt});T(k.map(G=>G.item)),(j=(f=C.current)==null?void 0:f.scrollTo)==null||j.call(f,0,0)}else T(null)},[_]);te(()=>{c&&(_!=null&&_.length)&&ne({target:{value:c}})},[c,ne,_]);const ee=$t(h=>{a==null||a(h),n==null||n(),queueMicrotask(()=>{let p=Se.account.get("recentlyUsedCustomEmojis")||[];const w=p.findIndex(f=>f.shortcode===h.shortcode);w!==-1?(p.splice(w,1),p.unshift(h)):(p.unshift(h),p=p.filter(f=>{var j,k;return(k=(j=y.current)==null?void 0:j.find)==null?void 0:k.call(j,G=>G.shortcode===f.shortcode)}),p=p.slice(0,10)),Se.account.set("recentlyUsedCustomEmojis",p)})},[a]),u=V();return te(()=>{u.current&&(u.current.focus(),u.current.value&&(u.current.selectionStart=u.current.value.length,u.current.selectionEnd=u.current.value.length))},[]),e("div",{id:"custom-emojis-sheet",class:"sheet",children:[!!n&&e("button",{type:"button",class:"sheet-close",onClick:n,children:e(Z,{icon:"x",alt:ve._({id:"yz7wBu"})})}),e("header",{children:[e("div",{children:[e("b",{children:e(N,{id:"8i6Ueo"})})," ",l==="loading"?e(at,{}):e("small",{class:"insignificant",children:[" • ",t]})]}),e("form",{onSubmit:h=>{h.preventDefault();const p=$[0];p&&ee(`:${p.shortcode}:`)},children:e("input",{ref:u,type:"search",placeholder:ve._({id:"EarrCe"}),onInput:ne,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellCheck:"false",dir:"auto",defaultValue:c||""})})]}),e("main",{ref:C,children:$!==null?e("ul",{class:"custom-emojis-matches custom-emojis-list",children:$.map(h=>e("li",{class:"custom-emojis-match",children:e(rn,{emoji:h,onClick:()=>{ee(`:${h.shortcode}:`)},showCode:!0})},h.shortcode))}):e("div",{class:"custom-emojis-list",children:[l==="error"&&e("div",{class:"ui-state",children:e("p",{children:e(N,{id:"Kzwsg2"})})}),l==="default"&&Object.entries(B).map(([h,p])=>!!(p!=null&&p.length)&&e("div",{class:"section-container",children:[e("div",{class:"section-header",children:{"--recent--":ve._({id:"uabU9X"}),"--others--":ve._({id:"NuKR0h"})}[h]||h}),e(Li,{emojis:p,onSelect:ee})]}))]})})]})}const Li=Qt(({emojis:s,onSelect:t})=>{const{i18n:n}=Ne(),[a,c]=q(zt),l=s.length>a;return e("section",{children:[s.slice(0,a).map(o=>e(rn,{emoji:o,onClick:()=>{t(`:${o.shortcode}:`)}},o.shortcode)),l&&e("button",{type:"button",class:"plain small",onClick:()=>c(a+zt),children:e(N,{id:"iAB71E",values:{0:n.number(s.length-a)}})})]})}),rn=Qt(({emoji:s,onClick:t,showCode:n})=>{const a=c=>{const o=c.currentTarget.closest("main");if(o){const y=o.getBoundingClientRect(),_=c.currentTarget.getBoundingClientRect(),z=c.currentTarget.classList;_.left<y.left+88?(z.add("edge-left"),z.remove("edge-right")):_.right>y.right-88?(z.add("edge-right"),z.remove("edge-left")):z.remove("edge-left","edge-right")}};return e("button",{type:"button",className:"plain4",onClick:t,"data-title":n?void 0:s.shortcode,onPointerEnter:a,onFocus:a,children:[e("picture",{children:[!!s.staticUrl&&e("source",{srcSet:s.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{className:"shortcode-emoji",src:s.url||s.staticUrl,alt:s.shortcode,width:"24",height:"24",loading:"lazy",decoding:"async"})]}),n&&e(Pe,{children:[" ",e("code",{children:s.shortcode})]})]})}),xt=20;function Ai({onClose:s=()=>{},onSelect:t=()=>{}}){var C,$,T,ne,ee,u;const{i18n:n}=Ne(),[a,c]=q("default"),[l,o]=q([]),y=V(null),_=V(null),z=V(0),K=V(null);function g({offset:h}){var p,w,f;(p=_.current)!=null&&p.value&&(c("loading"),(f=(w=K.current)==null?void 0:w.scrollTo)==null||f.call(w,{top:0,left:0,behavior:"smooth"}),(async()=>{var j;try{const k={api_key:ii,q:_.current.value,rating:"g",limit:xt,bundle:"messaging_non_clips",offset:h,lang:n.locale||"en"},G=await fetch("https://api.giphy.com/v1/gifs/search?"+new URLSearchParams(k),{referrerPolicy:"no-referrer"}).then(re=>re.json());z.current=((j=G.pagination)==null?void 0:j.offset)||0,o(G),c("results")}catch{c("error")}})())}te(()=>{var h;(h=_.current)==null||h.focus()},[]);const B=rt(()=>{g({offset:0})},1e3);return e("div",{id:"gif-picker-sheet",class:"sheet",children:[!!s&&e("button",{type:"button",class:"sheet-close",onClick:s,children:e(Z,{icon:"x",alt:n._({id:"yz7wBu"})})}),e("header",{children:e("form",{ref:y,onSubmit:h=>{h.preventDefault(),g({offset:0})},children:[e("input",{ref:_,type:"search",name:"q",placeholder:n._({id:"wxlF9B"}),required:!0,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellCheck:"false",dir:"auto",onInput:B}),e("input",{type:"image",class:"powered-button",src:Qn,width:"86",height:"30",alt:n._({id:"c1Q/eU"})})]})}),e("main",{ref:K,class:a==="loading"?"loading":"",children:[a==="default"&&e("div",{class:"ui-state",children:e("p",{class:"insignificant",children:e(N,{id:"9KEidY"})})}),a==="loading"&&!((C=l==null?void 0:l.data)!=null&&C.length)&&e("div",{class:"ui-state",children:e(at,{abrupt:!0})}),(($=l==null?void 0:l.data)==null?void 0:$.length)>0?e(Pe,{children:[e("ul",{children:l.data.map(h=>{const{id:p,images:w,title:f,alt_text:j}=h,{fixed_height_small:k,fixed_height_downsampled:G,fixed_height:re,original:ue}=w,X=k!=null&&k.url?k:G!=null&&G.url?G:re;let{url:me,webp:S,width:O,height:U}=X;+U>100&&(O=O/U*100,U=100);const ie=URL.parse(me),se=ie.origin+ie.pathname;let ae;if(S){const D=URL.parse(S);ae=D.origin+D.pathname}return e("li",{children:e("button",{type:"button",onClick:()=>{const{mp4:D,url:de}=ue,R=D||de,v=URL.parse(R),L=v.origin+v.pathname;s(),t({url:L,type:D?"video/mp4":"image/gif",alt_text:j||f})},children:e("figure",{style:{"--figure-width":O+"px"},children:[e("picture",{children:[ae&&e("source",{srcset:ae,type:"image/webp"}),e("img",{src:se,width:O,height:U,loading:"lazy",decoding:"async",alt:j,referrerpolicy:"no-referrer",onLoad:D=>{D.target.style.backgroundColor="transparent"}})]}),e("figcaption",{children:j||f})]})})},p)})}),e("p",{class:"pagination",children:[((T=l.pagination)==null?void 0:T.offset)>0&&e("button",{type:"button",class:"light small",disabled:a==="loading",onClick:()=>{var h;g({offset:((h=l.pagination)==null?void 0:h.offset)-xt})},children:[e(Z,{icon:"chevron-left"}),e("span",{children:e(N,{id:"DHhJ7s"})})]}),e("span",{}),((ne=l.pagination)==null?void 0:ne.offset)+((ee=l.pagination)==null?void 0:ee.count)<((u=l.pagination)==null?void 0:u.total_count)&&e("button",{type:"button",class:"light small",disabled:a==="loading",onClick:()=>{var h;g({offset:((h=l.pagination)==null?void 0:h.offset)+xt})},children:[e("span",{children:e(N,{id:"hXzOVo"})})," ",e(Z,{icon:"chevron-right"})]})]})]}):a==="results"&&e("div",{class:"ui-state",children:e("p",{children:"No results"})}),a==="error"&&e("div",{class:"ui-state",children:e("p",{children:e(N,{id:"PbFw9n"})})})]})]})}export{Mi as default};
//# sourceMappingURL=compose-_PLYzU92.js.map
