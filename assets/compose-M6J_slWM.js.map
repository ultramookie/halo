{"version":3,"file":"compose-M6J_slWM.js","sources":["../../node_modules/@github/combobox-nav/dist/index.js","../../node_modules/@github/text-expander-element/dist/index.js","../../node_modules/ansi-regex/index.js","../../node_modules/strip-ansi/index.js","../../node_modules/string-length/index.js","../../src/assets/powered-by-giphy.svg","../../src/utils/pretty-bytes.js","../../src/components/compose.jsx"],"sourcesContent":["export default class Combobox {\n    constructor(input, list, { tabInsertsSuggestions, defaultFirstOption } = {}) {\n        this.input = input;\n        this.list = list;\n        this.tabInsertsSuggestions = tabInsertsSuggestions !== null && tabInsertsSuggestions !== void 0 ? tabInsertsSuggestions : true;\n        this.defaultFirstOption = defaultFirstOption !== null && defaultFirstOption !== void 0 ? defaultFirstOption : false;\n        this.isComposing = false;\n        if (!list.id) {\n            list.id = `combobox-${Math.random().toString().slice(2, 6)}`;\n        }\n        this.ctrlBindings = !!navigator.userAgent.match(/Macintosh/);\n        this.keyboardEventHandler = event => keyboardBindings(event, this);\n        this.compositionEventHandler = event => trackComposition(event, this);\n        this.inputHandler = this.clearSelection.bind(this);\n        input.setAttribute('role', 'combobox');\n        input.setAttribute('aria-controls', list.id);\n        input.setAttribute('aria-expanded', 'false');\n        input.setAttribute('aria-autocomplete', 'list');\n        input.setAttribute('aria-haspopup', 'listbox');\n    }\n    destroy() {\n        this.clearSelection();\n        this.stop();\n        this.input.removeAttribute('role');\n        this.input.removeAttribute('aria-controls');\n        this.input.removeAttribute('aria-expanded');\n        this.input.removeAttribute('aria-autocomplete');\n        this.input.removeAttribute('aria-haspopup');\n    }\n    start() {\n        this.input.setAttribute('aria-expanded', 'true');\n        this.input.addEventListener('compositionstart', this.compositionEventHandler);\n        this.input.addEventListener('compositionend', this.compositionEventHandler);\n        this.input.addEventListener('input', this.inputHandler);\n        this.input.addEventListener('keydown', this.keyboardEventHandler);\n        this.list.addEventListener('click', commitWithElement);\n        this.indicateDefaultOption();\n    }\n    stop() {\n        this.clearSelection();\n        this.input.setAttribute('aria-expanded', 'false');\n        this.input.removeEventListener('compositionstart', this.compositionEventHandler);\n        this.input.removeEventListener('compositionend', this.compositionEventHandler);\n        this.input.removeEventListener('input', this.inputHandler);\n        this.input.removeEventListener('keydown', this.keyboardEventHandler);\n        this.list.removeEventListener('click', commitWithElement);\n    }\n    indicateDefaultOption() {\n        var _a;\n        if (this.defaultFirstOption) {\n            (_a = Array.from(this.list.querySelectorAll('[role=\"option\"]:not([aria-disabled=\"true\"])'))\n                .filter(visible)[0]) === null || _a === void 0 ? void 0 : _a.setAttribute('data-combobox-option-default', 'true');\n        }\n    }\n    navigate(indexDiff = 1) {\n        const focusEl = Array.from(this.list.querySelectorAll('[aria-selected=\"true\"]')).filter(visible)[0];\n        const els = Array.from(this.list.querySelectorAll('[role=\"option\"]')).filter(visible);\n        const focusIndex = els.indexOf(focusEl);\n        if ((focusIndex === els.length - 1 && indexDiff === 1) || (focusIndex === 0 && indexDiff === -1)) {\n            this.clearSelection();\n            this.input.focus();\n            return;\n        }\n        let indexOfItem = indexDiff === 1 ? 0 : els.length - 1;\n        if (focusEl && focusIndex >= 0) {\n            const newIndex = focusIndex + indexDiff;\n            if (newIndex >= 0 && newIndex < els.length)\n                indexOfItem = newIndex;\n        }\n        const target = els[indexOfItem];\n        if (!target)\n            return;\n        for (const el of els) {\n            el.removeAttribute('data-combobox-option-default');\n            if (target === el) {\n                this.input.setAttribute('aria-activedescendant', target.id);\n                target.setAttribute('aria-selected', 'true');\n                scrollTo(this.list, target);\n            }\n            else {\n                el.removeAttribute('aria-selected');\n            }\n        }\n    }\n    clearSelection() {\n        this.input.removeAttribute('aria-activedescendant');\n        for (const el of this.list.querySelectorAll('[aria-selected=\"true\"]')) {\n            el.removeAttribute('aria-selected');\n        }\n        this.indicateDefaultOption();\n    }\n}\nfunction keyboardBindings(event, combobox) {\n    if (event.shiftKey || event.metaKey || event.altKey)\n        return;\n    if (!combobox.ctrlBindings && event.ctrlKey)\n        return;\n    if (combobox.isComposing)\n        return;\n    switch (event.key) {\n        case 'Enter':\n            if (commit(combobox.input, combobox.list)) {\n                event.preventDefault();\n            }\n            break;\n        case 'Tab':\n            if (combobox.tabInsertsSuggestions && commit(combobox.input, combobox.list)) {\n                event.preventDefault();\n            }\n            break;\n        case 'Escape':\n            combobox.clearSelection();\n            break;\n        case 'ArrowDown':\n            combobox.navigate(1);\n            event.preventDefault();\n            break;\n        case 'ArrowUp':\n            combobox.navigate(-1);\n            event.preventDefault();\n            break;\n        case 'n':\n            if (combobox.ctrlBindings && event.ctrlKey) {\n                combobox.navigate(1);\n                event.preventDefault();\n            }\n            break;\n        case 'p':\n            if (combobox.ctrlBindings && event.ctrlKey) {\n                combobox.navigate(-1);\n                event.preventDefault();\n            }\n            break;\n        default:\n            if (event.ctrlKey)\n                break;\n            combobox.clearSelection();\n    }\n}\nfunction commitWithElement(event) {\n    if (!(event.target instanceof Element))\n        return;\n    const target = event.target.closest('[role=\"option\"]');\n    if (!target)\n        return;\n    if (target.getAttribute('aria-disabled') === 'true')\n        return;\n    fireCommitEvent(target);\n}\nfunction commit(input, list) {\n    const target = list.querySelector('[aria-selected=\"true\"], [data-combobox-option-default=\"true\"]');\n    if (!target)\n        return false;\n    if (target.getAttribute('aria-disabled') === 'true')\n        return true;\n    target.click();\n    return true;\n}\nfunction fireCommitEvent(target) {\n    target.dispatchEvent(new CustomEvent('combobox-commit', { bubbles: true }));\n}\nfunction visible(el) {\n    return (!el.hidden &&\n        !(el instanceof HTMLInputElement && el.type === 'hidden') &&\n        (el.offsetWidth > 0 || el.offsetHeight > 0));\n}\nfunction trackComposition(event, combobox) {\n    combobox.isComposing = event.type === 'compositionstart';\n    const list = document.getElementById(combobox.input.getAttribute('aria-controls') || '');\n    if (!list)\n        return;\n    combobox.clearSelection();\n}\nfunction scrollTo(container, target) {\n    if (!inViewport(container, target)) {\n        container.scrollTop = target.offsetTop;\n    }\n}\nfunction inViewport(container, element) {\n    const scrollTop = container.scrollTop;\n    const containerBottom = scrollTop + container.clientHeight;\n    const top = element.offsetTop;\n    const bottom = top + element.clientHeight;\n    return top >= scrollTop && bottom <= containerBottom;\n}\n","import Combobox from '@github/combobox-nav';\n\nconst boundary = /\\s|\\(|\\[/;\nfunction query(text, key, cursor, { multiWord, lookBackIndex, lastMatchPosition } = {\n    multiWord: false,\n    lookBackIndex: 0,\n    lastMatchPosition: null\n}) {\n    let keyIndex = text.lastIndexOf(key, cursor - 1);\n    if (keyIndex === -1)\n        return;\n    if (keyIndex < lookBackIndex)\n        return;\n    if (multiWord) {\n        if (lastMatchPosition != null) {\n            if (lastMatchPosition === keyIndex)\n                return;\n            keyIndex = lastMatchPosition - key.length;\n        }\n        const charAfterKey = text[keyIndex + 1];\n        if (charAfterKey === ' ' && cursor >= keyIndex + key.length + 1)\n            return;\n        const newLineIndex = text.lastIndexOf('\\n', cursor - 1);\n        if (newLineIndex > keyIndex)\n            return;\n        const dotIndex = text.lastIndexOf('.', cursor - 1);\n        if (dotIndex > keyIndex)\n            return;\n    }\n    else {\n        const spaceIndex = text.lastIndexOf(' ', cursor - 1);\n        if (spaceIndex > keyIndex)\n            return;\n    }\n    const pre = text[keyIndex - 1];\n    if (pre && !boundary.test(pre))\n        return;\n    const queryString = text.substring(keyIndex + key.length, cursor);\n    return {\n        text: queryString,\n        position: keyIndex + key.length\n    };\n}\n\n/**\n * A custom element is implemented as a class which extends HTMLElement (in the\n * case of autonomous elements) or the interface you want to customize (in the\n * case of customized built-in elements).\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements#custom_element_lifecycle_callbacks\n */\nclass CustomHTMLElement extends HTMLElement {\n}\n\nclass InputStyleCloneUpdateEvent extends Event {\n    constructor() {\n        super(\"update\");\n    }\n}\nconst CloneRegistry = new WeakMap();\n/**\n * Create an element that exactly matches an input pixel-for-pixel and automatically stays in sync with it. This\n * is a non-interactive overlay on to the input and can be used to affect the visual appearance of the input\n * without modifying its behavior. The clone element is hidden by default.\n *\n * This lower level API powers the `InputRange` but provides more advanced functionality including event updates.\n *\n * Emits `update` events whenever anything is recalculated: when the layout changes, when the user scrolls, when the\n * input is updated, etc. This event may be emitted more than once per change.\n *\n * @note There may be cases in which the clone cannot observe changes to the input and fails to automatically update.\n * For example, if the `value` property on the input is written to directly, no `input` event is emitted by the input\n * and the clone does not automatically update. In these cases, `forceUpdate` can be used to manually trigger an update.\n */\n// PRIOR ART: This approach was adapted from the following MIT-licensed sources:\n//  - primer/react (Copyright (c) 2018 GitHub, Inc.): https://github.com/primer/react/blob/a0db832302702b869aa22b0c4049ad9305ef631f/src/drafts/utils/character-coordinates.ts\n//  - component/textarea-caret-position (Copyright (c) 2015 Jonathan Ong me@jongleberry.com): https://github.com/component/textarea-caret-position/blob/b5db7a7e47dd149c2a66276183c69234e4dabe30/index.js\n//  - koddsson/textarea-caret-position (Copyright (c) 2015 Jonathan Ong me@jongleberry.com): https://github.com/koddsson/textarea-caret-position/blob/eba40ec8488eed4d77815f109af22e1d9c0751d3/index.js\nclass InputStyleCloneElement extends CustomHTMLElement {\n    #styleObserver = new MutationObserver(() => this.#updateStyles());\n    #resizeObserver = new ResizeObserver(() => this.#requestUpdateLayout());\n    // This class is unique in that it will prevent itself from getting garbage collected because of the subscribed\n    // observers (if never detached). Because of this, we want to avoid preventing the existence of this class from also\n    // preventing the garbage collection of the associated input. This also allows us to automatically detach if the\n    // input gets collected.\n    #inputRef;\n    #container;\n    /**\n     * Get the clone for an input, reusing an existing one if available. This avoids creating unecessary clones, which\n     * have a performance cost due to their high-frequency event-based updates. Because these elements are shared, they\n     * should be mutated with caution.\n     *\n     * Upon initial creation the clone element will automatically be inserted into the DOM and begin observing the\n     * linked input. Only one clone per input can ever exist at a time.\n     * @param input The target input to clone.\n     */\n    static for(input) {\n        const clone = CloneRegistry.get(input) ?? new InputStyleCloneElement(input);\n        CloneRegistry.set(input, clone);\n        return clone;\n    }\n    /**\n     * Avoid constructing directly: Use `InputStyleCloneElement.for` instead.\n     * @private\n     */\n    constructor(input) {\n        super();\n        this.#inputRef = new WeakRef(input);\n        // We want position:absolute so it doesn't take space in the layout, but that doesn't work with display:table-cell\n        // used in the HTMLInputElement approach. So we need a wrapper.\n        this.#container = document.createElement(\"div\");\n        this.#container.style.position = \"absolute\";\n        this.#container.style.pointerEvents = \"none\";\n        input.after(this.#container);\n        this.#container.appendChild(this);\n    }\n    /**\n     * Force a recalculation. Will emit an `update` event. This is typically not needed unless the input has changed in\n     * an unobservable way, eg by directly writing to the `value` property.\n     */\n    forceUpdate() {\n        this.#updateStyles();\n        this.#updateText();\n    }\n    /** @private */\n    connectedCallback() {\n        const input = this.#inputRef.deref();\n        if (!input)\n            return this.remove();\n        this.style.pointerEvents = \"none\";\n        this.style.userSelect = \"none\";\n        this.style.overflow = \"hidden\";\n        this.style.display = \"block\";\n        // Important not to use display:none which would not render the content at all\n        this.style.visibility = \"hidden\";\n        if (input instanceof HTMLTextAreaElement) {\n            this.style.whiteSpace = \"pre-wrap\";\n            this.style.wordWrap = \"break-word\";\n        }\n        else {\n            this.style.whiteSpace = \"nowrap\";\n            // text in single-line inputs is vertically centered\n            this.style.display = \"table-cell\";\n            this.style.verticalAlign = \"middle\";\n        }\n        this.setAttribute(\"aria-hidden\", \"true\");\n        this.#updateStyles();\n        this.#updateText();\n        this.#styleObserver.observe(input, {\n            attributeFilter: [\n                \"style\",\n                \"dir\", // users can right-click in some browsers to change the text direction dynamically\n            ],\n        });\n        this.#resizeObserver.observe(input);\n        document.addEventListener(\"scroll\", this.#onDocumentScrollOrResize, { capture: true });\n        window.addEventListener(\"resize\", this.#onDocumentScrollOrResize, { capture: true });\n        // capture so this happens first, so other things can respond to `input` events after this data updates\n        input.addEventListener(\"input\", this.#onInput, { capture: true });\n    }\n    /** @private */\n    disconnectedCallback() {\n        this.#container.remove();\n        this.#styleObserver.disconnect();\n        this.#resizeObserver.disconnect();\n        document.removeEventListener(\"scroll\", this.#onDocumentScrollOrResize, { capture: true });\n        window.removeEventListener(\"resize\", this.#onDocumentScrollOrResize, { capture: true });\n        const input = this.#inputRef.deref();\n        if (input) {\n            input.removeEventListener(\"input\", this.#onInput, { capture: true });\n            CloneRegistry.delete(input);\n        }\n    }\n    // --- private ---\n    /** Perform `fn` using the `input` if it is still available. If not, clean up the clone instead. */\n    #usingInput(fn) {\n        const input = this.#inputRef.deref();\n        if (!input)\n            return this.remove();\n        return fn(input);\n    }\n    /** Current relative x-adjustment in pixels, executed via CSS transform. */\n    #xOffset = 0;\n    /** Current relative y-adjustment in pixels, executed via CSS transform. */\n    #yOffset = 0;\n    /**\n     * Update only geometric properties without recalculating styles. Typically call `#requestUpdateLayout` instead to\n     * only update once per animation frame.\n     */\n    #updateLayout() {\n        // This runs often, so keep it as fast as possible! Avoid all unecessary updates.\n        this.#usingInput((input) => {\n            const inputStyle = window.getComputedStyle(input);\n            this.style.height = inputStyle.height;\n            this.style.width = inputStyle.width;\n            // Immediately re-adjust for browser inconsistencies in scrollbar handling, if necessary\n            if (input.clientHeight !== this.clientHeight)\n                this.style.height = `calc(${inputStyle.height} + ${input.clientHeight - this.clientHeight}px)`;\n            if (input.clientWidth !== this.clientWidth)\n                this.style.width = `calc(${inputStyle.width} + ${input.clientWidth - this.clientWidth}px)`;\n            // Position on top of the input\n            const inputRect = input.getBoundingClientRect();\n            const cloneRect = this.getBoundingClientRect();\n            this.#xOffset = this.#xOffset + inputRect.left - cloneRect.left;\n            this.#yOffset = this.#yOffset + inputRect.top - cloneRect.top;\n            this.style.transform = `translate(${this.#xOffset}px, ${this.#yOffset}px)`;\n            this.scrollTop = input.scrollTop;\n            this.scrollLeft = input.scrollLeft;\n            this.dispatchEvent(new InputStyleCloneUpdateEvent());\n        });\n    }\n    #isLayoutUpdating = false;\n    /** Request a layout update. Will only happen once per animation frame, to avoid unecessary updates. */\n    #requestUpdateLayout() {\n        if (this.#isLayoutUpdating)\n            return;\n        this.#isLayoutUpdating = true;\n        requestAnimationFrame(() => {\n            this.#updateLayout();\n            this.#isLayoutUpdating = false;\n        });\n    }\n    /** Update the styles of the clone based on the styles of the input, then request a layout update. */\n    #updateStyles() {\n        this.#usingInput((input) => {\n            const inputStyle = window.getComputedStyle(input);\n            for (const prop of propertiesToCopy)\n                this.style[prop] = inputStyle[prop];\n            this.#requestUpdateLayout();\n        });\n    }\n    /**\n     * Update the text content of the clone based on the text content of the input. Triggers a layout update in case the\n     * text update caused scrolling.\n     */\n    #updateText() {\n        this.#usingInput((input) => {\n            this.textContent = input.value;\n            // This is often unecessary on a pure text update, but text updates could potentially cause layout updates like\n            // scrolling or resizing. And we run the update on _every frame_ when scrolling, so this isn't that expensive.\n            // We don't requestUpdateLayout here because this one should happen synchronously, so that clients can react\n            // within their own `input` event handlers.\n            this.#updateLayout();\n        });\n    }\n    #onInput = () => this.#updateText();\n    #onDocumentScrollOrResize = (event) => {\n        this.#usingInput((input) => {\n            if (event.target === document ||\n                event.target === window ||\n                (event.target instanceof Node && event.target.contains(input)))\n                this.#requestUpdateLayout();\n        });\n    };\n}\n// Note that some browsers, such as Firefox, do not concatenate properties\n// into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\n// so we have to list every single property explicitly.\nconst propertiesToCopy = [\n    // RTL / vertical writing modes support:\n    \"direction\",\n    \"writingMode\",\n    \"unicodeBidi\",\n    \"textOrientation\",\n    \"boxSizing\",\n    \"borderTopWidth\",\n    \"borderRightWidth\",\n    \"borderBottomWidth\",\n    \"borderLeftWidth\",\n    \"borderStyle\",\n    \"paddingTop\",\n    \"paddingRight\",\n    \"paddingBottom\",\n    \"paddingLeft\",\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n    \"fontStyle\",\n    \"fontVariant\",\n    \"fontWeight\",\n    \"fontStretch\",\n    \"fontSize\",\n    \"fontSizeAdjust\",\n    \"lineHeight\",\n    \"fontFamily\",\n    \"textAlign\",\n    \"textTransform\",\n    \"textIndent\",\n    \"textDecoration\",\n    \"letterSpacing\",\n    \"wordSpacing\",\n    \"tabSize\",\n    \"MozTabSize\",\n];\n// Inspired by https://github.com/github/catalyst/blob/dc284dcf4f82329a9cac5c867462a8fa529b6c40/src/register.ts\ntry {\n    customElements.define(\"input-style-clone\", InputStyleCloneElement);\n}\ncatch (e) {\n    // Throws DOMException with NotSupportedError if already defined\n    if (!(e instanceof DOMException && e.name === \"NotSupportedError\"))\n        throw e;\n}\n\nclass InputRange {\n    #inputElement;\n    #startOffset;\n    #endOffset;\n    /**\n     * Construct a new `InputRange`.\n     * @param element The target input element that contains the content for the range.\n     * @param startOffset The inclusive 0-based start index for the range. Will be adjusted to fit in the input contents.\n     * @param endOffset The exclusive 0-based end index for the range. Will be adjusted to fit in the input contents.\n     */\n    constructor(element, startOffset = 0, endOffset = startOffset) {\n        this.#inputElement = element;\n        this.#startOffset = startOffset;\n        this.#endOffset = endOffset;\n    }\n    /**\n     * Create a new range from the current user selection. If the input is not focused, the range will just be the start\n     * of the input (offsets `0` to `0`).\n     *\n     * This can be used to get the caret coordinates: if the resulting range is `collapsed`, the location of the\n     * `getBoundingClientRect` will be the location of the caret caret (note, however, that the width will be `0` in\n     * this case).\n     */\n    static fromSelection(input) {\n        const { selectionStart, selectionEnd } = input;\n        return new InputRange(input, selectionStart ?? undefined, selectionEnd ?? undefined);\n    }\n    /** Returns true if the start is equal to the end of this range. */\n    get collapsed() {\n        return this.startOffset === this.endOffset;\n    }\n    /** Always returns the containing input element. */\n    get commonAncestorContainer() {\n        return this.#inputElement;\n    }\n    /** Always returns the containing input element. */\n    get endContainer() {\n        return this.#inputElement;\n    }\n    /** Always returns the containing input element. */\n    get startContainer() {\n        return this.#inputElement;\n    }\n    get startOffset() {\n        return this.#startOffset;\n    }\n    get endOffset() {\n        return this.#endOffset;\n    }\n    /** Update the inclusive start offset. Will be adjusted to fit within the content size. */\n    setStartOffset(offset) {\n        this.#startOffset = this.#clampOffset(offset);\n    }\n    /** Update the exclusive end offset. Will be adjusted to fit within the content size. */\n    setEndOffset(offset) {\n        this.#endOffset = this.#clampOffset(offset);\n    }\n    /**\n     * Collapse this range to one side.\n     * @param toStart If `true`, will collapse to the start side. Otherwise, will collapse to the end.\n     */\n    collapse(toStart = false) {\n        if (toStart)\n            this.setEndOffset(this.startOffset);\n        else\n            this.setStartOffset(this.endOffset);\n    }\n    /** Returns a `DocumentFragment` containing a new `Text` node containing the content in the range. */\n    cloneContents() {\n        return this.#createCloneRange().cloneContents();\n    }\n    /** Create a copy of this range. */\n    cloneRange() {\n        return new InputRange(this.#inputElement, this.startOffset, this.endOffset);\n    }\n    /**\n     * Obtain one rect that contains the entire contents of the range. If the range spans multiple lines, this box will\n     * contain all pieces of the range but may also contain some space outside the range.\n     * @see https://iansan5653.github.io/dom-input-range/demos/playground/\n     */\n    getBoundingClientRect() {\n        return this.#createCloneRange().getBoundingClientRect();\n    }\n    /**\n     * Obtain the rects that contain contents of this range. If the range spans multiple lines, there will be multiple\n     * bounding boxes. These boxes can be used, for example, to draw a highlight over the range.\n     * @see https://iansan5653.github.io/dom-input-range/demos/playground/\n     */\n    getClientRects() {\n        return this.#createCloneRange().getClientRects();\n    }\n    /** Get the contents of the range as a string. */\n    toString() {\n        return this.#createCloneRange().toString();\n    }\n    /**\n     * Get the underlying `InputStyleClone` instance powering these calculations. This can be used to listen for\n     * updates to trigger layout recalculation.\n     */\n    getStyleClone() {\n        return this.#styleClone;\n    }\n    // --- private ---\n    get #styleClone() {\n        return InputStyleCloneElement.for(this.#inputElement);\n    }\n    get #cloneElement() {\n        return this.#styleClone;\n    }\n    #clampOffset(offset) {\n        return Math.max(0, Math.min(offset, this.#inputElement.value.length));\n    }\n    #createCloneRange() {\n        // It's tempting to create a single Range and reuse it across the lifetime of the class. However, this wouldn't be\n        // accurate because the contents of the input can change and the contents of the range would become stale. So we\n        // must create a new range every time we need it.\n        const range = document.createRange();\n        const textNode = this.#cloneElement.childNodes[0];\n        if (textNode) {\n            range.setStart(textNode, this.startOffset);\n            range.setEnd(textNode, this.endOffset);\n        }\n        return range;\n    }\n}\n\nconst states = new WeakMap();\nclass TextExpander {\n    constructor(expander, input) {\n        this.expander = expander;\n        this.input = input;\n        this.combobox = null;\n        this.menu = null;\n        this.match = null;\n        this.justPasted = false;\n        this.lookBackIndex = 0;\n        this.oninput = this.onInput.bind(this);\n        this.onpaste = this.onPaste.bind(this);\n        this.onkeydown = this.onKeydown.bind(this);\n        this.oncommit = this.onCommit.bind(this);\n        this.onmousedown = this.onMousedown.bind(this);\n        this.onblur = this.onBlur.bind(this);\n        this.interactingWithList = false;\n        input.addEventListener('paste', this.onpaste);\n        input.addEventListener('input', this.oninput);\n        input.addEventListener('keydown', this.onkeydown);\n        input.addEventListener('blur', this.onblur);\n    }\n    destroy() {\n        this.input.removeEventListener('paste', this.onpaste);\n        this.input.removeEventListener('input', this.oninput);\n        this.input.removeEventListener('keydown', this.onkeydown);\n        this.input.removeEventListener('blur', this.onblur);\n    }\n    dismissMenu() {\n        if (this.deactivate()) {\n            this.lookBackIndex = this.input.selectionEnd || this.lookBackIndex;\n        }\n    }\n    activate(match, menu) {\n        var _a, _b;\n        if (this.input !== document.activeElement && this.input !== ((_b = (_a = document.activeElement) === null || _a === void 0 ? void 0 : _a.shadowRoot) === null || _b === void 0 ? void 0 : _b.activeElement)) {\n            return;\n        }\n        this.deactivate();\n        this.menu = menu;\n        if (!menu.id)\n            menu.id = `text-expander-${Math.floor(Math.random() * 100000).toString()}`;\n        this.expander.append(menu);\n        this.combobox = new Combobox(this.input, menu);\n        this.expander.dispatchEvent(new Event('text-expander-activate'));\n        this.positionMenu(menu, match.position);\n        this.combobox.start();\n        menu.addEventListener('combobox-commit', this.oncommit);\n        menu.addEventListener('mousedown', this.onmousedown);\n        this.combobox.navigate(1);\n    }\n    positionMenu(menu, position) {\n        const caretRect = new InputRange(this.input, position).getBoundingClientRect();\n        const targetPosition = { left: caretRect.left, top: caretRect.top + caretRect.height };\n        const currentPosition = menu.getBoundingClientRect();\n        const delta = {\n            left: targetPosition.left - currentPosition.left,\n            top: targetPosition.top - currentPosition.top\n        };\n        if (delta.left !== 0 || delta.top !== 0) {\n            const currentStyle = getComputedStyle(menu);\n            menu.style.left = currentStyle.left ? `calc(${currentStyle.left} + ${delta.left}px)` : `${delta.left}px`;\n            menu.style.top = currentStyle.top ? `calc(${currentStyle.top} + ${delta.top}px)` : `${delta.top}px`;\n        }\n    }\n    deactivate() {\n        const menu = this.menu;\n        if (!menu || !this.combobox)\n            return false;\n        this.expander.dispatchEvent(new Event('text-expander-deactivate'));\n        this.menu = null;\n        menu.removeEventListener('combobox-commit', this.oncommit);\n        menu.removeEventListener('mousedown', this.onmousedown);\n        this.combobox.destroy();\n        this.combobox = null;\n        menu.remove();\n        return true;\n    }\n    onCommit({ target }) {\n        var _a;\n        const item = target;\n        if (!(item instanceof HTMLElement))\n            return;\n        if (!this.combobox)\n            return;\n        const match = this.match;\n        if (!match)\n            return;\n        const beginning = this.input.value.substring(0, match.position - match.key.length);\n        const remaining = this.input.value.substring(match.position + match.text.length);\n        const detail = { item, key: match.key, value: null, continue: false };\n        const canceled = !this.expander.dispatchEvent(new CustomEvent('text-expander-value', { cancelable: true, detail }));\n        if (canceled)\n            return;\n        if (!detail.value)\n            return;\n        let suffix = (_a = this.expander.getAttribute('suffix')) !== null && _a !== void 0 ? _a : ' ';\n        if (detail.continue) {\n            suffix = '';\n        }\n        const value = `${detail.value}${suffix}`;\n        this.input.value = beginning + value + remaining;\n        const cursor = beginning.length + value.length;\n        this.deactivate();\n        this.input.focus({\n            preventScroll: true\n        });\n        this.input.selectionStart = cursor;\n        this.input.selectionEnd = cursor;\n        if (!detail.continue) {\n            this.lookBackIndex = cursor;\n            this.match = null;\n        }\n        this.expander.dispatchEvent(new CustomEvent('text-expander-committed', { cancelable: false, detail: { input: this.input } }));\n    }\n    onBlur() {\n        if (this.interactingWithList) {\n            this.interactingWithList = false;\n            return;\n        }\n        this.deactivate();\n    }\n    onPaste() {\n        this.justPasted = true;\n    }\n    async onInput() {\n        if (this.justPasted) {\n            this.justPasted = false;\n            return;\n        }\n        const match = this.findMatch();\n        if (match) {\n            this.match = match;\n            const menu = await this.notifyProviders(match);\n            if (!this.match)\n                return;\n            if (menu) {\n                this.activate(match, menu);\n            }\n            else {\n                this.deactivate();\n            }\n        }\n        else {\n            this.match = null;\n            this.deactivate();\n        }\n    }\n    findMatch() {\n        const cursor = this.input.selectionEnd || 0;\n        const text = this.input.value;\n        if (cursor <= this.lookBackIndex) {\n            this.lookBackIndex = cursor - 1;\n        }\n        for (const { key, multiWord } of this.expander.keys) {\n            const found = query(text, key, cursor, {\n                multiWord,\n                lookBackIndex: this.lookBackIndex,\n                lastMatchPosition: this.match ? this.match.position : null\n            });\n            if (found) {\n                return { text: found.text, key, position: found.position };\n            }\n        }\n    }\n    async notifyProviders(match) {\n        const providers = [];\n        const provide = (result) => providers.push(result);\n        const canceled = !this.expander.dispatchEvent(new CustomEvent('text-expander-change', { cancelable: true, detail: { provide, text: match.text, key: match.key } }));\n        if (canceled)\n            return;\n        const all = await Promise.all(providers);\n        const fragments = all.filter(x => x.matched).map(x => x.fragment);\n        return fragments[0];\n    }\n    onMousedown() {\n        this.interactingWithList = true;\n    }\n    onKeydown(event) {\n        if (event.key === 'Escape') {\n            this.match = null;\n            if (this.deactivate()) {\n                this.lookBackIndex = this.input.selectionEnd || this.lookBackIndex;\n                event.stopImmediatePropagation();\n                event.preventDefault();\n            }\n        }\n    }\n}\nclass TextExpanderElement extends HTMLElement {\n    get keys() {\n        const keysAttr = this.getAttribute('keys');\n        const keys = keysAttr ? keysAttr.split(' ') : [];\n        const multiWordAttr = this.getAttribute('multiword');\n        const multiWord = multiWordAttr ? multiWordAttr.split(' ') : [];\n        const globalMultiWord = multiWord.length === 0 && this.hasAttribute('multiword');\n        return keys.map(key => ({ key, multiWord: globalMultiWord || multiWord.includes(key) }));\n    }\n    connectedCallback() {\n        const input = this.querySelector('input[type=\"text\"], textarea');\n        if (!(input instanceof HTMLInputElement || input instanceof HTMLTextAreaElement))\n            return;\n        const state = new TextExpander(this, input);\n        states.set(this, state);\n    }\n    disconnectedCallback() {\n        const state = states.get(this);\n        if (!state)\n            return;\n        state.destroy();\n        states.delete(this);\n    }\n    dismiss() {\n        const state = states.get(this);\n        if (!state)\n            return;\n        state.dismissMenu();\n    }\n}\n\nif (!window.customElements.get('text-expander')) {\n    window.TextExpanderElement = TextExpanderElement;\n    window.customElements.define('text-expander', TextExpanderElement);\n}\n\nexport default TextExpanderElement;\n","export default function ansiRegex({onlyFirst = false} = {}) {\n\tconst pattern = [\n\t    '[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]+)*|[a-zA-Z\\\\d]+(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]*)*)?\\\\u0007)',\n\t\t'(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PR-TZcf-ntqry=><~]))'\n\t].join('|');\n\n\treturn new RegExp(pattern, onlyFirst ? undefined : 'g');\n}\n","import ansiRegex from 'ansi-regex';\n\nconst regex = ansiRegex();\n\nexport default function stripAnsi(string) {\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError(`Expected a \\`string\\`, got \\`${typeof string}\\``);\n\t}\n\n\t// Even though the regex is global, we don't need to reset the `.lastIndex`\n\t// because unlike `.exec()` and `.test()`, `.replace()` does it automatically\n\t// and doing it manually has a performance penalty.\n\treturn string.replace(regex, '');\n}\n","import stripAnsi from 'strip-ansi';\n\nconst segmenter = new Intl.Segmenter();\n\nexport default function stringLength(string, {countAnsiEscapeCodes = false} = {}) {\n\tif (string === '') {\n\t\treturn 0;\n\t}\n\n\tif (!countAnsiEscapeCodes) {\n\t\tstring = stripAnsi(string);\n\t}\n\n\tif (string === '') {\n\t\treturn 0;\n\t}\n\n\tlet length = 0;\n\n\tfor (const _ of segmenter.segment(string)) { // eslint-disable-line no-unused-vars\n\t\tlength++;\n\t}\n\n\treturn length;\n}\n","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.0'%20viewBox='0%200%20641%20223'%3e%3cpath%20fill='%23aaa'%20d='M86%20214c-9-1-17-4-24-8l-6-3-5-5-5-4-4-6-4-6-3-8-2-8v-27l2-9%203-9%204-6%204-6%205-5%205-5%207-3%206-4%207-2%207-2%2012-1h12l7%201%208%202%207%204%207%203%205%205%205%204-10%2010-10%209-4-3-10-5-5-1H88l-5%202-6%203-3%204-4%204-2%205-2%206v6l-1%207%201%207%202%207%203%205%202%204%204%203%204%203%205%202%206%202h9l10-1%205-2%206-3v-16H91v-27h59v54l-1%203-2%203-5%204-4%204-5%203-5%202-8%202-8%202-10%201H92l-6-1zm266-62V91h34v46h44V91h34v121h-34v-46h-44v46h-34v-61zm-182-1V90h34v121h-34v-60zm59-1V90h35l36%201%205%202c3%200%208%202%2010%204l5%202%204%205%205%204%203%207%203%207%201%2013v13l-4%206-3%207-4%204-5%205-5%202-5%203-6%202-5%201-18%201h-18v32h-34v-61zm67-2%203-2%202-4%202-5v-5l-2-4-2-4-3-2-3-3h-30v31h30l3-2zm226%2039v-24l-8-12-18-28a1751%201751%200%200%200-20-31v-2h39l7%2012%2012%2021%206%209%2013-21%2013-21h38v2l-41%2061-7%2010v48h-34v-24zM109%2066l-4-1-5-5-5-4-1-5-3-9v-5l1-5c2-7%203-10%208-15l4-4%207-2%207-2h7l6%201%205%202%205%202%203%204%204%203%202%206%202%205v13l-2%205-2%206-4%204-3%203-5%202-4%202-9%201h-9l-5-2zm22-11%204-2%203-4%202-5V34l-2-4-2-4-3-2-4-3-5-1h-6l-4%202-5%202-2%204-3%205-1%203v4l1%205%202%205%202%202%205%203%204%202h10l4-2zM37%2039V11h33l3%201%203%202%204%203%203%203%201%205%201%204v5l-1%204-3%204-3%205-4%201-3%202-11%201H49v16H37V39zm31%200%203-2%201-2%201-2v-4l-1-3-3-2-2-2H49v18h15l4-1zm107%2025a512%20512%200%200%200-19-53h14l4%2014%206%2019%201%204%201-1%207-19%205-17h9l6%2019%207%2018v-1l2-6%205-17%204-13h14v1l-4%2012-16%2041v2h-5l-5-1-6-15-6-15-1%201-3%207-6%2015-2%208h-11l-1-3zm74-25V11h42v11h-29v2l-1%205v4h29v11h-28v11h2l15%201h13v11h-43V39zm55%200V11h33l5%203%205%202%202%204%202%205v10l-2%203-1%204-5%203-5%203%205%205%208%2010%203%204h-14l-7-9-8-10h-9v19h-12V39zm33-3%202-3v-6l-3-3-2-3h-18v16h1v1h17l2-2zm26%203V11h42v11h-29l-1%206v5h29v11h-28v5l-1%205%201%201v1h30v11h-43V39zm54%200V11h17l18%201%204%202%205%203%202%204%203%204%202%206%201%206v5c-1%206-3%2012-6%2015l-3%204-5%203-5%202-17%201h-16V39zm33%2014%205-5%202-3v-6l-1-6-1-3-1-3-4-3-3-2h-5l-6-1-3%201h-3v34h9l8-1%203-2zm50-14V11h34l5%202%204%202%202%203%202%203v9l-2%202-3%204-1%201%203%203%203%204%201%203%201%204-1%204-1%204-3%203-3%203-5%201-5%201h-31V39zm34%2015%202-1v-6l-2-2-2-2h-20v13h20l2-2zm-3-22%204-2v-6l-2-1-2-2h-19v12h16l4-1zm42%2024V45l-6-9-11-17-5-8h15l4%208%207%2011%202%203%207-11%207-11h14l-11%2016-11%2017v23h-12V56z'/%3e%3c/svg%3e\"","import { i18n } from '@lingui/core';\n\n// https://tc39.es/ecma402/#table-sanctioned-single-unit-identifiers\nconst BYTES_UNITS = [\n  'byte',\n  'kilobyte',\n  'megabyte',\n  'gigabyte',\n  'terabyte',\n  'petabyte',\n];\nexport default function prettyBytes(bytes) {\n  const unitIndex = Math.min(\n    Math.floor(Math.log2(bytes) / 10),\n    BYTES_UNITS.length - 1,\n  );\n  const value = bytes / 1024 ** unitIndex;\n  return i18n.number(value, {\n    style: 'unit',\n    unit: BYTES_UNITS[unitIndex],\n    unitDisplay: 'narrow',\n    maximumFractionDigits: 0,\n  });\n}\n","import './compose.css';\nimport '@github/text-expander-element';\n\nimport { msg, plural, t, Trans } from '@lingui/macro';\nimport { useLingui } from '@lingui/react';\nimport { MenuItem } from '@szhsin/react-menu';\nimport { deepEqual } from 'fast-equals';\nimport Fuse from 'fuse.js';\nimport { forwardRef, memo } from 'preact/compat';\nimport {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'preact/hooks';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport stringLength from 'string-length';\nimport { detectAll } from 'tinyld/light';\nimport { uid } from 'uid/single';\nimport { useDebouncedCallback, useThrottledCallback } from 'use-debounce';\nimport { useSnapshot } from 'valtio';\n\nimport poweredByGiphyURL from '../assets/powered-by-giphy.svg';\n\nimport Menu2 from '../components/menu2';\nimport supportedLanguages from '../data/status-supported-languages';\nimport urlRegex from '../data/url-regex';\nimport { api } from '../utils/api';\nimport db from '../utils/db';\nimport emojifyText from '../utils/emojify-text';\nimport i18nDuration from '../utils/i18n-duration';\nimport isRTL from '../utils/is-rtl';\nimport localeMatch from '../utils/locale-match';\nimport localeCode2Text from '../utils/localeCode2Text';\nimport mem from '../utils/mem';\nimport openCompose from '../utils/open-compose';\nimport pmem from '../utils/pmem';\nimport prettyBytes from '../utils/pretty-bytes';\nimport { fetchRelationships } from '../utils/relationships';\nimport shortenNumber from '../utils/shorten-number';\nimport showToast from '../utils/show-toast';\nimport states, { saveStatus } from '../utils/states';\nimport store from '../utils/store';\nimport {\n  getCurrentAccount,\n  getCurrentAccountNS,\n  getCurrentInstance,\n  getCurrentInstanceConfiguration,\n} from '../utils/store-utils';\nimport supports from '../utils/supports';\nimport useCloseWatcher from '../utils/useCloseWatcher';\nimport useInterval from '../utils/useInterval';\nimport visibilityIconsMap from '../utils/visibility-icons-map';\n\nimport AccountBlock from './account-block';\n// import Avatar from './avatar';\nimport Icon from './icon';\nimport Loader from './loader';\nimport Modal from './modal';\nimport Status from './status';\n\nconst {\n  PHANPY_IMG_ALT_API_URL: IMG_ALT_API_URL,\n  PHANPY_GIPHY_API_KEY: GIPHY_API_KEY,\n} = import.meta.env;\n\nconst supportedLanguagesMap = supportedLanguages.reduce((acc, l) => {\n  const [code, common, native] = l;\n  acc[code] = {\n    common,\n    native,\n  };\n  return acc;\n}, {});\n\n/* NOTES:\n  - Max character limit includes BOTH status text and Content Warning text\n*/\n\nconst expiryOptions = {\n  300: i18nDuration(5, 'minute'),\n  1_800: i18nDuration(30, 'minute'),\n  3_600: i18nDuration(1, 'hour'),\n  21_600: i18nDuration(6, 'hour'),\n  86_400: i18nDuration(1, 'day'),\n  259_200: i18nDuration(3, 'day'),\n  604_800: i18nDuration(1, 'week'),\n};\nconst expirySeconds = Object.keys(expiryOptions);\nconst oneDay = 24 * 60 * 60;\n\nconst expiresInFromExpiresAt = (expiresAt) => {\n  if (!expiresAt) return oneDay;\n  const delta = (new Date(expiresAt).getTime() - Date.now()) / 1000;\n  return expirySeconds.find((s) => s >= delta) || oneDay;\n};\n\nconst menu = document.createElement('ul');\nmenu.role = 'listbox';\nmenu.className = 'text-expander-menu';\n\n// Set IntersectionObserver on menu, reposition it because text-expander doesn't handle it\nconst windowMargin = 16;\nconst observer = new IntersectionObserver((entries) => {\n  entries.forEach((entry) => {\n    if (entry.isIntersecting) {\n      const { left, width } = entry.boundingClientRect;\n      const { innerWidth } = window;\n      if (left + width > innerWidth) {\n        const insetInlineStart = isRTL() ? 'right' : 'left';\n        menu.style[insetInlineStart] = innerWidth - width - windowMargin + 'px';\n      }\n    }\n  });\n});\nobserver.observe(menu);\n\nconst DEFAULT_LANG = localeMatch(\n  [new Intl.DateTimeFormat().resolvedOptions().locale, ...navigator.languages],\n  supportedLanguages.map((l) => l[0]),\n  'en',\n);\n\n// https://github.com/mastodon/mastodon/blob/c4a429ed47e85a6bbf0d470a41cc2f64cf120c19/app/javascript/mastodon/features/compose/util/counter.js\nconst urlRegexObj = new RegExp(urlRegex.source, urlRegex.flags);\nconst usernameRegex = /(^|[^\\/\\w])@(([a-z0-9_]+)@[a-z0-9\\.\\-]+[a-z0-9]+)/gi;\nconst urlPlaceholder = '$2xxxxxxxxxxxxxxxxxxxxxxx';\nfunction countableText(inputText) {\n  return inputText\n    .replace(urlRegexObj, urlPlaceholder)\n    .replace(usernameRegex, '$1@$3');\n}\n\n// https://github.com/mastodon/mastodon/blob/c03bd2a238741a012aa4b98dc4902d6cf948ab63/app/models/account.rb#L69\nconst USERNAME_RE = /[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?/i;\nconst MENTION_RE = new RegExp(\n  `(^|[^=\\\\/\\\\w])(@${USERNAME_RE.source}(?:@[\\\\p{L}\\\\w.-]+[\\\\w]+)?)`,\n  'uig',\n);\n\n// AI-generated, all other regexes are too complicated\nconst HASHTAG_RE = new RegExp(\n  `(^|[^=\\\\/\\\\w])(#[a-z0-9_]+([a-z0-9_.]+[a-z0-9_]+)?)(?![\\\\/\\\\w])`,\n  'ig',\n);\n\n// https://github.com/mastodon/mastodon/blob/23e32a4b3031d1da8b911e0145d61b4dd47c4f96/app/models/custom_emoji.rb#L31\nconst SHORTCODE_RE_FRAGMENT = '[a-zA-Z0-9_]{2,}';\nconst SCAN_RE = new RegExp(\n  `(^|[^=\\\\/\\\\w])(:${SHORTCODE_RE_FRAGMENT}:)(?=[^A-Za-z0-9_:]|$)`,\n  'g',\n);\n\nconst segmenter = new Intl.Segmenter();\nfunction escapeHTML(text) {\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&apos;');\n}\nfunction highlightText(text, { maxCharacters = Infinity }) {\n  // Exceeded characters limit\n  const { composerCharacterCount } = states;\n  if (composerCharacterCount > maxCharacters) {\n    // Highlight exceeded characters\n    let withinLimitHTML = '',\n      exceedLimitHTML = '';\n    const htmlSegments = segmenter.segment(text);\n    for (const { segment, index } of htmlSegments) {\n      if (index < maxCharacters) {\n        withinLimitHTML += segment;\n      } else {\n        exceedLimitHTML += segment;\n      }\n    }\n    if (exceedLimitHTML) {\n      exceedLimitHTML =\n        '<mark class=\"compose-highlight-exceeded\">' +\n        escapeHTML(exceedLimitHTML) +\n        '</mark>';\n    }\n    return escapeHTML(withinLimitHTML) + exceedLimitHTML;\n  }\n\n  return escapeHTML(text)\n    .replace(urlRegexObj, '$2<mark class=\"compose-highlight-url\">$3</mark>') // URLs\n    .replace(MENTION_RE, '$1<mark class=\"compose-highlight-mention\">$2</mark>') // Mentions\n    .replace(HASHTAG_RE, '$1<mark class=\"compose-highlight-hashtag\">$2</mark>') // Hashtags\n    .replace(\n      SCAN_RE,\n      '$1<mark class=\"compose-highlight-emoji-shortcode\">$2</mark>',\n    ); // Emoji shortcodes\n}\n\n// const rtf = new Intl.RelativeTimeFormat();\nconst RTF = mem((locale) => new Intl.RelativeTimeFormat(locale || undefined));\n\nconst CUSTOM_EMOJIS_COUNT = 100;\n\nfunction Compose({\n  onClose,\n  replyToStatus,\n  editStatus,\n  draftStatus,\n  standalone,\n  hasOpener,\n}) {\n  const { i18n } = useLingui();\n  const rtf = RTF(i18n.locale);\n\n  console.warn('RENDER COMPOSER');\n  const { masto, instance } = api();\n  const [uiState, setUIState] = useState('default');\n  const UID = useRef(draftStatus?.uid || uid());\n  console.log('Compose UID', UID.current);\n\n  const currentAccount = getCurrentAccount();\n  const currentAccountInfo = currentAccount.info;\n\n  const configuration = getCurrentInstanceConfiguration();\n  console.log('⚙️ Configuration', configuration);\n\n  const {\n    statuses: {\n      maxCharacters,\n      maxMediaAttachments,\n      charactersReservedPerUrl,\n    } = {},\n    mediaAttachments: {\n      supportedMimeTypes = [],\n      imageSizeLimit,\n      imageMatrixLimit,\n      videoSizeLimit,\n      videoMatrixLimit,\n      videoFrameRateLimit,\n    } = {},\n    polls: {\n      maxOptions,\n      maxCharactersPerOption,\n      maxExpiration,\n      minExpiration,\n    } = {},\n  } = configuration || {};\n\n  const textareaRef = useRef();\n  const spoilerTextRef = useRef();\n  const [visibility, setVisibility] = useState('public');\n  const [sensitive, setSensitive] = useState(false);\n  const [language, setLanguage] = useState(\n    store.session.get('currentLanguage') || DEFAULT_LANG,\n  );\n  const prevLanguage = useRef(language);\n  const [mediaAttachments, setMediaAttachments] = useState([]);\n  const [poll, setPoll] = useState(null);\n\n  const prefs = store.account.get('preferences') || {};\n\n  const oninputTextarea = () => {\n    if (!textareaRef.current) return;\n    textareaRef.current.dispatchEvent(new Event('input'));\n  };\n  const focusTextarea = () => {\n    setTimeout(() => {\n      if (!textareaRef.current) return;\n      // status starts with newline, focus on first position\n      if (draftStatus?.status?.startsWith?.('\\n')) {\n        textareaRef.current.selectionStart = 0;\n        textareaRef.current.selectionEnd = 0;\n      }\n      console.debug('FOCUS textarea');\n      textareaRef.current?.focus();\n    }, 300);\n  };\n\n  useEffect(() => {\n    if (replyToStatus) {\n      const { spoilerText, visibility, language, sensitive } = replyToStatus;\n      if (spoilerText && spoilerTextRef.current) {\n        spoilerTextRef.current.value = spoilerText;\n      }\n      const mentions = new Set([\n        replyToStatus.account.acct,\n        ...replyToStatus.mentions.map((m) => m.acct),\n      ]);\n      const allMentions = [...mentions].filter(\n        (m) => m !== currentAccountInfo.acct,\n      );\n      if (allMentions.length > 0) {\n        textareaRef.current.value = `${allMentions\n          .map((m) => `@${m}`)\n          .join(' ')} `;\n        oninputTextarea();\n      }\n      focusTextarea();\n      setVisibility(\n        visibility === 'public' && prefs['posting:default:visibility']\n          ? prefs['posting:default:visibility'].toLowerCase()\n          : visibility,\n      );\n      setLanguage(\n        language ||\n          prefs['posting:default:language']?.toLowerCase() ||\n          DEFAULT_LANG,\n      );\n      setSensitive(sensitive && !!spoilerText);\n    } else if (editStatus) {\n      const { visibility, language, sensitive, poll, mediaAttachments } =\n        editStatus;\n      const composablePoll = !!poll?.options && {\n        ...poll,\n        options: poll.options.map((o) => o?.title || o),\n        expiresIn: poll?.expiresIn || expiresInFromExpiresAt(poll.expiresAt),\n      };\n      setUIState('loading');\n      (async () => {\n        try {\n          const statusSource = await masto.v1.statuses\n            .$select(editStatus.id)\n            .source.fetch();\n          console.log({ statusSource });\n          const { text, spoilerText } = statusSource;\n          textareaRef.current.value = text;\n          textareaRef.current.dataset.source = text;\n          oninputTextarea();\n          focusTextarea();\n          spoilerTextRef.current.value = spoilerText;\n          setVisibility(visibility);\n          setLanguage(\n            language ||\n              prefs['posting:default:language']?.toLowerCase() ||\n              DEFAULT_LANG,\n          );\n          setSensitive(sensitive);\n          if (composablePoll) setPoll(composablePoll);\n          setMediaAttachments(mediaAttachments);\n          setUIState('default');\n        } catch (e) {\n          console.error(e);\n          alert(e?.reason || e);\n          setUIState('error');\n        }\n      })();\n    } else {\n      focusTextarea();\n      console.log('Apply prefs', prefs);\n      if (prefs['posting:default:visibility']) {\n        setVisibility(prefs['posting:default:visibility'].toLowerCase());\n      }\n      if (prefs['posting:default:language']) {\n        setLanguage(prefs['posting:default:language'].toLowerCase());\n      }\n      if (prefs['posting:default:sensitive']) {\n        setSensitive(!!prefs['posting:default:sensitive']);\n      }\n    }\n    if (draftStatus) {\n      const {\n        status,\n        spoilerText,\n        visibility,\n        language,\n        sensitive,\n        poll,\n        mediaAttachments,\n      } = draftStatus;\n      const composablePoll = !!poll?.options && {\n        ...poll,\n        options: poll.options.map((o) => o?.title || o),\n        expiresIn: poll?.expiresIn || expiresInFromExpiresAt(poll.expiresAt),\n      };\n      textareaRef.current.value = status;\n      oninputTextarea();\n      focusTextarea();\n      if (spoilerText) spoilerTextRef.current.value = spoilerText;\n      if (visibility) setVisibility(visibility);\n      setLanguage(\n        language ||\n          prefs['posting:default:language']?.toLowerCase() ||\n          DEFAULT_LANG,\n      );\n      if (sensitive !== null) setSensitive(sensitive);\n      if (composablePoll) setPoll(composablePoll);\n      if (mediaAttachments) setMediaAttachments(mediaAttachments);\n    }\n  }, [draftStatus, editStatus, replyToStatus]);\n\n  const formRef = useRef();\n\n  const beforeUnloadCopy = t`You have unsaved changes. Discard this post?`;\n  const canClose = () => {\n    const { value, dataset } = textareaRef.current;\n\n    // check if loading\n    if (uiState === 'loading') {\n      console.log('canClose', { uiState });\n      return false;\n    }\n\n    // check for status and media attachments\n    const hasValue = (value || '')\n      .trim()\n      .replace(/^\\p{White_Space}+|\\p{White_Space}+$/gu, '');\n    const hasMediaAttachments = mediaAttachments.length > 0;\n    if (!hasValue && !hasMediaAttachments) {\n      console.log('canClose', { value, mediaAttachments });\n      return true;\n    }\n\n    // check if all media attachments have IDs\n    const hasIDMediaAttachments =\n      mediaAttachments.length > 0 &&\n      mediaAttachments.every((media) => media.id);\n    if (hasIDMediaAttachments) {\n      console.log('canClose', { hasIDMediaAttachments });\n      return true;\n    }\n\n    // check if status contains only \"@acct\", if replying\n    const isSelf = replyToStatus?.account.id === currentAccountInfo.id;\n    const hasOnlyAcct =\n      replyToStatus && value.trim() === `@${replyToStatus.account.acct}`;\n    // TODO: check for mentions, or maybe just generic \"@username<space>\", including multiple mentions like \"@username1<space>@username2<space>\"\n    if (!isSelf && hasOnlyAcct) {\n      console.log('canClose', { isSelf, hasOnlyAcct });\n      return true;\n    }\n\n    // check if status is same with source\n    const sameWithSource = value === dataset?.source;\n    if (sameWithSource) {\n      console.log('canClose', { sameWithSource });\n      return true;\n    }\n\n    console.log('canClose', {\n      value,\n      hasMediaAttachments,\n      hasIDMediaAttachments,\n      poll,\n      isSelf,\n      hasOnlyAcct,\n      sameWithSource,\n      uiState,\n    });\n\n    return false;\n  };\n\n  const confirmClose = () => {\n    if (!canClose()) {\n      const yes = confirm(beforeUnloadCopy);\n      return yes;\n    }\n    return true;\n  };\n\n  useEffect(() => {\n    // Show warning if user tries to close window with unsaved changes\n    const handleBeforeUnload = (e) => {\n      if (!canClose()) {\n        e.preventDefault();\n        e.returnValue = beforeUnloadCopy;\n      }\n    };\n    window.addEventListener('beforeunload', handleBeforeUnload, {\n      capture: true,\n    });\n    return () =>\n      window.removeEventListener('beforeunload', handleBeforeUnload, {\n        capture: true,\n      });\n  }, []);\n\n  const getCharCount = () => {\n    const { value } = textareaRef.current;\n    const { value: spoilerText } = spoilerTextRef.current;\n    return stringLength(countableText(value)) + stringLength(spoilerText);\n  };\n  const updateCharCount = () => {\n    const count = getCharCount();\n    states.composerCharacterCount = count;\n  };\n  useEffect(updateCharCount, []);\n\n  const supportsCloseWatcher = window.CloseWatcher;\n  const escDownRef = useRef(false);\n  useHotkeys(\n    'esc',\n    () => {\n      escDownRef.current = true;\n      // This won't be true if this event is already handled and not propagated 🤞\n    },\n    {\n      enabled: !supportsCloseWatcher,\n      enableOnFormTags: true,\n    },\n  );\n  useHotkeys(\n    'esc',\n    () => {\n      if (!standalone && escDownRef.current && confirmClose()) {\n        onClose();\n      }\n      escDownRef.current = false;\n    },\n    {\n      enabled: !supportsCloseWatcher,\n      enableOnFormTags: true,\n      // Use keyup because Esc keydown will close the confirm dialog on Safari\n      keyup: true,\n      ignoreEventWhen: (e) => {\n        const modals = document.querySelectorAll('#modal-container > *');\n        const hasModal = !!modals;\n        const hasOnlyComposer =\n          modals.length === 1 && modals[0].querySelector('#compose-container');\n        return hasModal && !hasOnlyComposer;\n      },\n    },\n  );\n  useCloseWatcher(() => {\n    if (!standalone && confirmClose()) {\n      onClose();\n    }\n  }, [standalone, confirmClose, onClose]);\n\n  const prevBackgroundDraft = useRef({});\n  const draftKey = () => {\n    const ns = getCurrentAccountNS();\n    return `${ns}#${UID.current}`;\n  };\n  const saveUnsavedDraft = () => {\n    // Not enabling this for editing status\n    // I don't think this warrant a draft mode for a status that's already posted\n    // Maybe it could be a big edit change but it should be rare\n    if (editStatus) return;\n    if (states.composerState.minimized) return;\n    const key = draftKey();\n    const backgroundDraft = {\n      key,\n      replyTo: replyToStatus\n        ? {\n            /* Smaller payload of replyToStatus. Reasons:\n              - No point storing whole thing\n              - Could have media attachments\n              - Could be deleted/edited later\n            */\n            id: replyToStatus.id,\n            account: {\n              id: replyToStatus.account.id,\n              username: replyToStatus.account.username,\n              acct: replyToStatus.account.acct,\n            },\n          }\n        : null,\n      draftStatus: {\n        uid: UID.current,\n        status: textareaRef.current.value,\n        spoilerText: spoilerTextRef.current.value,\n        visibility,\n        language,\n        sensitive,\n        poll,\n        mediaAttachments,\n      },\n    };\n    if (\n      !deepEqual(backgroundDraft, prevBackgroundDraft.current) &&\n      !canClose()\n    ) {\n      console.debug('not equal', backgroundDraft, prevBackgroundDraft.current);\n      db.drafts\n        .set(key, {\n          ...backgroundDraft,\n          state: 'unsaved',\n          updatedAt: Date.now(),\n        })\n        .then(() => {\n          console.debug('DRAFT saved', key, backgroundDraft);\n        })\n        .catch((e) => {\n          console.error('DRAFT failed', key, e);\n        });\n      prevBackgroundDraft.current = structuredClone(backgroundDraft);\n    }\n  };\n  useInterval(saveUnsavedDraft, 5000); // background save every 5s\n  useEffect(() => {\n    saveUnsavedDraft();\n    // If unmounted, means user discarded the draft\n    // Also means pop-out 🙈, but it's okay because the pop-out will persist the ID and re-create the draft\n    return () => {\n      db.drafts.del(draftKey());\n    };\n  }, []);\n\n  useEffect(() => {\n    const handleItems = (e) => {\n      const { items } = e.clipboardData || e.dataTransfer;\n      const files = [];\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i];\n        if (item.kind === 'file') {\n          const file = item.getAsFile();\n          if (file && supportedMimeTypes.includes(file.type)) {\n            files.push(file);\n          }\n        }\n      }\n      if (files.length > 0 && mediaAttachments.length >= maxMediaAttachments) {\n        alert(\n          plural(maxMediaAttachments, {\n            one: 'You can only attach up to 1 file.',\n            other: 'You can only attach up to # files.',\n          }),\n        );\n        return;\n      }\n      console.log({ files });\n      if (files.length > 0) {\n        e.preventDefault();\n        e.stopPropagation();\n        // Auto-cut-off files to avoid exceeding maxMediaAttachments\n        const max = maxMediaAttachments - mediaAttachments.length;\n        const allowedFiles = files.slice(0, max);\n        if (allowedFiles.length <= 0) {\n          alert(\n            plural(maxMediaAttachments, {\n              one: 'You can only attach up to 1 file.',\n              other: 'You can only attach up to # files.',\n            }),\n          );\n          return;\n        }\n        const mediaFiles = allowedFiles.map((file) => ({\n          file,\n          type: file.type,\n          size: file.size,\n          url: URL.createObjectURL(file),\n          id: null,\n          description: null,\n        }));\n        setMediaAttachments([...mediaAttachments, ...mediaFiles]);\n      }\n    };\n    window.addEventListener('paste', handleItems);\n    const handleDragover = (e) => {\n      // Prevent default if there's files\n      if (e.dataTransfer.items.length > 0) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    };\n    window.addEventListener('dragover', handleDragover);\n    window.addEventListener('drop', handleItems);\n    return () => {\n      window.removeEventListener('paste', handleItems);\n      window.removeEventListener('dragover', handleDragover);\n      window.removeEventListener('drop', handleItems);\n    };\n  }, [mediaAttachments]);\n\n  const [showMentionPicker, setShowMentionPicker] = useState(false);\n  const [showEmoji2Picker, setShowEmoji2Picker] = useState(false);\n  const [showGIFPicker, setShowGIFPicker] = useState(false);\n\n  const [autoDetectedLanguages, setAutoDetectedLanguages] = useState(null);\n  const [topSupportedLanguages, restSupportedLanguages] = useMemo(() => {\n    const topLanguages = [];\n    const restLanguages = [];\n    const { contentTranslationHideLanguages = [] } = states.settings;\n    supportedLanguages.forEach((l) => {\n      const [code] = l;\n      if (\n        code === language ||\n        code === prevLanguage.current ||\n        code === DEFAULT_LANG ||\n        contentTranslationHideLanguages.includes(code) ||\n        (autoDetectedLanguages?.length && autoDetectedLanguages.includes(code))\n      ) {\n        topLanguages.push(l);\n      } else {\n        restLanguages.push(l);\n      }\n    });\n    topLanguages.sort(([codeA, commonA], [codeB, commonB]) => {\n      if (codeA === language) return -1;\n      if (codeB === language) return 1;\n      return commonA.localeCompare(commonB);\n    });\n    restLanguages.sort(([codeA, commonA], [codeB, commonB]) =>\n      commonA.localeCompare(commonB),\n    );\n    return [topLanguages, restLanguages];\n  }, [language, autoDetectedLanguages]);\n\n  const replyToStatusMonthsAgo = useMemo(\n    () =>\n      !!replyToStatus?.createdAt &&\n      Math.floor(\n        (Date.now() - new Date(replyToStatus.createdAt)) /\n          (1000 * 60 * 60 * 24 * 30),\n      ),\n    [replyToStatus],\n  );\n\n  const onMinimize = () => {\n    saveUnsavedDraft();\n    states.composerState.minimized = true;\n  };\n\n  return (\n    <div id=\"compose-container-outer\">\n      <div id=\"compose-container\" class={standalone ? 'standalone' : ''}>\n        <div class=\"compose-top\">\n          {currentAccountInfo?.avatarStatic && (\n            // <Avatar\n            //   url={currentAccountInfo.avatarStatic}\n            //   size=\"xl\"\n            //   alt={currentAccountInfo.username}\n            //   squircle={currentAccountInfo?.bot}\n            // />\n            <AccountBlock\n              account={currentAccountInfo}\n              accountInstance={currentAccount.instanceURL}\n              hideDisplayName\n              useAvatarStatic\n            />\n          )}\n          {!standalone ? (\n            <span class=\"compose-controls\">\n              <button\n                type=\"button\"\n                class=\"plain4 pop-button\"\n                disabled={uiState === 'loading'}\n                onClick={() => {\n                  // If there are non-ID media attachments (not yet uploaded), show confirmation dialog because they are not going to be passed to the new window\n                  // const containNonIDMediaAttachments =\n                  //   mediaAttachments.length > 0 &&\n                  //   mediaAttachments.some((media) => !media.id);\n                  // if (containNonIDMediaAttachments) {\n                  //   const yes = confirm(\n                  //     'You have media attachments that are not yet uploaded. Opening a new window will discard them and you will need to re-attach them. Are you sure you want to continue?',\n                  //   );\n                  //   if (!yes) {\n                  //     return;\n                  //   }\n                  // }\n\n                  // const mediaAttachmentsWithIDs = mediaAttachments.filter(\n                  //   (media) => media.id,\n                  // );\n\n                  const newWin = openCompose({\n                    editStatus,\n                    replyToStatus,\n                    draftStatus: {\n                      uid: UID.current,\n                      status: textareaRef.current.value,\n                      spoilerText: spoilerTextRef.current.value,\n                      visibility,\n                      language,\n                      sensitive,\n                      poll,\n                      mediaAttachments,\n                    },\n                  });\n\n                  if (!newWin) {\n                    return;\n                  }\n\n                  onClose();\n                }}\n              >\n                <Icon icon=\"popout\" alt={t`Pop out`} />\n              </button>\n              <button\n                type=\"button\"\n                class=\"plain4 min-button\"\n                onClick={onMinimize}\n              >\n                <Icon icon=\"minimize\" alt={t`Minimize`} />\n              </button>{' '}\n              <button\n                type=\"button\"\n                class=\"light close-button\"\n                disabled={uiState === 'loading'}\n                onClick={() => {\n                  if (confirmClose()) {\n                    onClose();\n                  }\n                }}\n              >\n                <Icon icon=\"x\" alt={t`Close`} />\n              </button>\n            </span>\n          ) : (\n            hasOpener && (\n              <button\n                type=\"button\"\n                class=\"light pop-button\"\n                disabled={uiState === 'loading'}\n                onClick={() => {\n                  // If there are non-ID media attachments (not yet uploaded), show confirmation dialog because they are not going to be passed to the new window\n                  // const containNonIDMediaAttachments =\n                  //   mediaAttachments.length > 0 &&\n                  //   mediaAttachments.some((media) => !media.id);\n                  // if (containNonIDMediaAttachments) {\n                  //   const yes = confirm(\n                  //     'You have media attachments that are not yet uploaded. Opening a new window will discard them and you will need to re-attach them. Are you sure you want to continue?',\n                  //   );\n                  //   if (!yes) {\n                  //     return;\n                  //   }\n                  // }\n\n                  if (!window.opener) {\n                    alert(t`Looks like you closed the parent window.`);\n                    return;\n                  }\n\n                  if (window.opener.__STATES__.showCompose) {\n                    if (window.opener.__STATES__.composerState?.publishing) {\n                      alert(\n                        t`Looks like you already have a compose field open in the parent window and currently publishing. Please wait for it to be done and try again later.`,\n                      );\n                      return;\n                    }\n\n                    let confirmText = t`Looks like you already have a compose field open in the parent window. Popping in this window will discard the changes you made in the parent window. Continue?`;\n                    const yes = confirm(confirmText);\n                    if (!yes) return;\n                  }\n\n                  // const mediaAttachmentsWithIDs = mediaAttachments.filter(\n                  //   (media) => media.id,\n                  // );\n\n                  onClose({\n                    fn: () => {\n                      const passData = {\n                        editStatus,\n                        replyToStatus,\n                        draftStatus: {\n                          uid: UID.current,\n                          status: textareaRef.current.value,\n                          spoilerText: spoilerTextRef.current.value,\n                          visibility,\n                          language,\n                          sensitive,\n                          poll,\n                          mediaAttachments,\n                        },\n                      };\n                      window.opener.__COMPOSE__ = passData; // Pass it here instead of `showCompose` due to some weird proxy issue again\n                      if (window.opener.__STATES__.showCompose) {\n                        window.opener.__STATES__.showCompose = false;\n                        setTimeout(() => {\n                          window.opener.__STATES__.showCompose = true;\n                        }, 10);\n                      } else {\n                        window.opener.__STATES__.showCompose = true;\n                      }\n                      if (window.opener.__STATES__.composerState.minimized) {\n                        // Maximize it\n                        window.opener.__STATES__.composerState.minimized = false;\n                      }\n                    },\n                  });\n                }}\n              >\n                <Icon icon=\"popin\" alt={t`Pop in`} />\n              </button>\n            )\n          )}\n        </div>\n        {!!replyToStatus && (\n          <div class=\"status-preview\">\n            <Status status={replyToStatus} size=\"s\" previewMode />\n            <div class=\"status-preview-legend reply-to\">\n              {replyToStatusMonthsAgo > 0 ? (\n                <Trans>\n                  Replying to @\n                  {replyToStatus.account.acct || replyToStatus.account.username}\n                  &rsquo;s post (\n                  <strong>\n                    {rtf.format(-replyToStatusMonthsAgo, 'month')}\n                  </strong>\n                  )\n                </Trans>\n              ) : (\n                <Trans>\n                  Replying to @\n                  {replyToStatus.account.acct || replyToStatus.account.username}\n                  &rsquo;s post\n                </Trans>\n              )}\n            </div>\n          </div>\n        )}\n        {!!editStatus && (\n          <div class=\"status-preview\">\n            <Status status={editStatus} size=\"s\" previewMode />\n            <div class=\"status-preview-legend\">\n              <Trans>Editing source post</Trans>\n            </div>\n          </div>\n        )}\n        <form\n          ref={formRef}\n          class={`form-visibility-${visibility}`}\n          style={{\n            pointerEvents: uiState === 'loading' ? 'none' : 'auto',\n            opacity: uiState === 'loading' ? 0.5 : 1,\n          }}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {\n              formRef.current.dispatchEvent(\n                new Event('submit', { cancelable: true }),\n              );\n            }\n          }}\n          onSubmit={(e) => {\n            e.preventDefault();\n\n            const formData = new FormData(e.target);\n            const entries = Object.fromEntries(formData.entries());\n            console.log('ENTRIES', entries);\n            let { status, visibility, sensitive, spoilerText } = entries;\n\n            // Pre-cleanup\n            sensitive = sensitive === 'on'; // checkboxes return \"on\" if checked\n\n            // Validation\n            /* Let the backend validate this\n          if (stringLength(status) > maxCharacters) {\n            alert(`Status is too long! Max characters: ${maxCharacters}`);\n            return;\n          }\n          if (\n            sensitive &&\n            stringLength(status) + stringLength(spoilerText) > maxCharacters\n          ) {\n            alert(\n              `Status and content warning is too long! Max characters: ${maxCharacters}`,\n            );\n            return;\n          }\n          */\n            if (poll) {\n              if (poll.options.length < 2) {\n                alert(t`Poll must have at least 2 options`);\n                return;\n              }\n              if (poll.options.some((option) => option === '')) {\n                alert(t`Some poll choices are empty`);\n                return;\n              }\n            }\n            // TODO: check for URLs and use `charactersReservedPerUrl` to calculate max characters\n\n            if (mediaAttachments.length > 0) {\n              // If there are media attachments, check if they have no descriptions\n              const hasNoDescriptions = mediaAttachments.some(\n                (media) => !media.description?.trim?.(),\n              );\n              if (hasNoDescriptions) {\n                const yes = confirm(\n                  t`Some media have no descriptions. Continue?`,\n                );\n                if (!yes) return;\n              }\n            }\n\n            // Post-cleanup\n            spoilerText = (sensitive && spoilerText) || undefined;\n            status = status === '' ? undefined : status;\n\n            // states.composerState.minimized = true;\n            states.composerState.publishing = true;\n            setUIState('loading');\n            (async () => {\n              try {\n                console.log('MEDIA ATTACHMENTS', mediaAttachments);\n                if (mediaAttachments.length > 0) {\n                  // Upload media attachments first\n                  const mediaPromises = mediaAttachments.map((attachment) => {\n                    const { file, description, id } = attachment;\n                    console.log('UPLOADING', attachment);\n                    if (id) {\n                      // If already uploaded\n                      return attachment;\n                    } else {\n                      const params = removeNullUndefined({\n                        file,\n                        description,\n                      });\n                      return masto.v2.media.create(params).then((res) => {\n                        if (res.id) {\n                          attachment.id = res.id;\n                        }\n                        return res;\n                      });\n                    }\n                  });\n                  const results = await Promise.allSettled(mediaPromises);\n\n                  // If any failed, return\n                  if (\n                    results.some((result) => {\n                      return result.status === 'rejected' || !result.value?.id;\n                    })\n                  ) {\n                    states.composerState.publishing = false;\n                    states.composerState.publishingError = true;\n                    setUIState('error');\n                    // Alert all the reasons\n                    results.forEach((result) => {\n                      if (result.status === 'rejected') {\n                        console.error(result);\n                        alert(result.reason || t`Attachment #${i} failed`);\n                      }\n                    });\n                    return;\n                  }\n\n                  console.log({ results, mediaAttachments });\n                }\n\n                /* NOTE:\n                Using snakecase here because masto.js's `isObject` returns false for `params`, ONLY happens when opening in pop-out window. This is maybe due to `window.masto` variable being passed from the parent window. The check that failed is `x.constructor === Object`, so maybe the `Object` in new window is different than parent window's?\n                Code: https://github.com/neet/masto.js/blob/dd0d649067b6a2b6e60fbb0a96597c373a255b00/src/serializers/is-object.ts#L2\n\n                // TODO: Note above is no longer true in Masto.js v6. Revisit this.\n              */\n                let params = {\n                  status,\n                  // spoilerText,\n                  spoiler_text: spoilerText,\n                  language,\n                  sensitive,\n                  poll,\n                  // mediaIds: mediaAttachments.map((attachment) => attachment.id),\n                  media_ids: mediaAttachments.map(\n                    (attachment) => attachment.id,\n                  ),\n                };\n                if (editStatus && supports('@mastodon/edit-media-attributes')) {\n                  params.media_attributes = mediaAttachments.map(\n                    (attachment) => {\n                      return {\n                        id: attachment.id,\n                        description: attachment.description,\n                        // focus\n                        // thumbnail\n                      };\n                    },\n                  );\n                } else if (!editStatus) {\n                  params.visibility = visibility;\n                  // params.inReplyToId = replyToStatus?.id || undefined;\n                  params.in_reply_to_id = replyToStatus?.id || undefined;\n                }\n                params = removeNullUndefined(params);\n                console.log('POST', params);\n\n                let newStatus;\n                if (editStatus) {\n                  newStatus = await masto.v1.statuses\n                    .$select(editStatus.id)\n                    .update(params);\n                  saveStatus(newStatus, instance, {\n                    skipThreading: true,\n                  });\n                } else {\n                  try {\n                    newStatus = await masto.v1.statuses.create(params, {\n                      requestInit: {\n                        headers: {\n                          'Idempotency-Key': UID.current,\n                        },\n                      },\n                    });\n                  } catch (_) {\n                    // If idempotency key fails, try again without it\n                    newStatus = await masto.v1.statuses.create(params);\n                  }\n                }\n                states.composerState.minimized = false;\n                states.composerState.publishing = false;\n                setUIState('default');\n\n                // Close\n                onClose({\n                  // type: post, reply, edit\n                  type: editStatus ? 'edit' : replyToStatus ? 'reply' : 'post',\n                  newStatus,\n                  instance,\n                });\n              } catch (e) {\n                states.composerState.publishing = false;\n                states.composerState.publishingError = true;\n                console.error(e);\n                alert(e?.reason || e);\n                setUIState('error');\n              }\n            })();\n          }}\n        >\n          <div class=\"toolbar stretch\">\n            <input\n              ref={spoilerTextRef}\n              type=\"text\"\n              name=\"spoilerText\"\n              placeholder={t`Content warning`}\n              disabled={uiState === 'loading'}\n              class=\"spoiler-text-field\"\n              lang={language}\n              spellCheck=\"true\"\n              dir=\"auto\"\n              style={{\n                opacity: sensitive ? 1 : 0,\n                pointerEvents: sensitive ? 'auto' : 'none',\n              }}\n              onInput={() => {\n                updateCharCount();\n              }}\n            />\n            <label\n              class={`toolbar-button ${sensitive ? 'highlight' : ''}`}\n              title={t`Content warning or sensitive media`}\n            >\n              <input\n                name=\"sensitive\"\n                type=\"checkbox\"\n                checked={sensitive}\n                disabled={uiState === 'loading'}\n                onChange={(e) => {\n                  const sensitive = e.target.checked;\n                  setSensitive(sensitive);\n                  if (sensitive) {\n                    spoilerTextRef.current?.focus();\n                  } else {\n                    textareaRef.current?.focus();\n                  }\n                }}\n              />\n              <Icon icon={`eye-${sensitive ? 'close' : 'open'}`} />\n            </label>{' '}\n            <label\n              class={`toolbar-button ${\n                visibility !== 'public' && !sensitive ? 'show-field' : ''\n              } ${visibility !== 'public' ? 'highlight' : ''}`}\n              title={visibility}\n            >\n              <Icon icon={visibilityIconsMap[visibility]} alt={visibility} />\n              <select\n                name=\"visibility\"\n                value={visibility}\n                onChange={(e) => {\n                  setVisibility(e.target.value);\n                }}\n                disabled={uiState === 'loading' || !!editStatus}\n                dir=\"auto\"\n              >\n                <option value=\"public\">\n                  <Trans>Public</Trans>\n                </option>\n                <option value=\"unlisted\">\n                  <Trans>Unlisted</Trans>\n                </option>\n                <option value=\"private\">\n                  <Trans>Followers only</Trans>\n                </option>\n                <option value=\"direct\">\n                  <Trans>Private mention</Trans>\n                </option>\n              </select>\n            </label>{' '}\n          </div>\n          <Textarea\n            ref={textareaRef}\n            placeholder={\n              replyToStatus\n                ? t`Post your reply`\n                : editStatus\n                ? t`Edit your post`\n                : t`What are you doing?`\n            }\n            required={mediaAttachments?.length === 0}\n            disabled={uiState === 'loading'}\n            lang={language}\n            onInput={() => {\n              updateCharCount();\n            }}\n            maxCharacters={maxCharacters}\n            performSearch={(params) => {\n              const { type, q, limit } = params;\n              if (type === 'accounts') {\n                return masto.v1.accounts.search.list({\n                  q,\n                  limit,\n                  resolve: false,\n                });\n              }\n              return masto.v2.search.fetch(params);\n            }}\n            onTrigger={(action) => {\n              if (action?.name === 'custom-emojis') {\n                setShowEmoji2Picker({\n                  defaultSearchTerm: action?.defaultSearchTerm || null,\n                });\n              } else if (action?.name === 'mention') {\n                setShowMentionPicker({\n                  defaultSearchTerm: action?.defaultSearchTerm || null,\n                });\n              } else if (\n                action?.name === 'auto-detect-language' &&\n                action?.languages\n              ) {\n                setAutoDetectedLanguages(action.languages);\n              }\n            }}\n          />\n          {mediaAttachments?.length > 0 && (\n            <div class=\"media-attachments\">\n              {mediaAttachments.map((attachment, i) => {\n                const { id, file } = attachment;\n                const fileID = file?.size + file?.type + file?.name;\n                return (\n                  <MediaAttachment\n                    key={id || fileID || i}\n                    attachment={attachment}\n                    disabled={uiState === 'loading'}\n                    lang={language}\n                    onDescriptionChange={(value) => {\n                      setMediaAttachments((attachments) => {\n                        const newAttachments = [...attachments];\n                        newAttachments[i].description = value;\n                        return newAttachments;\n                      });\n                    }}\n                    onRemove={() => {\n                      setMediaAttachments((attachments) => {\n                        return attachments.filter((_, j) => j !== i);\n                      });\n                    }}\n                  />\n                );\n              })}\n              <label class=\"media-sensitive\">\n                <input\n                  name=\"sensitive\"\n                  type=\"checkbox\"\n                  checked={sensitive}\n                  disabled={uiState === 'loading'}\n                  onChange={(e) => {\n                    const sensitive = e.target.checked;\n                    setSensitive(sensitive);\n                  }}\n                />{' '}\n                <span>\n                  <Trans>Mark media as sensitive</Trans>\n                </span>{' '}\n                <Icon icon={`eye-${sensitive ? 'close' : 'open'}`} />\n              </label>\n            </div>\n          )}\n          {!!poll && (\n            <Poll\n              lang={language}\n              maxOptions={maxOptions}\n              maxExpiration={maxExpiration}\n              minExpiration={minExpiration}\n              maxCharactersPerOption={maxCharactersPerOption}\n              poll={poll}\n              disabled={uiState === 'loading'}\n              onInput={(poll) => {\n                if (poll) {\n                  const newPoll = { ...poll };\n                  setPoll(newPoll);\n                } else {\n                  setPoll(null);\n                }\n              }}\n            />\n          )}\n          <div\n            class=\"toolbar wrap\"\n            style={{\n              justifyContent: 'flex-end',\n            }}\n          >\n            <span>\n              <label class=\"toolbar-button\">\n                <input\n                  type=\"file\"\n                  accept={supportedMimeTypes.join(',')}\n                  multiple={mediaAttachments.length < maxMediaAttachments - 1}\n                  disabled={\n                    uiState === 'loading' ||\n                    mediaAttachments.length >= maxMediaAttachments ||\n                    !!poll\n                  }\n                  onChange={(e) => {\n                    const files = e.target.files;\n                    if (!files) return;\n\n                    const mediaFiles = Array.from(files).map((file) => ({\n                      file,\n                      type: file.type,\n                      size: file.size,\n                      url: URL.createObjectURL(file),\n                      id: null, // indicate uploaded state\n                      description: null,\n                    }));\n                    console.log('MEDIA ATTACHMENTS', files, mediaFiles);\n\n                    // Validate max media attachments\n                    if (\n                      mediaAttachments.length + mediaFiles.length >\n                      maxMediaAttachments\n                    ) {\n                      alert(\n                        plural(maxMediaAttachments, {\n                          one: 'You can only attach up to 1 file.',\n                          other: 'You can only attach up to # files.',\n                        }),\n                      );\n                    } else {\n                      setMediaAttachments((attachments) => {\n                        return attachments.concat(mediaFiles);\n                      });\n                    }\n                    // Reset\n                    e.target.value = '';\n                  }}\n                />\n                <Icon icon=\"attachment\" />\n              </label>\n              {/* If maxOptions is not defined or defined and is greater than 1, show poll button */}\n              {maxOptions == null ||\n                (maxOptions > 1 && (\n                  <>\n                    <button\n                      type=\"button\"\n                      class=\"toolbar-button\"\n                      disabled={\n                        uiState === 'loading' ||\n                        !!poll ||\n                        !!mediaAttachments.length\n                      }\n                      onClick={() => {\n                        setPoll({\n                          options: ['', ''],\n                          expiresIn: 24 * 60 * 60, // 1 day\n                          multiple: false,\n                        });\n                      }}\n                    >\n                      <Icon icon=\"poll\" alt={t`Add poll`} />\n                    </button>\n                  </>\n                ))}\n              {/* <button\n                type=\"button\"\n                class=\"toolbar-button\"\n                disabled={uiState === 'loading'}\n                onClick={() => {\n                  setShowMentionPicker(true);\n                }}\n              >\n                <Icon icon=\"at\" />\n              </button> */}\n              <button\n                type=\"button\"\n                class=\"toolbar-button\"\n                disabled={uiState === 'loading'}\n                onClick={() => {\n                  setShowEmoji2Picker(true);\n                }}\n              >\n                <Icon icon=\"emoji2\" alt={t`Add custom emoji`} />\n              </button>\n              {!!states.settings.composerGIFPicker && (\n                <button\n                  type=\"button\"\n                  class=\"toolbar-button gif-picker-button\"\n                  disabled={\n                    uiState === 'loading' ||\n                    mediaAttachments.length >= maxMediaAttachments ||\n                    !!poll\n                  }\n                  onClick={() => {\n                    setShowGIFPicker(true);\n                  }}\n                >\n                  <span>GIF</span>\n                </button>\n              )}\n            </span>\n            <div class=\"spacer\" />\n            {uiState === 'loading' ? (\n              <Loader abrupt />\n            ) : (\n              <CharCountMeter\n                maxCharacters={maxCharacters}\n                hidden={uiState === 'loading'}\n              />\n            )}\n            <label\n              class={`toolbar-button ${\n                language !== prevLanguage.current ||\n                (autoDetectedLanguages?.length &&\n                  !autoDetectedLanguages.includes(language))\n                  ? 'highlight'\n                  : ''\n              }`}\n            >\n              <span class=\"icon-text\">\n                {supportedLanguagesMap[language]?.native}\n              </span>\n              <select\n                name=\"language\"\n                value={language}\n                onChange={(e) => {\n                  const { value } = e.target;\n                  setLanguage(value || DEFAULT_LANG);\n                  store.session.set('currentLanguage', value || DEFAULT_LANG);\n                }}\n                disabled={uiState === 'loading'}\n                dir=\"auto\"\n              >\n                {topSupportedLanguages.map(([code, common, native]) => {\n                  const commonText = localeCode2Text({\n                    code,\n                    fallback: common,\n                  });\n                  const showCommon = commonText !== native;\n                  return (\n                    <option value={code} key={code}>\n                      {showCommon ? `${native} - ${commonText}` : commonText}\n                    </option>\n                  );\n                })}\n                <hr />\n                {restSupportedLanguages.map(([code, common, native]) => {\n                  const commonText = localeCode2Text({\n                    code,\n                    fallback: common,\n                  });\n                  const showCommon = commonText !== native;\n                  return (\n                    <option value={code} key={code}>\n                      {showCommon ? `${native} - ${commonText}` : commonText}\n                    </option>\n                  );\n                })}\n              </select>\n            </label>{' '}\n            <button\n              type=\"submit\"\n              class=\"large\"\n              disabled={uiState === 'loading'}\n            >\n              {replyToStatus\n                ? t`Reply`\n                : editStatus\n                ? t`Update`\n                : t({\n                    message: 'Post',\n                    context: 'Submit button in composer',\n                  })}\n            </button>\n          </div>\n        </form>\n      </div>\n      {showMentionPicker && (\n        <Modal\n          onClick={(e) => {\n            if (e.target === e.currentTarget) {\n              setShowMentionPicker(false);\n            }\n          }}\n        >\n          <MentionModal\n            masto={masto}\n            instance={instance}\n            onClose={() => {\n              setShowMentionPicker(false);\n            }}\n            defaultSearchTerm={showMentionPicker?.defaultSearchTerm}\n            onSelect={(socialAddress) => {\n              const textarea = textareaRef.current;\n              if (!textarea) return;\n              const { selectionStart, selectionEnd } = textarea;\n              const text = textarea.value;\n              const textBeforeMention = text.slice(0, selectionStart);\n              const spaceBeforeMention = textBeforeMention\n                ? /[\\s\\t\\n\\r]$/.test(textBeforeMention)\n                  ? ''\n                  : ' '\n                : '';\n              const textAfterMention = text.slice(selectionEnd);\n              const spaceAfterMention = /^[\\s\\t\\n\\r]/.test(textAfterMention)\n                ? ''\n                : ' ';\n              const newText =\n                textBeforeMention +\n                spaceBeforeMention +\n                '@' +\n                socialAddress +\n                spaceAfterMention +\n                textAfterMention;\n              textarea.value = newText;\n              textarea.selectionStart = textarea.selectionEnd =\n                selectionEnd +\n                1 +\n                socialAddress.length +\n                spaceAfterMention.length;\n              textarea.focus();\n              textarea.dispatchEvent(new Event('input'));\n            }}\n          />\n        </Modal>\n      )}\n      {showEmoji2Picker && (\n        <Modal\n          onClick={(e) => {\n            if (e.target === e.currentTarget) {\n              setShowEmoji2Picker(false);\n            }\n          }}\n        >\n          <CustomEmojisModal\n            masto={masto}\n            instance={instance}\n            onClose={() => {\n              setShowEmoji2Picker(false);\n            }}\n            defaultSearchTerm={showEmoji2Picker?.defaultSearchTerm}\n            onSelect={(emojiShortcode) => {\n              const textarea = textareaRef.current;\n              if (!textarea) return;\n              const { selectionStart, selectionEnd } = textarea;\n              const text = textarea.value;\n              const textBeforeEmoji = text.slice(0, selectionStart);\n              const spaceBeforeEmoji = textBeforeEmoji\n                ? /[\\s\\t\\n\\r]$/.test(textBeforeEmoji)\n                  ? ''\n                  : ' '\n                : '';\n              const textAfterEmoji = text.slice(selectionEnd);\n              const spaceAfterEmoji = /^[\\s\\t\\n\\r]/.test(textAfterEmoji)\n                ? ''\n                : ' ';\n              const newText =\n                textBeforeEmoji +\n                spaceBeforeEmoji +\n                emojiShortcode +\n                spaceAfterEmoji +\n                textAfterEmoji;\n              textarea.value = newText;\n              textarea.selectionStart = textarea.selectionEnd =\n                selectionEnd + emojiShortcode.length + spaceAfterEmoji.length;\n              textarea.focus();\n              textarea.dispatchEvent(new Event('input'));\n            }}\n          />\n        </Modal>\n      )}\n      {showGIFPicker && (\n        <Modal\n          onClick={(e) => {\n            if (e.target === e.currentTarget) {\n              setShowGIFPicker(false);\n            }\n          }}\n        >\n          <GIFPickerModal\n            onClose={() => setShowGIFPicker(false)}\n            onSelect={({ url, type, alt_text }) => {\n              console.log('GIF URL', url);\n              if (mediaAttachments.length >= maxMediaAttachments) {\n                alert(\n                  plural(maxMediaAttachments, {\n                    one: 'You can only attach up to 1 file.',\n                    other: 'You can only attach up to # files.',\n                  }),\n                );\n                return;\n              }\n              // Download the GIF and insert it as media attachment\n              (async () => {\n                let theToast;\n                try {\n                  theToast = showToast({\n                    text: t`Downloading GIF…`,\n                    duration: -1,\n                  });\n                  const blob = await fetch(url, {\n                    referrerPolicy: 'no-referrer',\n                  }).then((res) => res.blob());\n                  const file = new File(\n                    [blob],\n                    type === 'video/mp4' ? 'video.mp4' : 'image.gif',\n                    {\n                      type,\n                    },\n                  );\n                  const newMediaAttachments = [\n                    ...mediaAttachments,\n                    {\n                      file,\n                      type,\n                      size: file.size,\n                      id: null,\n                      description: alt_text || '',\n                    },\n                  ];\n                  setMediaAttachments(newMediaAttachments);\n                  theToast?.hideToast?.();\n                } catch (err) {\n                  console.error(err);\n                  theToast?.hideToast?.();\n                  showToast(t`Failed to download GIF`);\n                }\n              })();\n            }}\n          />\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nfunction autoResizeTextarea(textarea) {\n  if (!textarea) return;\n  const { value, offsetHeight, scrollHeight, clientHeight } = textarea;\n  if (offsetHeight < window.innerHeight) {\n    // NOTE: This check is needed because the offsetHeight return 50000 (really large number) on first render\n    // No idea why it does that, will re-investigate in far future\n    const offset = offsetHeight - clientHeight;\n    const height = value ? scrollHeight + offset + 'px' : null;\n    textarea.style.height = height;\n  }\n}\n\nasync function _getCustomEmojis(instance, masto) {\n  const emojis = await masto.v1.customEmojis.list();\n  const visibleEmojis = emojis.filter((e) => e.visibleInPicker);\n  const searcher = new Fuse(visibleEmojis, {\n    keys: ['shortcode'],\n    findAllMatches: true,\n  });\n  return [visibleEmojis, searcher];\n}\nconst getCustomEmojis = pmem(_getCustomEmojis, {\n  // Limit by time to reduce memory usage\n  // Cached by instance\n  matchesArg: (cacheKeyArg, keyArg) => cacheKeyArg.instance === keyArg.instance,\n  maxAge: 30 * 60 * 1000, // 30 minutes\n});\n\nconst detectLangs = (text) => {\n  const langs = detectAll(text);\n  if (langs?.length) {\n    // return max 2\n    return langs.slice(0, 2).map((lang) => lang.lang);\n  }\n  return null;\n};\n\nconst Textarea = forwardRef((props, ref) => {\n  const { masto, instance } = api();\n  const [text, setText] = useState(ref.current?.value || '');\n  const {\n    maxCharacters,\n    performSearch = () => {},\n    onTrigger = () => {},\n    ...textareaProps\n  } = props;\n  // const snapStates = useSnapshot(states);\n  // const charCount = snapStates.composerCharacterCount;\n\n  // const customEmojis = useRef();\n  const searcherRef = useRef();\n  useEffect(() => {\n    getCustomEmojis(instance, masto)\n      .then((r) => {\n        const [emojis, searcher] = r;\n        searcherRef.current = searcher;\n      })\n      .catch((e) => {\n        console.error(e);\n      });\n  }, []);\n\n  const textExpanderRef = useRef();\n  const textExpanderTextRef = useRef('');\n  useEffect(() => {\n    let handleChange, handleValue, handleCommited;\n    if (textExpanderRef.current) {\n      handleChange = (e) => {\n        // console.log('text-expander-change', e);\n        const { key, provide, text } = e.detail;\n        textExpanderTextRef.current = text;\n\n        if (text === '') {\n          provide(\n            Promise.resolve({\n              matched: false,\n            }),\n          );\n          return;\n        }\n\n        if (key === ':') {\n          // const emojis = customEmojis.current.filter((emoji) =>\n          //   emoji.shortcode.startsWith(text),\n          // );\n          // const emojis = filterShortcodes(customEmojis.current, text);\n          const results = searcherRef.current?.search(text, {\n            limit: 5,\n          });\n          let html = '';\n          results.forEach(({ item: emoji }) => {\n            const { shortcode, url } = emoji;\n            html += `\n                <li role=\"option\" data-value=\"${encodeHTML(shortcode)}\">\n                <img src=\"${encodeHTML(\n                  url,\n                )}\" width=\"16\" height=\"16\" alt=\"\" loading=\"lazy\" /> \n                ${encodeHTML(shortcode)}\n              </li>`;\n          });\n          html += `<li role=\"option\" data-value=\"\" data-more=\"${text}\">${t`More…`}</li>`;\n          // console.log({ emojis, html });\n          menu.innerHTML = html;\n          provide(\n            Promise.resolve({\n              matched: results.length > 0,\n              fragment: menu,\n            }),\n          );\n          return;\n        }\n\n        const type = {\n          '@': 'accounts',\n          '#': 'hashtags',\n        }[key];\n        provide(\n          new Promise((resolve) => {\n            const searchResults = performSearch({\n              type,\n              q: text,\n              limit: 5,\n            });\n            searchResults.then((value) => {\n              if (text !== textExpanderTextRef.current) {\n                return;\n              }\n              console.log({ value, type, v: value[type] });\n              const results = value[type] || value;\n              console.log('RESULTS', value, results);\n              let html = '';\n              results.forEach((result) => {\n                const {\n                  name,\n                  avatarStatic,\n                  displayName,\n                  username,\n                  acct,\n                  emojis,\n                  history,\n                } = result;\n                const displayNameWithEmoji = emojifyText(displayName, emojis);\n                // const item = menuItem.cloneNode();\n                if (acct) {\n                  html += `\n                    <li role=\"option\" data-value=\"${encodeHTML(acct)}\">\n                      <span class=\"avatar\">\n                        <img src=\"${encodeHTML(\n                          avatarStatic,\n                        )}\" width=\"16\" height=\"16\" alt=\"\" loading=\"lazy\" />\n                      </span>\n                      <span>\n                        <b>${displayNameWithEmoji || username}</b>\n                        <br><span class=\"bidi-isolate\">@${encodeHTML(\n                          acct,\n                        )}</span>\n                      </span>\n                    </li>\n                  `;\n                } else {\n                  const total = history?.reduce?.(\n                    (acc, cur) => acc + +cur.uses,\n                    0,\n                  );\n                  html += `\n                    <li role=\"option\" data-value=\"${encodeHTML(name)}\">\n                      <span class=\"grow\">#<b>${encodeHTML(name)}</b></span>\n                      ${\n                        total\n                          ? `<span class=\"count\">${shortenNumber(total)}</span>`\n                          : ''\n                      }\n                    </li>\n                  `;\n                }\n              });\n              if (type === 'accounts') {\n                html += `<li role=\"option\" data-value=\"\" data-more=\"${text}\">${t`More…`}</li>`;\n              }\n              menu.innerHTML = html;\n              console.log('MENU', results, menu);\n              resolve({\n                matched: results.length > 0,\n                fragment: menu,\n              });\n            });\n          }),\n        );\n      };\n\n      textExpanderRef.current.addEventListener(\n        'text-expander-change',\n        handleChange,\n      );\n\n      handleValue = (e) => {\n        const { key, item } = e.detail;\n        const { value, more } = item.dataset;\n        if (key === ':') {\n          e.detail.value = value ? `:${value}:` : '​'; // zero-width space\n          if (more) {\n            // Prevent adding space after the above value\n            e.detail.continue = true;\n\n            setTimeout(() => {\n              onTrigger?.({\n                name: 'custom-emojis',\n                defaultSearchTerm: more,\n              });\n            }, 300);\n          }\n        } else if (key === '@') {\n          e.detail.value = value ? `@${value} ` : '​'; // zero-width space\n          if (more) {\n            e.detail.continue = true;\n            setTimeout(() => {\n              onTrigger?.({\n                name: 'mention',\n                defaultSearchTerm: more,\n              });\n            }, 300);\n          }\n        } else {\n          e.detail.value = `${key}${value}`;\n        }\n      };\n\n      textExpanderRef.current.addEventListener(\n        'text-expander-value',\n        handleValue,\n      );\n\n      handleCommited = (e) => {\n        const { input } = e.detail;\n        setText(input.value);\n        // fire input event\n        if (ref.current) {\n          const event = new Event('input', { bubbles: true });\n          ref.current.dispatchEvent(event);\n        }\n      };\n\n      textExpanderRef.current.addEventListener(\n        'text-expander-committed',\n        handleCommited,\n      );\n    }\n\n    return () => {\n      if (textExpanderRef.current) {\n        textExpanderRef.current.removeEventListener(\n          'text-expander-change',\n          handleChange,\n        );\n        textExpanderRef.current.removeEventListener(\n          'text-expander-value',\n          handleValue,\n        );\n        textExpanderRef.current.removeEventListener(\n          'text-expander-committed',\n          handleCommited,\n        );\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    // Resize observer for textarea\n    const textarea = ref.current;\n    if (!textarea) return;\n    const resizeObserver = new ResizeObserver(() => {\n      // Get height of textarea, set height to textExpander\n      if (textExpanderRef.current) {\n        const { height } = textarea.getBoundingClientRect();\n        textExpanderRef.current.style.height = height + 'px';\n      }\n    });\n    resizeObserver.observe(textarea);\n  }, []);\n\n  const slowHighlightPerf = useRef(0); // increment if slow\n  const composeHighlightRef = useRef();\n  const throttleHighlightText = useThrottledCallback((text) => {\n    if (!composeHighlightRef.current) return;\n    if (slowHighlightPerf.current > 3) {\n      // After 3 times of lag, disable highlighting\n      composeHighlightRef.current.innerHTML = '';\n      composeHighlightRef.current = null; // Destroy the whole thing\n      throttleHighlightText?.cancel?.();\n      return;\n    }\n    let start;\n    let end;\n    if (slowHighlightPerf.current <= 3) start = Date.now();\n    composeHighlightRef.current.innerHTML =\n      highlightText(text, {\n        maxCharacters,\n      }) + '\\n';\n    if (slowHighlightPerf.current <= 3) end = Date.now();\n    console.debug('HIGHLIGHT PERF', { start, end, diff: end - start });\n    if (start && end && end - start > 50) {\n      // if slow, increment\n      slowHighlightPerf.current++;\n    }\n    // Newline to prevent multiple line breaks at the end from being collapsed, no idea why\n  }, 500);\n\n  const debouncedAutoDetectLanguage = useDebouncedCallback(() => {\n    // Make use of the highlightRef to get the DOM\n    // Clone the dom\n    const dom = composeHighlightRef.current?.cloneNode(true);\n    if (!dom) return;\n    // Remove mark\n    dom.querySelectorAll('mark').forEach((mark) => {\n      mark.remove();\n    });\n    const text = dom.innerText?.trim();\n    if (!text) return;\n    const langs = detectLangs(text);\n    if (langs?.length) {\n      onTrigger?.({\n        name: 'auto-detect-language',\n        languages: langs,\n      });\n    }\n  }, 2000);\n\n  return (\n    <text-expander\n      ref={textExpanderRef}\n      keys=\"@ # :\"\n      class=\"compose-field-container\"\n    >\n      <textarea\n        class=\"compose-field\"\n        autoCapitalize=\"sentences\"\n        autoComplete=\"on\"\n        autoCorrect=\"on\"\n        spellCheck=\"true\"\n        dir=\"auto\"\n        rows=\"6\"\n        cols=\"50\"\n        {...textareaProps}\n        ref={ref}\n        name=\"status\"\n        value={text}\n        onKeyDown={(e) => {\n          // Get line before cursor position after pressing 'Enter'\n          const { key, target } = e;\n          if (key === 'Enter' && !(e.ctrlKey || e.metaKey)) {\n            try {\n              const { value, selectionStart } = target;\n              const textBeforeCursor = value.slice(0, selectionStart);\n              const lastLine = textBeforeCursor.split('\\n').slice(-1)[0];\n              if (lastLine) {\n                // If line starts with \"- \" or \"12. \"\n                if (/^\\s*(-|\\d+\\.)\\s/.test(lastLine)) {\n                  // insert \"- \" at cursor position\n                  const [_, preSpaces, bullet, postSpaces, anything] =\n                    lastLine.match(/^(\\s*)(-|\\d+\\.)(\\s+)(.+)?/) || [];\n                  if (anything) {\n                    e.preventDefault();\n                    const [number] = bullet.match(/\\d+/) || [];\n                    const newBullet = number ? `${+number + 1}.` : '-';\n                    const text = `\\n${preSpaces}${newBullet}${postSpaces}`;\n                    target.setRangeText(text, selectionStart, selectionStart);\n                    const pos = selectionStart + text.length;\n                    target.setSelectionRange(pos, pos);\n                  } else {\n                    // trim the line before the cursor, then insert new line\n                    const pos = selectionStart - lastLine.length;\n                    target.setRangeText('', pos, selectionStart);\n                  }\n                  autoResizeTextarea(target);\n                  target.dispatchEvent(new Event('input'));\n                }\n              }\n            } catch (e) {\n              // silent fail\n              console.error(e);\n            }\n          }\n          if (composeHighlightRef.current) {\n            composeHighlightRef.current.scrollTop = target.scrollTop;\n          }\n        }}\n        onInput={(e) => {\n          const { target } = e;\n          // Replace zero-width space\n          const text = target.value.replace(/\\u200b/g, '');\n          setText(text);\n          autoResizeTextarea(target);\n          props.onInput?.(e);\n          throttleHighlightText(text);\n          debouncedAutoDetectLanguage();\n        }}\n        style={{\n          width: '100%',\n          height: '4em',\n          // '--text-weight': (1 + charCount / 140).toFixed(1) || 1,\n        }}\n        onScroll={(e) => {\n          if (composeHighlightRef.current) {\n            const { scrollTop } = e.target;\n            composeHighlightRef.current.scrollTop = scrollTop;\n          }\n        }}\n      />\n      <div\n        ref={composeHighlightRef}\n        class=\"compose-highlight\"\n        aria-hidden=\"true\"\n      />\n    </text-expander>\n  );\n});\n\nfunction CharCountMeter({ maxCharacters = 500, hidden }) {\n  const snapStates = useSnapshot(states);\n  const charCount = snapStates.composerCharacterCount;\n  const leftChars = maxCharacters - charCount;\n  if (hidden) {\n    return <span class=\"char-counter\" hidden />;\n  }\n  return (\n    <span\n      class=\"char-counter\"\n      title={`${leftChars}/${maxCharacters}`}\n      style={{\n        '--percentage': (charCount / maxCharacters) * 100,\n      }}\n    >\n      <meter\n        class={`${\n          leftChars <= -10\n            ? 'explode'\n            : leftChars <= 0\n            ? 'danger'\n            : leftChars <= 20\n            ? 'warning'\n            : ''\n        }`}\n        value={charCount}\n        max={maxCharacters}\n      />\n      <span class=\"counter\">{leftChars}</span>\n    </span>\n  );\n}\n\nfunction scaleDimension(matrix, matrixLimit, width, height) {\n  // matrix = number of pixels\n  // matrixLimit = max number of pixels\n  // Calculate new width and height, downsize to within the limit, preserve aspect ratio, no decimals\n  const scalingFactor = Math.sqrt(matrixLimit / matrix);\n  const newWidth = Math.floor(width * scalingFactor);\n  const newHeight = Math.floor(height * scalingFactor);\n  return { newWidth, newHeight };\n}\n\nfunction MediaAttachment({\n  attachment,\n  disabled,\n  lang,\n  onDescriptionChange = () => {},\n  onRemove = () => {},\n}) {\n  const { i18n } = useLingui();\n  const [uiState, setUIState] = useState('default');\n  const supportsEdit = supports('@mastodon/edit-media-attributes');\n  const { type, id, file } = attachment;\n  const url = useMemo(\n    () => (file ? URL.createObjectURL(file) : attachment.url),\n    [file, attachment.url],\n  );\n  console.log({ attachment });\n\n  const checkMaxError = !!file?.size;\n  const configuration = checkMaxError ? getCurrentInstanceConfiguration() : {};\n  const {\n    mediaAttachments: {\n      imageSizeLimit,\n      imageMatrixLimit,\n      videoSizeLimit,\n      videoMatrixLimit,\n      videoFrameRateLimit,\n    } = {},\n  } = configuration || {};\n\n  const [maxError, setMaxError] = useState(() => {\n    if (!checkMaxError) return null;\n    if (\n      type.startsWith('image') &&\n      imageSizeLimit &&\n      file.size > imageSizeLimit\n    ) {\n      return {\n        type: 'imageSizeLimit',\n        details: {\n          imageSize: file.size,\n          imageSizeLimit,\n        },\n      };\n    } else if (\n      type.startsWith('video') &&\n      videoSizeLimit &&\n      file.size > videoSizeLimit\n    ) {\n      return {\n        type: 'videoSizeLimit',\n        details: {\n          videoSize: file.size,\n          videoSizeLimit,\n        },\n      };\n    }\n    return null;\n  });\n\n  const [imageMatrix, setImageMatrix] = useState({});\n  useEffect(() => {\n    if (!checkMaxError || !imageMatrixLimit) return;\n    if (imageMatrix?.matrix > imageMatrixLimit) {\n      setMaxError({\n        type: 'imageMatrixLimit',\n        details: {\n          imageMatrix: imageMatrix?.matrix,\n          imageMatrixLimit,\n          width: imageMatrix?.width,\n          height: imageMatrix?.height,\n        },\n      });\n    }\n  }, [imageMatrix, imageMatrixLimit, checkMaxError]);\n\n  const [videoMatrix, setVideoMatrix] = useState({});\n  useEffect(() => {\n    if (!checkMaxError || !videoMatrixLimit) return;\n    if (videoMatrix?.matrix > videoMatrixLimit) {\n      setMaxError({\n        type: 'videoMatrixLimit',\n        details: {\n          videoMatrix: videoMatrix?.matrix,\n          videoMatrixLimit,\n          width: videoMatrix?.width,\n          height: videoMatrix?.height,\n        },\n      });\n    }\n  }, [videoMatrix, videoMatrixLimit, checkMaxError]);\n\n  const [description, setDescription] = useState(attachment.description);\n  const [suffixType, subtype] = type.split('/');\n  const debouncedOnDescriptionChange = useDebouncedCallback(\n    onDescriptionChange,\n    250,\n  );\n  useEffect(() => {\n    debouncedOnDescriptionChange(description);\n  }, [description, debouncedOnDescriptionChange]);\n\n  const [showModal, setShowModal] = useState(false);\n  const textareaRef = useRef(null);\n  useEffect(() => {\n    let timer;\n    if (showModal && textareaRef.current) {\n      timer = setTimeout(() => {\n        textareaRef.current.focus();\n      }, 100);\n    }\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [showModal]);\n\n  const descTextarea = (\n    <>\n      {!!id && !supportsEdit ? (\n        <div class=\"media-desc\">\n          <span class=\"tag\">\n            <Trans>Uploaded</Trans>\n          </span>\n          <p title={description}>\n            {attachment.description || <i>No description</i>}\n          </p>\n        </div>\n      ) : (\n        <textarea\n          ref={textareaRef}\n          value={description || ''}\n          lang={lang}\n          placeholder={\n            {\n              image: t`Image description`,\n              video: t`Video description`,\n              audio: t`Audio description`,\n            }[suffixType]\n          }\n          autoCapitalize=\"sentences\"\n          autoComplete=\"on\"\n          autoCorrect=\"on\"\n          spellCheck=\"true\"\n          dir=\"auto\"\n          disabled={disabled || uiState === 'loading'}\n          class={uiState === 'loading' ? 'loading' : ''}\n          maxlength=\"1500\" // Not unicode-aware :(\n          // TODO: Un-hard-code this maxlength, ref: https://github.com/mastodon/mastodon/blob/b59fb28e90bc21d6fd1a6bafd13cfbd81ab5be54/app/models/media_attachment.rb#L39\n          onInput={(e) => {\n            const { value } = e.target;\n            setDescription(value);\n            // debouncedOnDescriptionChange(value);\n          }}\n        ></textarea>\n      )}\n    </>\n  );\n\n  const toastRef = useRef(null);\n  useEffect(() => {\n    return () => {\n      toastRef.current?.hideToast?.();\n    };\n  }, []);\n\n  const maxErrorToast = useRef(null);\n\n  const maxErrorText = (err) => {\n    const { type, details } = err;\n    switch (type) {\n      case 'imageSizeLimit': {\n        const { imageSize, imageSizeLimit } = details;\n        return t`File size too large. Uploading might encounter issues. Try reduce the file size from ${prettyBytes(\n          imageSize,\n        )} to ${prettyBytes(imageSizeLimit)} or lower.`;\n      }\n      case 'imageMatrixLimit': {\n        const { imageMatrix, imageMatrixLimit, width, height } = details;\n        const { newWidth, newHeight } = scaleDimension(\n          imageMatrix,\n          imageMatrixLimit,\n          width,\n          height,\n        );\n        return t`Dimension too large. Uploading might encounter issues. Try reduce dimension from ${i18n.number(\n          width,\n        )}×${i18n.number(height)}px to ${i18n.number(newWidth)}×${i18n.number(\n          newHeight,\n        )}px.`;\n      }\n      case 'videoSizeLimit': {\n        const { videoSize, videoSizeLimit } = details;\n        return t`File size too large. Uploading might encounter issues. Try reduce the file size from ${prettyBytes(\n          videoSize,\n        )} to ${prettyBytes(videoSizeLimit)} or lower.`;\n      }\n      case 'videoMatrixLimit': {\n        const { videoMatrix, videoMatrixLimit, width, height } = details;\n        const { newWidth, newHeight } = scaleDimension(\n          videoMatrix,\n          videoMatrixLimit,\n          width,\n          height,\n        );\n        return t`Dimension too large. Uploading might encounter issues. Try reduce dimension from ${i18n.number(\n          width,\n        )}×${i18n.number(height)}px to ${i18n.number(newWidth)}×${i18n.number(\n          newHeight,\n        )}px.`;\n      }\n      case 'videoFrameRateLimit': {\n        // Not possible to detect this on client-side for now\n        return t`Frame rate too high. Uploading might encounter issues.`;\n      }\n    }\n  };\n\n  return (\n    <>\n      <div class=\"media-attachment\">\n        <div\n          class=\"media-preview\"\n          tabIndex=\"0\"\n          onClick={() => {\n            setShowModal(true);\n          }}\n        >\n          {suffixType === 'image' ? (\n            <img\n              src={url}\n              alt=\"\"\n              onLoad={(e) => {\n                if (!checkMaxError) return;\n                const { naturalWidth, naturalHeight } = e.target;\n                setImageMatrix({\n                  matrix: naturalWidth * naturalHeight,\n                  width: naturalWidth,\n                  height: naturalHeight,\n                });\n              }}\n            />\n          ) : suffixType === 'video' || suffixType === 'gifv' ? (\n            <video\n              src={url + '#t=0.1'} // Make Safari show 1st-frame preview\n              playsinline\n              muted\n              disablePictureInPicture\n              preload=\"metadata\"\n              onLoadedMetadata={(e) => {\n                if (!checkMaxError) return;\n                const { videoWidth, videoHeight } = e.target;\n                if (videoWidth && videoHeight) {\n                  setVideoMatrix({\n                    matrix: videoWidth * videoHeight,\n                    width: videoWidth,\n                    height: videoHeight,\n                  });\n                }\n              }}\n            />\n          ) : suffixType === 'audio' ? (\n            <audio src={url} controls />\n          ) : null}\n        </div>\n        {descTextarea}\n        <div class=\"media-aside\">\n          <button\n            type=\"button\"\n            class=\"plain close-button\"\n            disabled={disabled}\n            onClick={onRemove}\n          >\n            <Icon icon=\"x\" alt={t`Remove`} />\n          </button>\n          {!!maxError && (\n            <button\n              type=\"button\"\n              class=\"media-error\"\n              title={maxErrorText(maxError)}\n              onClick={() => {\n                if (maxErrorToast.current) {\n                  maxErrorToast.current.hideToast();\n                }\n                maxErrorToast.current = showToast({\n                  text: maxErrorText(maxError),\n                  duration: 10_000,\n                });\n              }}\n            >\n              <Icon icon=\"alert\" alt={t`Error`} />\n            </button>\n          )}\n        </div>\n      </div>\n      {showModal && (\n        <Modal\n          onClose={() => {\n            setShowModal(false);\n          }}\n        >\n          <div id=\"media-sheet\" class=\"sheet sheet-max\">\n            <button\n              type=\"button\"\n              class=\"sheet-close\"\n              onClick={() => {\n                setShowModal(false);\n              }}\n            >\n              <Icon icon=\"x\" alt={t`Close`} />\n            </button>\n            <header>\n              <h2>\n                {\n                  {\n                    image: t`Edit image description`,\n                    video: t`Edit video description`,\n                    audio: t`Edit audio description`,\n                  }[suffixType]\n                }\n              </h2>\n            </header>\n            <main tabIndex=\"-1\">\n              <div class=\"media-preview\">\n                {suffixType === 'image' ? (\n                  <img src={url} alt=\"\" />\n                ) : suffixType === 'video' || suffixType === 'gifv' ? (\n                  <video src={url} playsinline controls />\n                ) : suffixType === 'audio' ? (\n                  <audio src={url} controls />\n                ) : null}\n              </div>\n              <div class=\"media-form\">\n                {descTextarea}\n                <footer>\n                  {suffixType === 'image' &&\n                    /^(png|jpe?g|gif|webp)$/i.test(subtype) &&\n                    !!states.settings.mediaAltGenerator &&\n                    !!IMG_ALT_API_URL && (\n                      <Menu2\n                        portal={{\n                          target: document.body,\n                        }}\n                        containerProps={{\n                          style: {\n                            zIndex: 1001,\n                          },\n                        }}\n                        align=\"center\"\n                        position=\"anchor\"\n                        overflow=\"auto\"\n                        menuButton={\n                          <button type=\"button\" class=\"plain\">\n                            <Icon icon=\"more\" size=\"l\" alt={t`More`} />\n                          </button>\n                        }\n                      >\n                        <MenuItem\n                          disabled={uiState === 'loading'}\n                          onClick={() => {\n                            setUIState('loading');\n                            toastRef.current = showToast({\n                              text: t`Generating description. Please wait…`,\n                              duration: -1,\n                            });\n                            // POST with multipart\n                            (async function () {\n                              try {\n                                const body = new FormData();\n                                body.append('image', file);\n                                const response = await fetch(IMG_ALT_API_URL, {\n                                  method: 'POST',\n                                  body,\n                                }).then((r) => r.json());\n                                if (response.error) {\n                                  throw new Error(response.error);\n                                }\n                                setDescription(response.description);\n                              } catch (e) {\n                                console.error(e);\n                                showToast(\n                                  e.message\n                                    ? t`Failed to generate description: ${e.message}`\n                                    : t`Failed to generate description`,\n                                );\n                              } finally {\n                                setUIState('default');\n                                toastRef.current?.hideToast?.();\n                              }\n                            })();\n                          }}\n                        >\n                          <Icon icon=\"sparkles2\" />\n                          {lang && lang !== 'en' ? (\n                            <small>\n                              <Trans>Generate description…</Trans>\n                              <br />\n                              (English)\n                            </small>\n                          ) : (\n                            <span>\n                              <Trans>Generate description…</Trans>\n                            </span>\n                          )}\n                        </MenuItem>\n                        {!!lang && lang !== 'en' && (\n                          <MenuItem\n                            disabled={uiState === 'loading'}\n                            onClick={() => {\n                              setUIState('loading');\n                              toastRef.current = showToast({\n                                text: t`Generating description. Please wait…`,\n                                duration: -1,\n                              });\n                              // POST with multipart\n                              (async function () {\n                                try {\n                                  const body = new FormData();\n                                  body.append('image', file);\n                                  const params = `?lang=${lang}`;\n                                  const response = await fetch(\n                                    IMG_ALT_API_URL + params,\n                                    {\n                                      method: 'POST',\n                                      body,\n                                    },\n                                  ).then((r) => r.json());\n                                  if (response.error) {\n                                    throw new Error(response.error);\n                                  }\n                                  setDescription(response.description);\n                                } catch (e) {\n                                  console.error(e);\n                                  showToast(\n                                    t`Failed to generate description${\n                                      e?.message ? `: ${e.message}` : ''\n                                    }`,\n                                  );\n                                } finally {\n                                  setUIState('default');\n                                  toastRef.current?.hideToast?.();\n                                }\n                              })();\n                            }}\n                          >\n                            <Icon icon=\"sparkles2\" />\n                            <small>\n                              <Trans>Generate description…</Trans>\n                              <br />\n                              <Trans>\n                                ({localeCode2Text(lang)}){' '}\n                                <span class=\"more-insignificant\">\n                                  — experimental\n                                </span>\n                              </Trans>\n                            </small>\n                          </MenuItem>\n                        )}\n                      </Menu2>\n                    )}\n                  <button\n                    type=\"button\"\n                    class=\"light block\"\n                    onClick={() => {\n                      setShowModal(false);\n                    }}\n                    disabled={uiState === 'loading'}\n                  >\n                    <Trans>Done</Trans>\n                  </button>\n                </footer>\n              </div>\n            </main>\n          </div>\n        </Modal>\n      )}\n    </>\n  );\n}\n\nfunction Poll({\n  lang,\n  poll,\n  disabled,\n  onInput = () => {},\n  maxOptions,\n  maxExpiration,\n  minExpiration,\n  maxCharactersPerOption,\n}) {\n  const { _ } = useLingui();\n  const { options, expiresIn, multiple } = poll;\n\n  return (\n    <div class={`poll ${multiple ? 'multiple' : ''}`}>\n      <div class=\"poll-choices\">\n        {options.map((option, i) => (\n          <div class=\"poll-choice\" key={i}>\n            <input\n              required\n              type=\"text\"\n              value={option}\n              disabled={disabled}\n              maxlength={maxCharactersPerOption}\n              placeholder={t`Choice ${i + 1}`}\n              lang={lang}\n              spellCheck=\"true\"\n              dir=\"auto\"\n              onInput={(e) => {\n                const { value } = e.target;\n                options[i] = value;\n                onInput(poll);\n              }}\n            />\n            <button\n              type=\"button\"\n              class=\"plain2 poll-button\"\n              disabled={disabled || options.length <= 1}\n              onClick={() => {\n                options.splice(i, 1);\n                onInput(poll);\n              }}\n            >\n              <Icon icon=\"x\" size=\"s\" alt={t`Remove`} />\n            </button>\n          </div>\n        ))}\n      </div>\n      <div class=\"poll-toolbar\">\n        <button\n          type=\"button\"\n          class=\"plain2 poll-button\"\n          disabled={disabled || options.length >= maxOptions}\n          onClick={() => {\n            options.push('');\n            onInput(poll);\n          }}\n        >\n          +\n        </button>{' '}\n        <label class=\"multiple-choices\">\n          <input\n            type=\"checkbox\"\n            checked={multiple}\n            disabled={disabled}\n            onChange={(e) => {\n              const { checked } = e.target;\n              poll.multiple = checked;\n              onInput(poll);\n            }}\n          />{' '}\n          <Trans>Multiple choices</Trans>\n        </label>\n        <label class=\"expires-in\">\n          <Trans>Duration</Trans>{' '}\n          <select\n            value={expiresIn}\n            disabled={disabled}\n            onChange={(e) => {\n              const { value } = e.target;\n              poll.expiresIn = value;\n              onInput(poll);\n            }}\n          >\n            {Object.entries(expiryOptions)\n              .filter(([value]) => {\n                return value >= minExpiration && value <= maxExpiration;\n              })\n              .map(([value, label]) => (\n                <option value={value} key={value}>\n                  {label()}\n                </option>\n              ))}\n          </select>\n        </label>\n      </div>\n      <div class=\"poll-toolbar\">\n        <button\n          type=\"button\"\n          class=\"plain remove-poll-button\"\n          disabled={disabled}\n          onClick={() => {\n            onInput(null);\n          }}\n        >\n          <Trans>Remove poll</Trans>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction filterShortcodes(emojis, searchTerm) {\n  searchTerm = searchTerm.toLowerCase();\n\n  // Return an array of shortcodes that start with or contain the search term, sorted by relevance and limited to the first 5\n  return emojis\n    .sort((a, b) => {\n      let aLower = a.shortcode.toLowerCase();\n      let bLower = b.shortcode.toLowerCase();\n\n      let aStartsWith = aLower.startsWith(searchTerm);\n      let bStartsWith = bLower.startsWith(searchTerm);\n      let aContains = aLower.includes(searchTerm);\n      let bContains = bLower.includes(searchTerm);\n      let bothStartWith = aStartsWith && bStartsWith;\n      let bothContain = aContains && bContains;\n\n      return bothStartWith\n        ? a.length - b.length\n        : aStartsWith\n        ? -1\n        : bStartsWith\n        ? 1\n        : bothContain\n        ? a.length - b.length\n        : aContains\n        ? -1\n        : bContains\n        ? 1\n        : 0;\n    })\n    .slice(0, 5);\n}\n\nfunction encodeHTML(str) {\n  return str.replace(/[&<>\"']/g, function (char) {\n    return '&#' + char.charCodeAt(0) + ';';\n  });\n}\n\nfunction removeNullUndefined(obj) {\n  for (let key in obj) {\n    if (obj[key] === null || obj[key] === undefined) {\n      delete obj[key];\n    }\n  }\n  return obj;\n}\n\nfunction MentionModal({\n  onClose = () => {},\n  onSelect = () => {},\n  defaultSearchTerm,\n}) {\n  const { masto } = api();\n  const [uiState, setUIState] = useState('default');\n  const [accounts, setAccounts] = useState([]);\n  const [relationshipsMap, setRelationshipsMap] = useState({});\n\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  const loadRelationships = async (accounts) => {\n    if (!accounts?.length) return;\n    const relationships = await fetchRelationships(accounts, relationshipsMap);\n    if (relationships) {\n      setRelationshipsMap({\n        ...relationshipsMap,\n        ...relationships,\n      });\n    }\n  };\n\n  const loadAccounts = (term) => {\n    if (!term) return;\n    setUIState('loading');\n    (async () => {\n      try {\n        const accounts = await masto.v1.accounts.search.list({\n          q: term,\n          limit: 40,\n          resolve: false,\n        });\n        setAccounts(accounts);\n        loadRelationships(accounts);\n        setUIState('default');\n      } catch (e) {\n        setUIState('error');\n        console.error(e);\n      }\n    })();\n  };\n\n  const debouncedLoadAccounts = useDebouncedCallback(loadAccounts, 1000);\n\n  useEffect(() => {\n    loadAccounts();\n  }, [loadAccounts]);\n\n  const inputRef = useRef();\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n      // Put cursor at the end\n      if (inputRef.current.value) {\n        inputRef.current.selectionStart = inputRef.current.value.length;\n        inputRef.current.selectionEnd = inputRef.current.value.length;\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    if (defaultSearchTerm) {\n      loadAccounts(defaultSearchTerm);\n    }\n  }, [defaultSearchTerm]);\n\n  const selectAccount = (account) => {\n    const socialAddress = account.acct;\n    onSelect(socialAddress);\n    onClose();\n  };\n\n  useHotkeys(\n    'enter',\n    () => {\n      const selectedAccount = accounts[selectedIndex];\n      if (selectedAccount) {\n        selectAccount(selectedAccount);\n      }\n    },\n    {\n      preventDefault: true,\n      enableOnFormTags: ['input'],\n    },\n  );\n\n  const listRef = useRef();\n  useHotkeys(\n    'down',\n    () => {\n      if (selectedIndex < accounts.length - 1) {\n        setSelectedIndex(selectedIndex + 1);\n      } else {\n        setSelectedIndex(0);\n      }\n      setTimeout(() => {\n        const selectedItem = listRef.current.querySelector('.selected');\n        if (selectedItem) {\n          selectedItem.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n            inline: 'center',\n          });\n        }\n      }, 1);\n    },\n    {\n      preventDefault: true,\n      enableOnFormTags: ['input'],\n    },\n  );\n\n  useHotkeys(\n    'up',\n    () => {\n      if (selectedIndex > 0) {\n        setSelectedIndex(selectedIndex - 1);\n      } else {\n        setSelectedIndex(accounts.length - 1);\n      }\n      setTimeout(() => {\n        const selectedItem = listRef.current.querySelector('.selected');\n        if (selectedItem) {\n          selectedItem.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n            inline: 'center',\n          });\n        }\n      }, 1);\n    },\n    {\n      preventDefault: true,\n      enableOnFormTags: ['input'],\n    },\n  );\n\n  return (\n    <div id=\"mention-sheet\" class=\"sheet\">\n      {!!onClose && (\n        <button type=\"button\" class=\"sheet-close\" onClick={onClose}>\n          <Icon icon=\"x\" alt={t`Close`} />\n        </button>\n      )}\n      <header>\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            debouncedLoadAccounts.flush?.();\n            // const searchTerm = inputRef.current.value;\n            // debouncedLoadAccounts(searchTerm);\n          }}\n        >\n          <input\n            ref={inputRef}\n            required\n            type=\"search\"\n            class=\"block\"\n            placeholder={t`Search accounts`}\n            onInput={(e) => {\n              const { value } = e.target;\n              debouncedLoadAccounts(value);\n            }}\n            autocomplete=\"off\"\n            autocorrect=\"off\"\n            autocapitalize=\"off\"\n            spellCheck=\"false\"\n            dir=\"auto\"\n            defaultValue={defaultSearchTerm || ''}\n          />\n        </form>\n      </header>\n      <main>\n        {accounts?.length > 0 ? (\n          <ul\n            ref={listRef}\n            class={`accounts-list ${uiState === 'loading' ? 'loading' : ''}`}\n          >\n            {accounts.map((account, i) => {\n              const relationship = relationshipsMap[account.id];\n              return (\n                <li\n                  key={account.id}\n                  class={i === selectedIndex ? 'selected' : ''}\n                >\n                  <AccountBlock\n                    avatarSize=\"xxl\"\n                    account={account}\n                    relationship={relationship}\n                    showStats\n                    showActivity\n                  />\n                  <button\n                    type=\"button\"\n                    class=\"plain2\"\n                    onClick={() => {\n                      selectAccount(account);\n                    }}\n                  >\n                    <Icon icon=\"plus\" size=\"xl\" alt={t`Add`} />\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        ) : uiState === 'loading' ? (\n          <div class=\"ui-state\">\n            <Loader abrupt />\n          </div>\n        ) : uiState === 'error' ? (\n          <div class=\"ui-state\">\n            <p>\n              <Trans>Error loading accounts</Trans>\n            </p>\n          </div>\n        ) : null}\n      </main>\n    </div>\n  );\n}\n\nfunction CustomEmojisModal({\n  masto,\n  instance,\n  onClose = () => {},\n  onSelect = () => {},\n  defaultSearchTerm,\n}) {\n  const [uiState, setUIState] = useState('default');\n  const customEmojisList = useRef([]);\n  const [customEmojis, setCustomEmojis] = useState([]);\n  const recentlyUsedCustomEmojis = useMemo(\n    () => store.account.get('recentlyUsedCustomEmojis') || [],\n  );\n  const searcherRef = useRef();\n  useEffect(() => {\n    setUIState('loading');\n    (async () => {\n      try {\n        const [emojis, searcher] = await getCustomEmojis(instance, masto);\n        console.log('emojis', emojis);\n        searcherRef.current = searcher;\n        setCustomEmojis(emojis);\n        setUIState('default');\n      } catch (e) {\n        setUIState('error');\n        console.error(e);\n      }\n    })();\n  }, []);\n\n  const customEmojisCatList = useMemo(() => {\n    // Group emojis by category\n    const emojisCat = {\n      '--recent--': recentlyUsedCustomEmojis.filter((emoji) =>\n        customEmojis.find((e) => e.shortcode === emoji.shortcode),\n      ),\n    };\n    const othersCat = [];\n    customEmojis.forEach((emoji) => {\n      customEmojisList.current?.push?.(emoji);\n      if (!emoji.category) {\n        othersCat.push(emoji);\n        return;\n      }\n      if (!emojisCat[emoji.category]) {\n        emojisCat[emoji.category] = [];\n      }\n      emojisCat[emoji.category].push(emoji);\n    });\n    if (othersCat.length) {\n      emojisCat['--others--'] = othersCat;\n    }\n    return emojisCat;\n  }, [customEmojis]);\n\n  const scrollableRef = useRef();\n  const [matches, setMatches] = useState(null);\n  const onFind = useCallback(\n    (e) => {\n      const { value } = e.target;\n      if (value) {\n        const results = searcherRef.current?.search(value, {\n          limit: CUSTOM_EMOJIS_COUNT,\n        });\n        setMatches(results.map((r) => r.item));\n        scrollableRef.current?.scrollTo?.(0, 0);\n      } else {\n        setMatches(null);\n      }\n    },\n    [customEmojis],\n  );\n  useEffect(() => {\n    if (defaultSearchTerm && customEmojis?.length) {\n      onFind({ target: { value: defaultSearchTerm } });\n    }\n  }, [defaultSearchTerm, onFind, customEmojis]);\n\n  const onSelectEmoji = useCallback(\n    (emoji) => {\n      onSelect?.(emoji);\n      onClose?.();\n\n      queueMicrotask(() => {\n        let recentlyUsedCustomEmojis =\n          store.account.get('recentlyUsedCustomEmojis') || [];\n        const recentlyUsedEmojiIndex = recentlyUsedCustomEmojis.findIndex(\n          (e) => e.shortcode === emoji.shortcode,\n        );\n        if (recentlyUsedEmojiIndex !== -1) {\n          // Move emoji to index 0\n          recentlyUsedCustomEmojis.splice(recentlyUsedEmojiIndex, 1);\n          recentlyUsedCustomEmojis.unshift(emoji);\n        } else {\n          recentlyUsedCustomEmojis.unshift(emoji);\n          // Remove unavailable ones\n          recentlyUsedCustomEmojis = recentlyUsedCustomEmojis.filter((e) =>\n            customEmojisList.current?.find?.(\n              (emoji) => emoji.shortcode === e.shortcode,\n            ),\n          );\n          // Limit to 10\n          recentlyUsedCustomEmojis = recentlyUsedCustomEmojis.slice(0, 10);\n        }\n\n        // Store back\n        store.account.set('recentlyUsedCustomEmojis', recentlyUsedCustomEmojis);\n      });\n    },\n    [onSelect],\n  );\n\n  const inputRef = useRef();\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n      // Put cursor at the end\n      if (inputRef.current.value) {\n        inputRef.current.selectionStart = inputRef.current.value.length;\n        inputRef.current.selectionEnd = inputRef.current.value.length;\n      }\n    }\n  }, []);\n\n  return (\n    <div id=\"custom-emojis-sheet\" class=\"sheet\">\n      {!!onClose && (\n        <button type=\"button\" class=\"sheet-close\" onClick={onClose}>\n          <Icon icon=\"x\" alt={t`Close`} />\n        </button>\n      )}\n      <header>\n        <div>\n          <b>\n            <Trans>Custom emojis</Trans>\n          </b>{' '}\n          {uiState === 'loading' ? (\n            <Loader />\n          ) : (\n            <small class=\"insignificant\"> • {instance}</small>\n          )}\n        </div>\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            const emoji = matches[0];\n            if (emoji) {\n              onSelectEmoji(`:${emoji.shortcode}:`);\n            }\n          }}\n        >\n          <input\n            ref={inputRef}\n            type=\"search\"\n            placeholder={t`Search emoji`}\n            onInput={onFind}\n            autocomplete=\"off\"\n            autocorrect=\"off\"\n            autocapitalize=\"off\"\n            spellCheck=\"false\"\n            dir=\"auto\"\n            defaultValue={defaultSearchTerm || ''}\n          />\n        </form>\n      </header>\n      <main ref={scrollableRef}>\n        {matches !== null ? (\n          <ul class=\"custom-emojis-matches custom-emojis-list\">\n            {matches.map((emoji) => (\n              <li key={emoji.shortcode} class=\"custom-emojis-match\">\n                <CustomEmojiButton\n                  emoji={emoji}\n                  onClick={() => {\n                    onSelectEmoji(`:${emoji.shortcode}:`);\n                  }}\n                  showCode\n                />\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <div class=\"custom-emojis-list\">\n            {uiState === 'error' && (\n              <div class=\"ui-state\">\n                <p>\n                  <Trans>Error loading custom emojis</Trans>\n                </p>\n              </div>\n            )}\n            {uiState === 'default' &&\n              Object.entries(customEmojisCatList).map(\n                ([category, emojis]) =>\n                  !!emojis?.length && (\n                    <>\n                      <div class=\"section-header\">\n                        {{\n                          '--recent--': t`Recently used`,\n                          '--others--': t`Others`,\n                        }[category] || category}\n                      </div>\n                      <CustomEmojisList\n                        emojis={emojis}\n                        onSelect={onSelectEmoji}\n                      />\n                    </>\n                  ),\n              )}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\nconst CustomEmojisList = memo(({ emojis, onSelect }) => {\n  const { i18n } = useLingui();\n  const [max, setMax] = useState(CUSTOM_EMOJIS_COUNT);\n  const showMore = emojis.length > max;\n  return (\n    <section>\n      {emojis.slice(0, max).map((emoji) => (\n        <CustomEmojiButton\n          key={emoji.shortcode}\n          emoji={emoji}\n          onClick={() => {\n            onSelect(`:${emoji.shortcode}:`);\n          }}\n        />\n      ))}\n      {showMore && (\n        <button\n          type=\"button\"\n          class=\"plain small\"\n          onClick={() => setMax(max + CUSTOM_EMOJIS_COUNT)}\n        >\n          <Trans>{i18n.number(emojis.length - max)} more…</Trans>\n        </button>\n      )}\n    </section>\n  );\n});\n\nconst CustomEmojiButton = memo(({ emoji, onClick, showCode }) => {\n  const addEdges = (e) => {\n    // Add edge-left or edge-right class based on self position relative to scrollable parent\n    // If near left edge, add edge-left, if near right edge, add edge-right\n    const buffer = 88;\n    const parent = e.currentTarget.closest('main');\n    if (parent) {\n      const rect = parent.getBoundingClientRect();\n      const selfRect = e.currentTarget.getBoundingClientRect();\n      const targetClassList = e.currentTarget.classList;\n      if (selfRect.left < rect.left + buffer) {\n        targetClassList.add('edge-left');\n        targetClassList.remove('edge-right');\n      } else if (selfRect.right > rect.right - buffer) {\n        targetClassList.add('edge-right');\n        targetClassList.remove('edge-left');\n      } else {\n        targetClassList.remove('edge-left', 'edge-right');\n      }\n    }\n  };\n\n  return (\n    <button\n      type=\"button\"\n      className=\"plain4\"\n      onClick={onClick}\n      data-title={showCode ? undefined : emoji.shortcode}\n      onPointerEnter={addEdges}\n      onFocus={addEdges}\n    >\n      <picture>\n        {!!emoji.staticUrl && (\n          <source\n            srcSet={emoji.staticUrl}\n            media=\"(prefers-reduced-motion: reduce)\"\n          />\n        )}\n        <img\n          className=\"shortcode-emoji\"\n          src={emoji.url || emoji.staticUrl}\n          alt={emoji.shortcode}\n          width=\"24\"\n          height=\"24\"\n          loading=\"lazy\"\n          decoding=\"async\"\n        />\n      </picture>\n      {showCode && (\n        <>\n          {' '}\n          <code>{emoji.shortcode}</code>\n        </>\n      )}\n    </button>\n  );\n});\n\nconst GIFS_PER_PAGE = 20;\nfunction GIFPickerModal({ onClose = () => {}, onSelect = () => {} }) {\n  const { i18n } = useLingui();\n  const [uiState, setUIState] = useState('default');\n  const [results, setResults] = useState([]);\n  const formRef = useRef(null);\n  const qRef = useRef(null);\n  const currentOffset = useRef(0);\n  const scrollableRef = useRef(null);\n\n  function fetchGIFs({ offset }) {\n    console.log('fetchGIFs', { offset });\n    if (!qRef.current?.value) return;\n    setUIState('loading');\n    scrollableRef.current?.scrollTo?.({\n      top: 0,\n      left: 0,\n      behavior: 'smooth',\n    });\n    (async () => {\n      try {\n        const query = {\n          api_key: GIPHY_API_KEY,\n          q: qRef.current.value,\n          rating: 'g',\n          limit: GIFS_PER_PAGE,\n          bundle: 'messaging_non_clips',\n          offset,\n          lang: i18n.locale || 'en',\n        };\n        const response = await fetch(\n          'https://api.giphy.com/v1/gifs/search?' + new URLSearchParams(query),\n          {\n            referrerPolicy: 'no-referrer',\n          },\n        ).then((r) => r.json());\n        currentOffset.current = response.pagination?.offset || 0;\n        setResults(response);\n        setUIState('results');\n      } catch (e) {\n        setUIState('error');\n        console.error(e);\n      }\n    })();\n  }\n\n  useEffect(() => {\n    qRef.current?.focus();\n  }, []);\n\n  const debouncedOnInput = useDebouncedCallback(() => {\n    fetchGIFs({ offset: 0 });\n  }, 1000);\n\n  return (\n    <div id=\"gif-picker-sheet\" class=\"sheet\">\n      {!!onClose && (\n        <button type=\"button\" class=\"sheet-close\" onClick={onClose}>\n          <Icon icon=\"x\" alt={t`Close`} />\n        </button>\n      )}\n      <header>\n        <form\n          ref={formRef}\n          onSubmit={(e) => {\n            e.preventDefault();\n            fetchGIFs({ offset: 0 });\n          }}\n        >\n          <input\n            ref={qRef}\n            type=\"search\"\n            name=\"q\"\n            placeholder={t`Search GIFs`}\n            required\n            autocomplete=\"off\"\n            autocorrect=\"off\"\n            autocapitalize=\"off\"\n            spellCheck=\"false\"\n            dir=\"auto\"\n            onInput={debouncedOnInput}\n          />\n          <input\n            type=\"image\"\n            class=\"powered-button\"\n            src={poweredByGiphyURL}\n            width=\"86\"\n            height=\"30\"\n            alt={t`Powered by GIPHY`}\n          />\n        </form>\n      </header>\n      <main ref={scrollableRef} class={uiState === 'loading' ? 'loading' : ''}>\n        {uiState === 'default' && (\n          <div class=\"ui-state\">\n            <p class=\"insignificant\">\n              <Trans>Type to search GIFs</Trans>\n            </p>\n          </div>\n        )}\n        {uiState === 'loading' && !results?.data?.length && (\n          <div class=\"ui-state\">\n            <Loader abrupt />\n          </div>\n        )}\n        {results?.data?.length > 0 ? (\n          <>\n            <ul>\n              {results.data.map((gif) => {\n                const { id, images, title, alt_text } = gif;\n                const {\n                  fixed_height_small,\n                  fixed_height_downsampled,\n                  fixed_height,\n                  original,\n                } = images;\n                const theImage = fixed_height_small?.url\n                  ? fixed_height_small\n                  : fixed_height_downsampled?.url\n                  ? fixed_height_downsampled\n                  : fixed_height;\n                let { url, webp, width, height } = theImage;\n                if (+height > 100) {\n                  width = (width / height) * 100;\n                  height = 100;\n                }\n                const urlObj = URL.parse(url);\n                const strippedURL = urlObj.origin + urlObj.pathname;\n                let strippedWebP;\n                if (webp) {\n                  const webpObj = URL.parse(webp);\n                  strippedWebP = webpObj.origin + webpObj.pathname;\n                }\n                return (\n                  <li key={id}>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        const { mp4, url } = original;\n                        const theURL = mp4 || url;\n                        const urlObj = URL.parse(theURL);\n                        const strippedURL = urlObj.origin + urlObj.pathname;\n                        onClose();\n                        onSelect({\n                          url: strippedURL,\n                          type: mp4 ? 'video/mp4' : 'image/gif',\n                          alt_text: alt_text || title,\n                        });\n                      }}\n                    >\n                      <figure\n                        style={{\n                          '--figure-width': width + 'px',\n                          // width: width + 'px'\n                        }}\n                      >\n                        <picture>\n                          {strippedWebP && (\n                            <source srcset={strippedWebP} type=\"image/webp\" />\n                          )}\n                          <img\n                            src={strippedURL}\n                            width={width}\n                            height={height}\n                            loading=\"lazy\"\n                            decoding=\"async\"\n                            alt={alt_text}\n                            referrerpolicy=\"no-referrer\"\n                            onLoad={(e) => {\n                              e.target.style.backgroundColor = 'transparent';\n                            }}\n                          />\n                        </picture>\n                        <figcaption>{alt_text || title}</figcaption>\n                      </figure>\n                    </button>\n                  </li>\n                );\n              })}\n            </ul>\n            <p class=\"pagination\">\n              {results.pagination?.offset > 0 && (\n                <button\n                  type=\"button\"\n                  class=\"light small\"\n                  disabled={uiState === 'loading'}\n                  onClick={() => {\n                    fetchGIFs({\n                      offset: results.pagination?.offset - GIFS_PER_PAGE,\n                    });\n                  }}\n                >\n                  <Icon icon=\"chevron-left\" />\n                  <span>\n                    <Trans>Previous</Trans>\n                  </span>\n                </button>\n              )}\n              <span />\n              {results.pagination?.offset + results.pagination?.count <\n                results.pagination?.total_count && (\n                <button\n                  type=\"button\"\n                  class=\"light small\"\n                  disabled={uiState === 'loading'}\n                  onClick={() => {\n                    fetchGIFs({\n                      offset: results.pagination?.offset + GIFS_PER_PAGE,\n                    });\n                  }}\n                >\n                  <span>\n                    <Trans>Next</Trans>\n                  </span>{' '}\n                  <Icon icon=\"chevron-right\" />\n                </button>\n              )}\n            </p>\n          </>\n        ) : (\n          uiState === 'results' && (\n            <div class=\"ui-state\">\n              <p>No results</p>\n            </div>\n          )\n        )}\n        {uiState === 'error' && (\n          <div class=\"ui-state\">\n            <p>\n              <Trans>Error loading GIFs</Trans>\n            </p>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\nexport default Compose;\n"],"names":["Combobox","input","list","tabInsertsSuggestions","defaultFirstOption","event","keyboardBindings","trackComposition","commitWithElement","_a","visible","indexDiff","focusEl","els","focusIndex","indexOfItem","newIndex","target","el","scrollTo","combobox","commit","fireCommitEvent","container","inViewport","element","scrollTop","containerBottom","top","bottom","boundary","query","text","key","cursor","multiWord","lookBackIndex","lastMatchPosition","keyIndex","pre","CustomHTMLElement","InputStyleCloneUpdateEvent","CloneRegistry","_InputStyleCloneElement","__privateAdd","_InputStyleCloneElement_instances","_styleObserver","__privateMethod","updateStyles_fn","_resizeObserver","requestUpdateLayout_fn","_inputRef","_container","_xOffset","_yOffset","_isLayoutUpdating","_onInput","updateText_fn","_onDocumentScrollOrResize","usingInput_fn","__privateSet","__privateGet","clone","fn","updateLayout_fn","inputStyle","inputRect","cloneRect","prop","propertiesToCopy","InputStyleCloneElement","e","_InputRange","startOffset","endOffset","_InputRange_instances","_inputElement","_startOffset","_endOffset","selectionStart","selectionEnd","offset","clampOffset_fn","toStart","createCloneRange_fn","styleClone_get","cloneElement_get","range","textNode","InputRange","states","TextExpander","expander","match","menu","_b","position","caretRect","targetPosition","currentPosition","delta","currentStyle","item","beginning","remaining","detail","suffix","value","found","providers","provide","result","x","TextExpanderElement","keysAttr","keys","multiWordAttr","globalMultiWord","state","ansiRegex","onlyFirst","pattern","regex","stripAnsi","string","segmenter","stringLength","countAnsiEscapeCodes","length","_","poweredByGiphyURL","BYTES_UNITS","prettyBytes","bytes","unitIndex","Math","min","floor","log2","i18n","number","style","unit","unitDisplay","maximumFractionDigits","PHANPY_IMG_ALT_API_URL","IMG_ALT_API_URL","PHANPY_GIPHY_API_KEY","GIPHY_API_KEY","import","supportedLanguagesMap","supportedLanguages","reduce","acc","l","code","common","native","expiryOptions","i18nDuration","expirySeconds","Object","oneDay","expiresInFromExpiresAt","expiresAt","Date","getTime","now","find","s","document","createElement","role","className","windowMargin","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","left","width","boundingClientRect","innerWidth","window","insetInlineStart","isRTL","observe","DEFAULT_LANG","localeMatch","Intl","DateTimeFormat","resolvedOptions","locale","navigator","languages","map","urlRegexObj","RegExp","urlRegex","source","flags","usernameRegex","urlPlaceholder","countableText","inputText","replace","USERNAME_RE","MENTION_RE","HASHTAG_RE","SHORTCODE_RE_FRAGMENT","SCAN_RE","Segmenter","escapeHTML","highlightText","maxCharacters","Infinity","composerCharacterCount","withinLimitHTML","exceedLimitHTML","htmlSegments","segment","index","RTF","mem","RelativeTimeFormat","undefined","CUSTOM_EMOJIS_COUNT","Compose","onClose","replyToStatus","editStatus","draftStatus","standalone","hasOpener","useLingui","rtf","console","masto","instance","uiState","setUIState","useState","UID","uid","log","currentAccount","currentAccountInfo","maxMediaAttachments","charactersReservedPerUrl","imageMatrixLimit","supportedMimeTypes","imageSizeLimit","videoSizeLimit","videoMatrixLimit","videoFrameRateLimit","maxExpiration","maxOptions","maxCharactersPerOption","minExpiration","spoilerTextRef","useRef","textareaRef","store","prevLanguage","language","sensitive","setMediaAttachments","setLanguage","oninputTextarea","poll","account","focusTextarea","dispatchEvent","setTimeout","spoilerText","useEffect","visibility2","language2","sensitive2","visibility","current","m","allMentions","prefs","setSensitive","poll2","mediaAttachments","options","expiresIn","statusSource","dataset","mediaAttachments2","setVisibility","composablePoll","status","o","formRef","canClose","id","hasValue","hasMediaAttachments","isSelf","hasOnlyAcct","confirmClose","hasIDMediaAttachments","beforeUnloadCopy","handleBeforeUnload","sameWithSource","getCharCount","updateCharCount","supportsCloseWatcher","useHotkeys","yes","addEventListener","capture","modals","hasModal","hasOnlyComposer","prevBackgroundDraft","count","escDownRef","ignoreEventWhen","useCloseWatcher","draftKey","getCurrentAccountNS","backgroundDraft","useInterval","db","handleItems","username","acct","items","i2","file","debug","drafts","updatedAt","error","max","allowedFiles","i18n2","del","files","mediaFiles","alert","handleDragover","showMentionPicker","setShowMentionPicker","setShowEmoji2Picker","setShowGIFPicker","setAutoDetectedLanguages","topLanguages","restLanguages","commonB","type","size","url","codeA","commonA","codeB","autoDetectedLanguages","useMemo","onMinimize","saveUnsavedDraft","_jsxs","dataTransfer","_jsx","showEmoji2Picker","showGIFPicker","topSupportedLanguages","children","class","confirmText","passData","__STATES__","opener","composerState","Icon","settings","sort","avatarStatic","disabled","onClick","Status","replyToStatusMonthsAgo","Trans","formData","components","0","media","onKeyDown","onSubmit","description","params2","res","attachment","results","mediaPromises","hasNoDescriptions","params","removeNullUndefined","newStatus","saveStatus","i","e2","media_attributes","in_reply_to_id","statuses","visibilityIconsMap","opacity","pointerEvents","onChange","icon","q","limit","action","Textarea","ref","placeholder","fileID","newAttachments","required","attachments","performSearch","v1","search","resolve","onTrigger","defaultSearchTerm","setPoll","newPoll","onDescriptionChange","checked","onInput","_Fragment","accept","multiple","Loader","CharCountMeter","commonText","localeCode2Text","restSupportedLanguages","textarea","textBeforeMention","spaceAfterMention","textAfterMention","newText","Modal","CustomEmojisModal","emojiShortcode","textBeforeEmoji","spaceBeforeEmoji","spaceAfterEmoji","textAfterEmoji","GIFPickerModal","alt_text","theToast","showToast","onSelect","autoResizeTextarea","scrollHeight","clientHeight","offsetHeight","height","_getCustomEmojis","visibleEmojis","searcher","getCustomEmojis","pmem","blob","fetch","keyArg","detectAll","newMediaAttachments","api","textareaProps","props","searcherRef","r","emojis","textExpanderRef","textExpanderTextRef","text2","emoji","cacheKeyArg","shortcode","detectLangs","langs","encodeHTML","lang","forwardRef","html","handleChange","history","displayNameWithEmoji","emojifyText","displayName","total","cur","name","shortenNumber","Promise","matched","then","v","more","handleValue","handleCommited","setText","slowHighlightPerf","composeHighlightRef","start","end","debouncedAutoDetectLanguage","useDebouncedCallback","dom","mark","Event","resizeObserver","throttleHighlightText","bullet","postSpaces","anything","lastLine","innerHTML","preSpaces","newBullet","pos","innerText","dir","rows","cols","hidden","charCount","leftChars","ctrlKey","setRangeText","setSelectionRange","scaleDimension","matrix","matrixLimit","scalingFactor","newHeight","newWidth","MediaAttachment","supportsEdit","supports","onScroll","configuration","getCurrentInstanceConfiguration","maxError","setMaxError","checkMaxError","snapStates","imageMatrix","videoMatrix","setDescription","debouncedOnDescriptionChange","timer","details","setImageMatrix","setVideoMatrix","toastRef","showModal","imageSizeLimit2","descTextarea","videoSize","videoSizeLimit2","videoMatrixLimit2","videoMatrix2","maxErrorToast","maxErrorText","err","imageSize","suffixType","naturalWidth","naturalHeight","1","2","3","videoWidth","videoHeight","values","setShowModal","src","onLoad","onLoadedMetadata","onRemove","alt","title","subtype","Menu2","MenuItem","body","response","zIndex","menuButton","append","Poll","option","label","splice","str","char","obj","push","MentionModal","accounts","setAccounts","relationshipsMap","setRelationshipsMap","setSelectedIndex","accounts2","fetchRelationships","relationships","loadAccounts","inputRef","filterShortcodes","searchTerm","bLower","aStartsWith","bStartsWith","aContains","bothContain","bContains","socialAddress","selectedAccount","selectedIndex","selectAccount","listRef","selectedItem","loadRelationships","term","debouncedLoadAccounts","enableOnFormTags","relationship","AccountBlock","customEmojisList","recentlyUsedCustomEmojis","customEmojisCatList","emojisCat","customEmojis","othersCat","matches","setMatches","_c","scrollableRef","onFind","onSelectEmoji","useCallback","recentlyUsedCustomEmojis2","recentlyUsedEmojiIndex","emoji2","setCustomEmojis","category","queueMicrotask","CustomEmojisList","memo","CustomEmojiButton","showCode","parent","rect","targetClassList","selfRect","addEdges","GIFS_PER_PAGE","showMore","slice","fetchGIFs","qRef","closest","currentTarget","remove","debouncedOnInput","onPointerEnter","staticUrl","decoding","setResults","currentOffset","gif","images","fixed_height_small","fixed_height_downsampled","fixed_height","theImage","webp","urlObj","strippedURL","strippedWebP","preventDefault","original","theURL","mp4","url2","strippedURL2","webpObj","parse"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}